# ==============================================================================
# Ref: "Alpha 101"
# # Alpha#41:

# [high * low]^0.5 - vwap

# #
# 算法
# 1.
#
# 含义
# 判断 high 和 low 的几何平均，与 vwap
# 追踪趋势

# 关联：
# 
# ==============================================================================

# ------------------------------------------------------------------------------
## Alpha Name
alphaName <- 'alpha101_41'

## 需要去除的日期
truncatedTD <- 0
# ------------------------------------------------------------------------------


tempCFFEX <- c("IF","IH","IC","T","TF") %>%
          paste0("^",.,collapse = '[0-9]+|') %>%
          paste0(.,"[0-9]+")

# ==========: 提取dtX ===============================================================================
# ------------------------------------------------------------------------------
# dtX
# ------------------------------------------------------------------------------ 

# ------------------------------------------------------------------------------
# 计算 signal

# ------------------------------------------------------------------------------
dtX <- inSample[, .SD[.N > truncatedTD]
                , by = 'InstrumentID']
# dtX[vwap > high]

dtX <- dtX[vwap < high] %>%
        .[,mySignal := sqrt(high * low) - vwap]
# ==================================================================================================
