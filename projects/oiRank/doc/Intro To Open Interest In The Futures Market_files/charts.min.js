function faSetupQuillEditor(t){var e;e=new Quill(t,{modules:{toolbar:{container:t+"Toolbar"},"link-tooltip":!0},styles:!1});var i=faGetInputElementFromQuillEditor(e);e.setHTML(i.val());i.hide();$(t).show();$("#"+e.id).attr("placeholder",i.attr("placeholder"));faPretendPlaceholder(e);e.on("text-change",function(t,e){faGetInputElementFromQuillEditor(this).val(faStandardizeHTML(this.getHTML()));faPretendPlaceholder(this)});return e}function faPretendPlaceholder(t){var e=t.getText().trim();(e=e.length<=0)?$(t.container).addClass("emptyPlaceholder"):$(t.container).removeClass("emptyPlaceholder")}function faGetInputElementFromQuillEditor(t){var e=$(t.container).attr("inputtarget");return $(e)}function faStandardizeHTML(t){var e=t.replace(/(<div)/gim,"<p").replace(/<\/div>/gim,"</p>");e=e.replace("<p><br></p>","");return e}function withGeoData(t){geoData&&t(geoData)}function isCAUS(t){t.hasOwnProperty("country_code")&&(t=t.country_code);return/^(CA|US)$/i.test(t)}function isCA(t){t.hasOwnProperty("country_code")&&(t=t.country_code);return/^(CA)$/i.test(t)}function isUS(t){t.hasOwnProperty("country_code")&&(t=t.country_code);return/^(US)$/i.test(t)}function getCookie(t){for(var e=document.cookie.split(";"),i=0;i<e.length;i++){var n=e[i].split("=");if(n[0].trim()==t)return n.length>2?n.splice(1).join("="):n[1]}}function setCookie(t,e,i){document.cookie=t+"="+e+i+"; path=/"}function submitVote(t){var e=$(this).closest("[data-entity-id]").data("entity-id"),i="/advisor-network/api/increment-vote/"+e+"/",n=!1,a={};$(this).parent().find("button").addClass("disabled");if($(this).is(".yes")){i+="yes/";a.name=$(this).data("name");a.id=$(this).data("id");a.thumb=$(this).data("thumb");a.hideConsultation=$(this).data("hide-consultation");n=!0}$(this).is(".no")&&(i+="no/");$(this).is(".maybe")&&(i+="maybe/");var o=$(this).closest("[data-vote-type]").data("vote-type");i+=o+"/";$.ajax({url:i,method:"POST",id:e,success:function(t){onSubmitVote(t,this.id,o,n,a)},error:onFailSubmitVote})}function onSubmitVote(t,e,i){var n="";n+=' <div id="thank-you" class="modal">';n+='   <div class="inner">';n+='     <div class="message">Thank you for your vote!</div>';n+='     <button type="button" class="button secondary modal-close">OK</button>';n+="   </div>";n+=" </div>";var a=$(n),o={};renderModal(a.html(),o);resultObject=$.parseJSON(t);"undefined"==resultObject||"article"!=i&&"answer"!=i||$("#"+i+"_usefulness_"+e).text(resultObject[i+"_usefulness"])}function onFailSubmitVote(){$.show_alert("Sorry, but an error occurred.")}function renderModal(t,e){var i={};i.callback=function(){};i.class="";i.id="";var e=$.extend(i,e),n=document.getElementsByClassName("modal");n.length>0&&n[0].trigger("close");var a,o,r="";if(0==$(".modal "+e.class).length){o=$('<div class="screen"></div>');r+=' <div id="'+e.id+'" class="modal '+e.class+'" >';r+='<div class="inner">';r+=t;r+="</div>";r+="</div>";a=$(r);$("body").append(o);o.append(a);a.find(".field-box").fieldbox();a.modal(e)}else{a=$(".modal "+e.class);a.html(r);o=a.closest(".screen")}e.callback(a);a.trigger("open")}function renderOverlay(t,e){var i={hijackScroll:[]};i.callback=function(){};i.class="";i.id="";var n,a,e=$.extend(i,e),o="";if(0==$(".overlay "+e.class).length){a=$('<div class="screen" style="position:absolute;"></div>');o+=' <div id="'+e.id+'" class="overlay'+e.class+'" >';o+='<div class="inner">';o+=t;o+="</div>";o+="</div>";n=$(o);$("body").append(a);a.append(n);n.find(".field-box").fieldbox();n.modal(e)}else{n=$(".overlay "+e.class);n.html(o);a=n.closest(".screen")}e.callback(n);n.trigger("open")}function numberSmartFormat(t,e){if(isNaN(parseFloat(t))||"Infinity"==t)return"-";(void 0===e||null==e||isNaN(parseInt(e)))&&(e=0);var i=t.toString().split(".")[0],n="";switch(parseInt((i.length-1)/3)){case 2:n="M";t/=1e6;break;case 3:n="B";t/=1e9;break;case 4:n="T";t/=1e12}n&&0===e&&(e=2);return addCommas(parseFloat(t).toFixed(e))+n}function addCommas(t){for(var e=t.toString().split(".");/(\d+)(\d{3})/.test(e[0].toString());)e[0]=e[0].toString().replace(/(\d+)(\d{3})/,"$1,$2");return e.join(".")}function noZeros(t){return isNaN(parseFloat(t))||"Infinity"==t||0===parseFloat(t)?"-":t}function updateHeaderUserMenu(){var t="";t+='<li class="menu-item">';t+='<a href="/accounts/manageprofile.aspx" class="menu-item-title">'+investopedia.helper.authentication.getUserName()+" (edit)</a>";t+="</li>";t+='<li class="menu-item">';t+='<a href="/accounts/logout.aspx" class="menu-item-title">Sign Out</a>';t+="</li>";$(".meganav div.menu.member ul.menu-items").html(t)}function formatValuePlusMinus(t,e){var i="",n=null,a=t;t=parseFloat(t);t>0?n="value-plus":t<0&&(n="value-minus");e&&(a+=e);i+=n?'<span class="'+n+'">'+(t>0?"+":"")+a+"</span>":a;return i}function showErrorModal(t,e){var i,n="";n+='<div id="errorModal" class="modal">';n+='  <div class="inner error-definition">';n+="    <p>Error: "+e+"</p>";n+="  </div>";n+='  <button type="button" class="button primary submit">Ok</button>';n+="</div>";i=$(n);t.parent().append(i);i.find(".submit").on("click",function(){i.remove()})}function showMessageModalAt(t,e){var i,n="";n+='<div id="messageModal" class="modal">';n+='  <div class="inner error-definition">';n+="    <p>"+e+"</p>";n+="  </div>";n+='  <button type="button" class="button primary submit">Ok</button>';n+="</div>";i=$(n);var a=document.activeElement;$(a).blur();t.parent().append(i);setTimeout(function(){i.find(".submit").focus();i.find(".submit").on("click",function(){i.remove();$(a).focus()});i.on("keyup",function(t){if(13==t.keyCode){i.remove();$(a).focus()}})},100)}function showMessageModal(t){function e(t){setTimeout(function(){t.find(".submit").focus();t.find(".submit").on("click",function(){t.trigger("close");n.focus()});t.find(".submit").on("keyup",function(e){if(13==e.keyCode){t.trigger("close");n.focus()}})},100)}var i="";i+='  <div class="inner error-definition">';i+="    <p>"+t+"</p>";i+="  </div>";i+='  <button type="button" class="button primary submit">Ok</button>';var n=document.activeElement;n.blur();renderModal(i,{id:"messageModal",callback:e})}function htmlEncode(t,e){var i=document.createElement("span");e&&i.setAttribute("class",e);i.textContent=t;return i.outerHTML}function checkNestedObjects(t,e){return e.split(".").every(function(e){if("object"!=typeof t||null===t||!(e in t))return!1;t=t[e];return!0})}function getDOY(t,e){var i=new Date;i.setFullYear(i.getYear(),t-1,e-1);var n=new Date(i.getFullYear(),0,0);return Math.floor((i-n)/864e5)}function getLoadingMarkup(){return'<div class="loader"><div class="progress center"><span class="point"></span><span class="point"></span><span class="point"></span></div></div>'}function getInlineErrorMarkup(t,e){var i="";i+='<div class="data-error">';i+=' <div class="data-error-art"></div>';t&&(i+=' <p class="data-error-title">'+t+"</p>");e&&(i+=' <p class="data-error-description">'+e+"</p>");i+="</div>";return i}function runSiteSearch(t){t&&t.length>0&&(window.location="/search/default.aspx?q="+t)}function loadQuoteData(t){xignite.quote(t).done(function(t){if(t)for(var e=0;e<t.length;e++){var i=t[e];if("Success"==i.Outcome){null!=i.ExtendedHoursType?xignite.pollRefreshTime=25e3:xignite.pollRefreshTime=5e3;updateQuoteData(i)}}else{console.log("Xignite Error:");console.log(xignite.lastError)}})}function updateQuoteData(t){var e={quoteSymbol:{data:t.Identifier,animate:!1,colorChange:!1,displayCallback:null,hideCallback:null},quoteName:{data:t.Name,animate:!1,colorChange:!1,displayCallback:null,hideCallback:null},quoteMessage:{data:t.Message,animate:!1,colorChange:!1,displayCallback:function(){return-1==t.SourceAPI.toLowerCase().indexOf("xignitebatsrealtime")?"Data delayed 15 minutes":"Real-time BATS BZX Price"},hideCallback:null},quoteExchange:{data:"("+t.Market+")",animate:!1,colorChange:!1,displayCallback:null,hideCallback:null},quotePrice:{data:t.Last,animate:!0,colorChange:!1,displayCallback:function(){return numberSmartFormat(t.Last,2)},hideCallback:null},quoteChange:{data:t.Change,animate:!0,colorChange:!0,displayCallback:function(){return numberSmartFormat(t.Change,2)+" ("+numberSmartFormat(t.PercentChange,2)+"%)"},hideCallback:null},quoteDate:{data:null,animate:!1,colorChange:!1,displayCallback:function(){var e=t.DateTime;t.ExtendedHoursDateTime&&t.ExtendedHoursType&&(e=t.ExtendedHoursDateTime);return $.format.date(e,"MMM dd, h:mm a")},hideCallback:null},quoteExtended:{data:null,animate:!1,colorChange:!1,displayCallback:null,hideCallback:function(){return null==t.ExtendedHoursType}},quoteExtendedHoursType:{data:null,animate:!1,colorChange:!1,displayCallback:function(){return"PostMarket"==t.ExtendedHoursType?"After Hours:":"PreMarket"==t.ExtendedHoursType?"Pre Market:":"Extended Hours:"},hideCallback:null},quoteExtendedHoursPrice:{data:t.ExtendedHoursPrice,animate:!0,colorChange:!1,displayCallback:function(){return numberSmartFormat(t.ExtendedHoursPrice,2)},hideCallback:null},quoteExtendedHoursChange:{data:t.ExtendedHoursChange,animate:!0,colorChange:!0,displayCallback:function(){return numberSmartFormat(t.ExtendedHoursChange,2)+" ("+numberSmartFormat(t.ExtendedHoursPercentChange,2)+"%)"},hideCallback:null},quotePreviousClose:{data:t.PreviousClose,animate:!1,colorChange:!1,displayCallback:function(){return numberSmartFormat(t.PreviousClose,2)},hideCallback:null},quoteOpen:{data:t.Open,animate:!1,colorChange:!1,displayCallback:function(){return numberSmartFormat(t.Open,2)},hideCallback:null},quoteDayRange:{data:null,animate:!1,colorChange:!1,displayCallback:function(){return numberSmartFormat(t.Low,2)+" - "+numberSmartFormat(t.High,2)},hideCallback:null},quoteVolume:{data:t.Volume,animate:!1,colorChange:!1,displayCallback:function(){return numberSmartFormat(t.Volume,2)},hideCallback:null}};for(var i in e)if(e.hasOwnProperty(i)){var n=e[i],a=$("#"+i);if(null!=n.hideCallback&&n.hideCallback()){a.hide();continue}a.show();var o=null;if(null!=n.displayCallback)o=n.displayCallback();else{if(null==n.data)continue;o=n.data}if(a.text()==o)continue;var r=n.data;if(n.colorChange)if(n.animate){a.fadeOut(10);setUpDownColorClasses(a,r);a.text(o).fadeIn()}else{setUpDownColorClasses(a,r);a.text(o)}else n.animate?a.fadeOut(10).text(o).fadeIn():a.text(o)}}function setUpDownColorClasses(t,e){null!=e&&(e>=0?t.removeClass("value-minus").addClass("value-plus"):t.removeClass("value-plus").addClass("value-minus"))}function moveWatchlistAd(){var t=$(window).width(),e=$("#AdSlot_AF-Sponsorshiplogo");if(t<961)var i=$(".columns div.watchlist-rail");else var i=$(".sidebar div.watchlist-rail");if(i.length>0){var n=i.width(),a=i.offset().top,o=i.offset().left;e.css({width:n,top:a,left:o})}}function isSymbolInWatchlist(t,e,i){var n=!1;$.map(t,function(t,a){t.id==e&&$.map(t.symbols,function(t,e){t.name==i&&(n=!0)})});return n}function modifySymbol(t,e,i){var n=t;e||(e="-");i||(i="/");-1!==t.indexOf(e)&&(n=t.replace(e,i));return n}var invFramework=invFramework||{};invFramework.templates=invFramework.templates||{};invFramework.templates["inv-dialog-demo"]={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){return'<div style="display:flex; height:100px; align-items:center;">\n    <div style="width:100%; text-align:center;">\n        Hello World!\n    </div>\n</div>'},useData:!0};invFramework.templates["inv-dialog"]={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){var o,r=null!=e?e:t.nullContext||{},s=i.helperMissing,l=t.escapeExpression;return'<div id="'+l((o=null!=(o=i.id||(null!=e?e.id:e))?o:s,"function"==typeof o?o.call(r,{name:"id",hash:{},data:a}):o))+'" class="inv-dialog '+l((o=null!=(o=i.modeClass||(null!=e?e.modeClass:e))?o:s,"function"==typeof o?o.call(r,{name:"modeClass",hash:{},data:a}):o))+'">\n    <div class="inv-dialog-window">\n        <div class="inner">\n            <div class="inv-dialog-icon-close"></div>\n\n\n        </div>\n    </div>\n</div>'},useData:!0};invFramework.templates.login={1:function(t,e,i,n,a){var o;return'        <div class="modal-title">'+t.escapeExpression((o=null!=(o=i.login_title||(null!=e?e.login_title:e))?o:i.helperMissing,"function"==typeof o?o.call(null!=e?e:t.nullContext||{},{name:"login_title",hash:{},data:a}):o))+"</div>\n"},3:function(t,e,i,n,a){return'        <div class="modal-title">Account Login</div>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){var o;return'<form id="account-api-login-json">\n    <div class="icon-close modal-close"></div>\n'+(null!=(o=i.if.call(null!=e?e:t.nullContext||{},null!=e?e.login_title:e,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.program(3,a,0),data:a}))?o:"")+'    <hr />\n    <div class="field-box validate-email validate-notempty no-scroll">\n        <label for="edit-email">Email Address</label>\n        <input type="text" id="edit-email" name="email" value autofocus tabindex="0">\n        <div class="field-alert">\n            <div class="msg"></div>\n        </div>\n    </div>\n    <div class="field-box validate-notempty">\n        <label for="edit-password">Password</label>\n        <input name="password" id="edit-password" type="password" value tabindex="1">\n        <div class="field-alert">\n            <div class="msg"></div>\n        </div>\n    </div>\n    <div>\n        <label for="edit-remember" class="checkbox-remember">\n            <input type="checkbox" id="edit-remember" name="remember" value="1" class="form-checkbox" tabindex="2" />Remember me\n        </label>\n    </div>\n    <div>\n        <button type="button" class="button primary submit" tabindex="3">Sign In</button>\n    </div>\n    <div class="account-links">\n        <a class="register">Create new account</a>\n        |\n        <a rel="nofollow" href="/accounts/forgotpassword.aspx">Forgot your password?</a>\n    </div>\n</form>'},useData:!0};invFramework.templates.registration={1:function(t,e,i,n,a){var o;return'    <div class="modal-title">'+t.escapeExpression((o=null!=(o=i.registration_title||(null!=e?e.registration_title:e))?o:i.helperMissing,"function"==typeof o?o.call(null!=e?e:t.nullContext||{},{name:"registration_title",hash:{},data:a}):o))+"</div>\n"},3:function(t,e,i,n,a){return'    <div class="modal-title">Free Member Registration</div>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){var o,r,s=null!=e?e:t.nullContext||{};return'<div class="icon-close modal-close"></div>\n'+(null!=(o=i.if.call(s,null!=e?e.registration_title:e,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.program(3,a,0),data:a}))?o:"")+'<form id="modal_registration_form">\n    <hr />\n    <div class="field-box validate-notempty financial-advisor">\n        <label for="edit-financial-advisor">Are you a Financial Advisor or Registered Investment Advisor?</label><br />\n            <input type="radio" id="edit-financial-advisor-1" name="financial_advisor" value="1">\n            <label class="radio-label" for="edit-financial-advisor-1">Yes</label>\n            <input type="radio" id="edit-financial-advisor-0" name="financial_advisor" value="0">\n            <label class="radio-label" for="edit-financial-advisor-0">No</label>\n        <div class="field-alert">\n            <div class="msg"></div>\n                </div>\n        </div>\n    <hr><input name="email_detect" class="follow-email-detect" id="detect-email">\n    <div class="field-box validate-email validate-notempty">\n        <label for="edit-email">Email Address</label>\n        <input type="inv_id" name="inv_id" id="edit-inv-id" value autofocus>\n        <div class="field-alert">\n            <div class="msg"></div>\n        </div>\n    </div><br />\n    <div class="field-box validate-notempty validate-password-sitewide validate-match">\n        <label for="edit-password">Password</label>\n        <input type="password" id="edit-password" name="password">\n        <small>Minimum of 6 characters</small>\n        <div class="field-alert">\n            <div class="msg"></div>\n            </div>\n        </div>\n    <div class="field-box validate-notempty validate-password-sitewide validate-match">\n        <label for="edit-confirm-password">Confirm Password</label>\n        <input type="password" id="edit-confirm-password" name="confirm_password">\n        <div class="field-alert">\n            <div class="msg"></div>\n        </div>\n    </div>\n    <div class="hspace">\n        <div>\n            <input type="checkbox" id="edit-remember" name="remember" value="1">\n            <label for="edit-remember">Remember Me</label>\n        </div>\n        <button type="button" class="button primary submit">Register</button>\n    </div>\n    <div class="disclaimer">\n        By creating an account, I agree to the <a href="/corp/termsofuse.aspx">Terms of Use</a> and <a href="/corp/privacypolicy.aspx">Privacy Policy</a>. '+t.escapeExpression((r=null!=(r=i.extended_disclaimer||(null!=e?e.extended_disclaimer:e))?r:i.helperMissing,"function"==typeof r?r.call(s,{name:"extended_disclaimer",hash:{},data:a}):r))+"\n    </div>\n</form>"},useData:!0};invFramework.templates.barometer={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){var o,r=null!=e?e:t.nullContext||{},s=i.helperMissing,l="function",h=t.escapeExpression;return'<img src="'+h((o=null!=(o=i.cdn_domain||(null!=e?e.cdn_domain:e))?o:s,typeof o===l?o.call(r,{name:"cdn_domain",hash:{},data:a}):o))+h((o=null!=(o=i.barometer_image||(null!=e?e.barometer_image:e))?o:s,typeof o===l?o.call(r,{name:"barometer_image",hash:{},data:a}):o))+'" />\n<img src="'+h((o=null!=(o=i.cdn_domain||(null!=e?e.cdn_domain:e))?o:s,typeof o===l?o.call(r,{name:"cdn_domain",hash:{},data:a}):o))+h((o=null!=(o=i.dot_image||(null!=e?e.dot_image:e))?o:s,typeof o===l?o.call(r,{name:"dot_image",hash:{},data:a}):o))+'" class="dot"/>\n<div class="start">'+h((o=null!=(o=i.start||(null!=e?e.start:e))?o:s,typeof o===l?o.call(r,{name:"start",hash:{},data:a}):o))+'</div>\n<div class="end">'+h((o=null!=(o=i.end||(null!=e?e.end:e))?o:s,typeof o===l?o.call(r,{name:"end",hash:{},data:a}):o))+'</div>\n<div class="reading">\n    <span>IAI</span>\n    '+h((o=null!=(o=i.value||(null!=e?e.value:e))?o:s,typeof o===l?o.call(r,{name:"value",hash:{},data:a}):o))+"\n    <span>"+h((o=null!=(o=i.reading||(null!=e?e.reading:e))?o:s,typeof o===l?o.call(r,{name:"reading",hash:{},data:a}):o))+'</span>\n    <span class="date-text">'+h((o=null!=(o=i.date_text||(null!=e?e.date_text:e))?o:s,typeof o===l?o.call(r,{name:"date_text",hash:{},data:a}):o))+"</span>\n</div>\n"},useData:!0};invFramework.templates["vote-fail"]={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){return'<div>\n  <div class="statement">Sorry, an error occurred.</div>\n</div>\n'},useData:!0};invFramework.templates["vote-success"]={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){return'<div>\n  <div class="statement">Thank you for your vote!</div>\n  <button type="button" class="button inv-dialog-close">OK</button>\n</div>\n'},useData:!0};invFramework.templates["inv-comparison-chart"]={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){var o,r=null!=e?e:t.nullContext||{},s=i.helperMissing,l=t.escapeExpression;return'<div class="figure">\n    <div class="column-bar barA" data-label="'+l((o=null!=(o=i.labelA||(null!=e?e.labelA:e))?o:s,"function"==typeof o?o.call(r,{name:"labelA",hash:{},data:a}):o))+'"><div class="inner"></div></div>\n    <div class="column-bar barB" data-label="'+l((o=null!=(o=i.labelB||(null!=e?e.labelB:e))?o:s,"function"==typeof o?o.call(r,{name:"labelB",hash:{},data:a}):o))+'"><div class="inner"></div></div>\n    <div class="axis"></div>\n    <div class="diff"><div class="label"></div></div>\n</div>\n<div class="labels">\n    <div class="column-label labelA"></div>\n    <div class="column-label labelB"></div>\n</div>'},useData:!0};invFramework.templates["inv-range-chart"]={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){var o,r=null!=e?e:t.nullContext||{},s=i.helperMissing,l=t.escapeExpression;return'<div class="inv-range-chart-header">\n    <div class="label">'+l((o=null!=(o=i.minLabel||(null!=e?e.minLabel:e))?o:s,"function"==typeof o?o.call(r,{name:"minLabel",hash:{},data:a}):o))+'</div>\n    <div class="label">'+l((o=null!=(o=i.maxLabel||(null!=e?e.maxLabel:e))?o:s,"function"==typeof o?o.call(r,{name:"maxLabel",hash:{},data:a}):o))+'</div>\n</div>\n<div class="inv-range-chart-body">\n    <div class="bar">\n        <div class="median" data-value="'+l((o=null!=(o=i.medianValue||(null!=e?e.medianValue:e))?o:s,"function"==typeof o?o.call(r,{name:"medianValue",hash:{},data:a}):o))+'"></div>\n        <div class="value" data-value="'+l((o=null!=(o=i.chartValue||(null!=e?e.chartValue:e))?o:s,"function"==typeof o?o.call(r,{name:"chartValue",hash:{},data:a}):o))+'"></div>\n    </div>\n</div>'},useData:!0};invFramework.templates["inv-arrow"]={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){var o,r=null!=e?e:t.nullContext||{},s=i.helperMissing,l="function",h=t.escapeExpression;return'<svg version="1.1"\n     id="Layer_1"\n     xmlns="http://www.w3.org/2000/svg"\n     xmlns:xlink="http://www.w3.org/1999/xlink"\n     x="0px"\n     y="0px"\n\t viewBox="0 0 13 19"\n     width="'+h((o=null!=(o=i.width||(null!=e?e.width:e))?o:s,typeof o===l?o.call(r,{name:"width",hash:{},data:a}):o))+'"\n     height="'+h((o=null!=(o=i.height||(null!=e?e.height:e))?o:s,typeof o===l?o.call(r,{name:"height",hash:{},data:a}):o))+'"\n     xml:space="preserve"\n>\n    <style type="text/css">\n        .st0 {\n            fill:none;\n            stroke:'+h((o=null!=(o=i.color||(null!=e?e.color:e))?o:s,typeof o===l?o.call(r,{name:"color",hash:{},data:a}):o))+";\n            stroke-width:"+h((o=null!=(o=i.strokeWidth||(null!=e?e.strokeWidth:e))?o:s,typeof o===l?o.call(r,{name:"strokeWidth",hash:{},data:a}):o))+';\n            stroke-miterlimit:10;\n        }\n    </style>\n    <g transform="rotate('+h((o=null!=(o=i.angle||(null!=e?e.angle:e))?o:s,typeof o===l?o.call(r,{name:"angle",hash:{},data:a}):o))+' 6.5 7.5)">\n        <polyline class="st0" points="3,7.1 6.5,3.6 10,7.1 \t"/>\n        <line class="st0" x1="6.5" y1="3.6" x2="6.5" y2="'+h((o=null!=(o=i.y2||(null!=e?e.y2:e))?o:s,typeof o===l?o.call(r,{name:"y2",hash:{},data:a}):o))+'"/>\n    </g>\n</svg>'},useData:!0};invFramework.templates.trading_summary={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){var o,r=null!=e?e:t.nullContext||{},s=i.helperMissing,l="function",h=t.escapeExpression;return'<tr>\n  <td class="symbol"><a href="/markets/stocks/'+h((o=null!=(o=i.symbol||(null!=e?e.symbol:e))?o:s,typeof o===l?o.call(r,{name:"symbol",hash:{},data:a}):o))+'">'+h((o=null!=(o=i.symbol||(null!=e?e.symbol:e))?o:s,typeof o===l?o.call(r,{name:"symbol",hash:{},data:a}):o))+'</a></td>\n  <td>\n    <div class="tb chart '+h((o=null!=(o=i.fundamentalChartType||(null!=e?e.fundamentalChartType:e))?o:s,typeof o===l?o.call(r,{name:"fundamentalChartType",hash:{},data:a}):o))+'" data-value="'+h((o=null!=(o=i.fundamentalValue||(null!=e?e.fundamentalValue:e))?o:s,typeof o===l?o.call(r,{name:"fundamentalValue",hash:{},data:a}):o))+'" data-direction="'+h((o=null!=(o=i.fundamentalDirection||(null!=e?e.fundamentalDirection:e))?o:s,typeof o===l?o.call(r,{name:"fundamentalDirection",hash:{},data:a}):o))+'"></div>\n    <div class="footnote">*'+h((o=null!=(o=i.fundamentalSentiment||(null!=e?e.fundamentalSentiment:e))?o:s,typeof o===l?o.call(r,{name:"fundamentalSentiment",hash:{},data:a}):o))+" based on "+h((o=null!=(o=i.fundamentalMetrics||(null!=e?e.fundamentalMetrics:e))?o:s,typeof o===l?o.call(r,{name:"fundamentalMetrics",hash:{},data:a}):o))+' metrics</div>\n  </td>\n  <td>\n    <div class="tb chart '+h((o=null!=(o=i.technicalChartType||(null!=e?e.technicalChartType:e))?o:s,typeof o===l?o.call(r,{name:"technicalChartType",hash:{},data:a}):o))+'" data-value="'+h((o=null!=(o=i.technicalValue||(null!=e?e.technicalValue:e))?o:s,typeof o===l?o.call(r,{name:"technicalValue",hash:{},data:a}):o))+'" data-direction="'+h((o=null!=(o=i.technicalDirection||(null!=e?e.technicalDirection:e))?o:s,typeof o===l?o.call(r,{name:"technicalDirection",hash:{},data:a}):o))+'"></div>\n    <div class="footnote">*'+h((o=null!=(o=i.technicalSentiment||(null!=e?e.technicalSentiment:e))?o:s,typeof o===l?o.call(r,{name:"technicalSentiment",hash:{},data:a}):o))+" based on "+h((o=null!=(o=i.technicalMetrics||(null!=e?e.technicalMetrics:e))?o:s,typeof o===l?o.call(r,{name:"technicalMetrics",hash:{},data:a}):o))+" identified patterns</div>\n  </td>\n  <td></td>\n</tr>"},useData:!0};invFramework.templates["add-symbol"]={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){return'<form id="AddWatchlistModal">\n    <div class="modal-thumb">\n        <div class="inv-icon-star"></div>\n    </div>\n    <div class="modal-title">Add to Watchlist</div>\n    <hr>\n    <div class="field-box no-scroll select-box">\n        <select class="watchlist-selection" name="watchlist_list" disabled>\n            <option value="0">+ New Watchlist</option>\n        </select>\n        <div class="field-alert">\n            <div class="msg"></div>\n        </div>\n    </div>\n    <div class="field-box validate-notempty no-scroll field-add hidden">\n        <input type="text" name="watchlist_name" placeholder="New Watchlist">\n        <div class="field-alert">\n            <div class="msg"></div>\n        </div>\n    </div>\n    <div class="error-message"></div>\n    <button type="button" class="button primary submit">Add</button>\n</form>\n'},useData:!0};invFramework.templates["error-message"]={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){var o;return'<div class="modal-thumb">\n    <div class="inv-icon-star"></div>\n</div>\n<div class="message">\n    '+t.escapeExpression((o=null!=(o=i.message||(null!=e?e.message:e))?o:i.helperMissing,"function"==typeof o?o.call(null!=e?e:t.nullContext||{},{name:"message",hash:{},data:a}):o))+"\n</div>"},useData:!0};invFramework.templates.fundamentalTable={1:function(t,e,i,n,a){var o,r=null!=e?e:t.nullContext||{},s=i.helperMissing,l="function",h=t.escapeExpression;return'            <tr identifier="'+h((o=null!=(o=i.symbol||(null!=e?e.symbol:e))?o:s,typeof o===l?o.call(r,{name:"symbol",hash:{},data:a}):o))+'">\n                <td class="action">\n                    <div class="modal-container">\n                        <div class="stroke inv-icon-star" data-symbol="'+h((o=null!=(o=i.symbol||(null!=e?e.symbol:e))?o:s,typeof o===l?o.call(r,{name:"symbol",hash:{},data:a}):o))+'"></div>\n                    </div>\n                </td>\n                <td>\n                    <a href="'+h((o=null!=(o=i.link||(null!=e?e.link:e))?o:s,typeof o===l?o.call(r,{name:"link",hash:{},data:a}):o))+'">'+h((o=null!=(o=i.symbol||(null!=e?e.symbol:e))?o:s,typeof o===l?o.call(r,{name:"symbol",hash:{},data:a}):o))+'</a>\n                </td>\n                <td class="num">'+h((o=null!=(o=i.value||(null!=e?e.value:e))?o:s,typeof o===l?o.call(r,{name:"value",hash:{},data:a}):o))+'</td>\n                <td class="num">'+h((o=null!=(o=i.price||(null!=e?e.price:e))?o:s,typeof o===l?o.call(r,{name:"price",hash:{},data:a}):o))+"</td>\n            </tr>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){var o,r,s=null!=e?e:t.nullContext||{},l=i.helperMissing,h=t.escapeExpression;return'<div class="inv-fundamental-table">\n    <div class="fundamental-title">'+h((r=null!=(r=i.title||(null!=e?e.title:e))?r:l,"function"==typeof r?r.call(s,{name:"title",hash:{},data:a}):r))+'</div>\n    <table>\n        <tbody>\n            <tr>\n                <th></th>\n                <th class="symbol">Symbol</th>\n                <th class="num">'+h((r=null!=(r=i.fundamental||(null!=e?e.fundamental:e))?r:l,"function"==typeof r?r.call(s,{name:"fundamental",hash:{},data:a}):r))+'</th>\n                <th class="num">Price</th>\n            </tr>\n'+(null!=(o=i.each.call(s,null!=e?e.tickers:e,{name:"each",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a}))?o:"")+"        </tbody>\n    </table>\n</div>"},useData:!0};invFramework.templates["video-modal"]={compiler:[7,">= 4.0.0"],main:function(t,e,i,n,a){var o,r=null!=e?e:t.nullContext||{},s=i.helperMissing,l="function",h=t.escapeExpression;return'<script src="https://fast.wistia.com/embed/medias/'+h((o=null!=(o=i.videoId||(null!=e?e.videoId:e))?o:s,typeof o===l?o.call(r,{name:"videoId",hash:{},data:a}):o))+'.jsonp" async><\/script>\n<script src="https://fast.wistia.com/assets/external/E-v1.js" async><\/script>\n<div class="wistia_responsive_padding" style="padding:56.0% 0 0 0;position:relative;">\n\t<div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">\n\t\t<div class="wistia_embed wistia_async_'+h((o=null!=(o=i.videoId||(null!=e?e.videoId:e))?o:s,typeof o===l?o.call(r,{name:"videoId",hash:{},data:a}):o))+' videoFoam=true" style="height:100%;width:100%">\n\t\t\t&nbsp;\n\t\t</div>\n\t</div>\n</div>\n<div class="footer">\n\t<div>\n\t\t<h4>'+h((o=null!=(o=i.title||(null!=e?e.title:e))?o:s,typeof o===l?o.call(r,{name:"title",hash:{},data:a}):o))+"</h4>\n\t\t<p>"+h((o=null!=(o=i.content||(null!=e?e.content:e))?o:s,typeof o===l?o.call(r,{name:"content",hash:{},data:a}):o))+'</p>\n\t</div>\n\t<div>\n\t\t<span class="price">'+h((o=null!=(o=i.price||(null!=e?e.price:e))?o:s,typeof o===l?o.call(r,{name:"price",hash:{},data:a}):o))+'</span>\n\t\t<a href="'+h((o=null!=(o=i.link||(null!=e?e.link:e))?o:s,typeof o===l?o.call(r,{name:"link",hash:{},data:a}):o))+'" class="button" data-course="'+h((o=null!=(o=i.course||(null!=e?e.course:e))?o:s,typeof o===l?o.call(r,{name:"course",hash:{},data:a}):o))+'">Buy Now</a>\n\t</div>\n</div>'},useData:!0};window.safelyUse=function(t,e,i){var n,a;if(void 0===e)return!1;if(""===t)return i;n=t.split(".");a=n.shift();void 0===e[a]&&(e[a]={});void 0===i&&(i=e);return window.safelyUse(n.join("."),e[a],i)};window.safelyUse("investopedia.helper.authentication",this);investopedia.helper.authentication.authorizeAction=function(t,e,i){var n,a=this,o=[],r=$("body");o=null===e||e instanceof Array?e:[e];if(investopedia.helper.authentication.isUserLoggedIn())t.apply(this,o);else{n=r.invDialog({id:"login-modal",template:invFramework.templates.login,templateOptions:i,dialogInitFunction:{func:investopedia.component.InvDialog.login.init,args:[i]},escapable:!0});r.on("closeInvDialog",function(){r.off("user-login.dialog")});r.on("user-login.dialog",function(){t.apply(a,o)});n.instance("InvDialog").open()}};void 0===investopedia.helper.authentication&&(investopedia.helper.authentication={});investopedia.helper.authentication.getUserID=function(){var t=null,e=investopedia.helper.getCookie("user_info");if(e){e=$.parseJSON(decodeURIComponent(e).replace(/\+/g," "));t=e.uid}return t};void 0===investopedia.helper.authentication&&(investopedia.helper.authentication={});investopedia.helper.authentication.getUserName=function(){var t=null,e=investopedia.helper.getCookie("user_info");if(e){e=$.parseJSON(decodeURIComponent(e).replace(/\+/g," "));t=e.name}return t};void 0===investopedia.helper&&(investopedia.helper={});void 0===investopedia.helper.authentication&&(investopedia.helper.authentication={});investopedia.helper.authentication.isUserLoggedIn=function(){return null!=investopedia.helper.getCookie("user_info")};$.fn.instance=function(t){var e=$(this).data("plugins");return void 0!==e&&(void 0===t?e[Object.keys(e)[0]]:e[t])};void 0===investopedia.helper&&(investopedia.helper={});investopedia.helper.doCallback=function(t){if($.isFunction(t))t.call(t);else if($.isPlainObject(t)&&void 0!==t.func){args=null;context={};void 0!==t.args&&(args=t.args);void 0!==t.context&&(context=t.context);t.func.apply(context,args)}};void 0===investopedia.markets&&(investopedia.markets={});investopedia.markets.LOGIN_TITLE_ADD_SYMBOL="Login to Add to Watchlist";investopedia.markets.LOGIN_TITLE_ADD_WATCHLIST="Login to add Watchlist";investopedia.markets.REGISTRATION_TITLE_ADD_SYMBOL="Register to Add to Watchlist";investopedia.markets.REGISTRATION_TITLE_ADD_WATCHLIST="Register to add Watchlist";investopedia.markets.REGISTRATION_EXTENDED_DISCLAIMER_TEXT="By signing up for a watchlist youâ€™ll receive an email with news on the stocks you follow."
;void 0===investopedia.markets&&(investopedia.markets={});investopedia.markets.ERROR_DUPLICATE_SYMBOL=" already exists in this watchlist";investopedia.markets.ERROR_INVALID_SYMBOL=" is not a valid symbol.";investopedia.markets.ERROR_ADD_SYMBOL="Unable to add symbol to portfolio.";investopedia.markets.ERROR_DUPLICATE_PORTFOLIO="That watchlist name already exists. Please choose a different name.";investopedia.markets.ERROR_ADD_PORTFOLIO='Sorry, we were unable <br/> to create watchlist <span class="strong">%p</span>';void 0===investopedia.component&&(investopedia.component={});investopedia.component.InvDialog=function(t,e,i,n,a){t(n).instance("InvDialog")&&t(n).instance("InvDialog").destroy();this.IS_MODAL="is-modal";this.NOT_MODAL="is-modeless";this.DEFAULT_PARAMS={mode:this.IS_MODAL,backgroundTrigger:!0,id:"",showHide:!1,template:null,templateOptions:{},scrollHijackElement:t(n),escapable:!1,dialogInitFunction:null};this.params=t.extend(this.DEFAULT_PARAMS,a);this.options=t.extend(this.params,t(n).data());this.EVENTS={CLICK:"click",CLOSE:"closeInvDialog",OPEN:"openInvDialog",TOUCH_MOVE:"touchmove.InvDialog",KEYUP:"keyup"};this.SELECTORS={WINDOW:".inv-dialog-window",CLOSE_ICON:".inv-dialog-icon-close",INNER:"> .inner"};this.state="closed";this.templateOptions={id:this.options.id,modeClass:this.options.mode===this.IS_MODAL?this.IS_MODAL:this.NOT_MODAL};this.elements={};this.elements.document=t(document);this.elements.host=t(n);this.elements.dialog=t(e.template(i)(this.templateOptions));this.elements.window=this.elements.dialog.find(this.SELECTORS.WINDOW);this.elements.closeIcon=this.elements.dialog.find(this.SELECTORS.CLOSE_ICON);this.elements.content=null===this.options.template?"":t(e.template(this.options.template)(this.options.templateOptions));this.elements.window.find(this.SELECTORS.INNER).append(this.elements.content);if(!0===this.options.showHide){this._add();this._hide()}return this};investopedia.component.InvDialog.prototype._addListeners=function(){this.elements.closeIcon.on(this.EVENTS.CLICK,$.proxy(this.close,this));this.elements.closeIcon.on(this.EVENTS.CLICK,$.proxy(this._cancelClick,this));!0===this.options.escapable&&this.elements.document.on(this.EVENTS.KEYUP,$.proxy(this._handleEscapeKey,this));if(this.options.mode===this.IS_MODAL&&!0===this.options.backgroundTrigger){this.elements.dialog.on(this.EVENTS.CLICK,$.proxy(this.close,this));this.elements.window.on(this.EVENTS.CLICK,$.proxy(this._cancelClick,this))}};investopedia.component.InvDialog.prototype._removeListeners=function(){this.elements.closeIcon.off(this.EVENTS.CLICK);!0===this.options.escapable&&this.elements.document.off(this.EVENTS.KEYUP);if(this.options.mode===this.IS_MODAL&&!0===this.options.backgroundTrigger){this.elements.dialog.off(this.EVENTS.CLICK);this.elements.window.off(this.EVENTS.CLICK)}};investopedia.component.InvDialog.prototype._handleEscapeKey=function(){27===event.keyCode&&this.close()};investopedia.component.InvDialog.prototype._cancelClick=function(t){t&&t.stopPropagation()};investopedia.component.InvDialog.prototype.open=function(t){!0===this.options.showHide?this._show():this._add();this._startHijack();this.elements.host.trigger(this.EVENTS.OPEN,[this]);investopedia.helper.doCallback(t);this.state="open"};investopedia.component.InvDialog.prototype._startHijack=function(){var t=this.options.scrollHijackElement.find(".inv-dialog-window");if(null!==t&&t.length>0){this.elements.host.css({overflow:"hidden",touchAction:"none"});$("header, body > .page").css({overflow:"scroll"});$(document).on(this.EVENTS.TOUCH_MOVE,$.proxy(this._cancelTouchmove,this));t.on(this.EVENTS.TOUCH_MOVE,$.proxy(this._doHijack,this))}};investopedia.component.InvDialog.prototype._cancelTouchmove=function(t){t.target===this.elements.dialog[0]&&t.preventDefault()};investopedia.component.InvDialog.prototype._doHijack=function(t){var e=this.options.scrollHijackElement.find(".inv-dialog-window"),i=e.scrollTop(),n=e[0].scrollHeight-e[0].offsetHeight;if(i<1){e.scrollTop(1);t.preventDefault()}if(i>n){e.scrollTop(n);t.preventDefault()}};investopedia.component.InvDialog.prototype._endHijack=function(){var t=this.options.scrollHijackElement.find(".inv-dialog-window");if(null!==t&&t.length>0){this.elements.host.css({overflow:"",touchAction:"auto"});$("header, body > .page").css({overflow:""})}$(document).off(this.EVENTS.TOUCH_MOVE);t.off(this.EVENTS.TOUCH_MOVE)};investopedia.component.InvDialog.prototype.close=function(t){this._endHijack();!0===this.options.showHide?this._hide():this._remove();this.elements.host.trigger(this.EVENTS.CLOSE,[this]);investopedia.helper.doCallback(t);this.state="closed"};investopedia.component.InvDialog.prototype._show=function(){this.elements.dialog.show()};investopedia.component.InvDialog.prototype._hide=function(){this.elements.dialog.hide()};investopedia.component.InvDialog.prototype._add=function(){this.elements.host.append(this.elements.dialog);this._addListeners();this.elements.host.find(".field-box").fieldbox();null!==this.options.dialogInitFunction&&investopedia.helper.doCallback(this.options.dialogInitFunction)};investopedia.component.InvDialog.prototype._remove=function(){this._removeListeners();this.elements.dialog.remove()};investopedia.component.InvDialog.prototype.toggle=function(t,e){var i=this.elements.dialog;0===this.elements.host.find(this.SELECTORS.WINDOW).length||investopedia.helper.isVisible(i)?this.open(t):this.close(e)};investopedia.component.InvDialog.prototype.destroy=function(){this._remove();this.elements.host.removeData("InvDialog")};$.fn.invDialog=function(t){return $(this).each(function(){var e,i=invFramework.templates["inv-dialog"];e=new investopedia.component.InvDialog($,Handlebars,i,this,t);$.data(this,"plugins",{InvDialog:e})})};window.safelyUse("component.InvDialog.registration",investopedia);!function(t,e){var i,n,a,o,r=e.component.InvDialog.registration;r.init=function(){i=t("#modal_registration_form");n=t("body");a=n.instance("InvDialog");i.find("button.submit").on("click",r._submit);i.find("input").on("keyup",r._handleKeystrokes)};r._handleKeystrokes=function(e){e.stopPropagation();if(13===e.which){t(e.target).is("#edit-inv-id")&&i.find("#edit-password").select();t(e.target).is("#edit-password")&&i.find("#edit-confirm-password").select();t(e.target).is("#edit-confirm-password")&&i.find("button.submit").trigger("click")}};r._submit=function(){var e={scroll_to_error:!1};if(0===t.input_errors(i,e).length){o=t(this).invSubmit({submitting_text:"Registering..."}).instance();o.setSubmittingState();t.post("/accounts/api/signupmember/",i.serialize(),r._submitSuccess).fail(r._submitFail);o.destroy()}};r._submitSuccess=function(e){if(void 0!==e&&0===e.length){n.trigger("user-login");investopedia.analytics.uaEvents.addEvent(investopedia.analytics.uaEvents.eventActions.register,"authentication","Registration Modal");!1!==a&&a.close()}else{t.server_response(e);o.restoreElement()}};r._submitFail=function(){console.log("register fail");o.restoreElement()}}(jQuery,investopedia);window.safelyUse("component.InvDialog.login",investopedia);!function(t,e){var i,n,a,o,r=e.component.InvDialog.login;r.init=function(e){i=t("#account-api-login-json");n=t("body");a=n.instance("InvDialog");i.find("button.submit").on("click",r._submit);i.find("button.fb").on("click",r._facebookLogin);i.find("a.register").on("click",r._showRegisterDialog);i.find("input").on("keyup",r._handleKeystrokes);o=e};r._handleKeystrokes=function(e){e.stopPropagation();if(13===e.which){t(e.target).is("#edit-email")&&i.find("#edit-password").select();t(e.target).is("#edit-password")&&i.find("button.submit").trigger("click")}};r._submit=function(){var e={scroll_to_error:!1};0===t.input_errors(i,e).length&&t.post("/accounts/api/login/",i.serialize(),r._submitSuccess).fail(r._submitFail)};r._submitSuccess=function(e){if(void 0!==e&&0===e.length){n.removeClass("not-logged-in");n.trigger("user-login");investopedia.analytics.uaEvents.addEvent(investopedia.analytics.uaEvents.eventActions.login,"authentication","Login Modal");!1!==a&&a.close()}else t.server_response(e)};r._submitFail=function(){console.log("login fail")};r._facebookLogin=function(e){e.preventDefault();t.get("/accounts/api/facebook-login-url/").done(function(t){window.location.href=t}).fail(function(){i.find("button.fb").hide()}).always(function(){})};r._showRegisterDialog=function(){var t={id:"registration-modal",template:invFramework.templates.registration,templateOptions:o,dialogInitFunction:investopedia.component.InvDialog.registration.init,escapable:!0};n.invDialog(t).instance("InvDialog").open()}}(jQuery,investopedia);window.safelyUse("component.InvDialog.addSymbol",investopedia);!function(t,e){var i,n,a,o,r,s,l,h,c,d=e.component.InvDialog.addSymbol,u=invFramework.templates["add-symbol"];d.showDialog=function(e){o=t("body");h=e;s=o.invDialog({id:"add-watchlist",template:u,dialogInitFunction:investopedia.component.InvDialog.addSymbol.init}).instance("InvDialog");s.open()};d.init=function(){o=t("body");i=new PortfolioManager;n=t("#AddWatchlistModal");a=n.find("select[name=watchlist_list]");r=n.find(".field-add");l=n.find("button.submit");null===i.activePortfolioId?i.initPortfolios():d.renderMenuItems();o.on("init.pm.add-modal",d.renderMenuItems);o.on("add-portfolio-error.pm.add-modal",d.addPortfolioError);o.on("add-symbol-error.pm.add-modal",d.addSymbolError);o.on("add-portfolio.pm.add-modal",function(){s.close()});o.on("add-symbol.pm.add-modal",d.onComplete);a.on("change",d.toggleField);l.on("click",d.submitForm)};d.toggleField=function(){"0"===t(this).val()?r.removeClass("hidden"):r.addClass("hidden")};d.renderMenuItems=function(t){var e,n=i.unserializePortfolioID(i.activePortfolioId),o="";for(e in i.portfolios)o+='<option value="'+i.unserializePortfolioID(e)+'">'+i.portfolios[e].name+"</option>";a.prepend(o).prop("disabled",!1);a.find('option[value="'+n+'"]').prop("selected",!0)};d.submitForm=function(){var e,o;c=a.find(":selected");e=i.serializePortfolioID(c.val());o=r.find('input[type="text"]').val();"0"===c.val()?0===t.input_errors(n).length&&i.addPortfolio(o).done(function(t){i.addSymbol(h,t)}):i.addSymbol(h,e)};d.addPortfolioError=function(t,i,n){var a;switch(n){case"DuplicatePortfolioName":a=e.markets.ERROR_DUPLICATE_PORTFOLIO;break;default:a=e.markets.ERROR_ADD_PORTFOLIO.replace("%p",i)}d.showError(a)};d.addSymbolError=function(t,n,a,o){var r;switch(o){case"DuplicateSymbol":r=a+e.markets.ERROR_DUPLICATE_SYMBOL;break;case"InvalidSymbol":r=a+e.markets.ERROR_INVALID_SYMBOL;break;default:r=e.markets.ERROR_ADD_SYMBOL;i.logError(e.markets.ERROR_ADD_SYMBOL)}d.showError(r)};d.showError=function(e){var i={id:"watchlist-error",template:invFramework.templates["error-message"],templateOptions:{message:e}};o=t("body");t(".loader").removeClass("center-screen").hide();s.close();o.invDialog(i).instance("InvDialog").open()};d.onComplete=function(){s.close();i.portfolioManagerService.searchPortfoliosBySymbol({success:function(e,i,n){if(e&&e.data.length>0){t('[data-symbol="'+h+'"] .action').addClass("added");t("button.watchlist").addClass("in").text("In Watchlist")}investopedia.analytics.uaEvents.addEvent(investopedia.analytics.uaEvents.eventActions.addSymbol,"watchlist","Add Symbol Modal")},error:function(t,e,i){}},h)}}(jQuery,investopedia);var isMobile=function(){return"phone"===investopedia.device||"tablet"===investopedia.device},baseMarketsURL="markets";$(document).ready(function(){$(".dropmenu").dropmenu();$(".field-count").charcounter();$(".filmstrip").filmstrip();$(".field-box").fieldbox();$('.field-box input[type="email"]').emailfield();$(".dropmenu.sort").querystringDropdown();$(".collapsible").collapsible();$('input[type="checkbox"].skin').checkbox();$(".cloneable").cloneable();$(".validate-max").validateMax();$(".validate-match").validateMatch();$(".validate-integer").validateInteger();$(".pixel-track").pixelTrackLink();$(".modal").modal();$(".tabset").tabset();$("input.symbol-autocomplete").symbolAutoComplete();$("input.symbol-autocomplete-fixed").symbolAutoComplete({menuClass:"fixed"});$("header .more").on("click",function(){$("header .btm, header .more").toggleClass("open")});"function"==typeof setupInfluencerNetwork&&setupInfluencerNetwork();if("function"==typeof handleFollow){$(".button.follow.fa").on("click",handleFollow);$(".button.unfollow.fa").on("click",handleFollow)}if("function"==typeof wheelHandleFollow){$(".button.follow.wheel").on("click",wheelHandleFollow);$(".button.unfollow.wheel").on("click",wheelHandleFollow)}$.server_response(window.server_response);$.server_errors(window.server_errors);withGeoData(function(t){t&&isCAUS(t)&&$(".ca-us-only").removeClass("ca-us-only")})});$.server_errors=function(t){for(var e in t)$('*[name="'+t[e].field+'"]').trigger("error",[t[e].message])};$.server_response=function(t){if(t){for(var e in t){var i=$('*[name="'+t[e].name+'"]:not(.doNotPrepopulate)');0!=t[e].error&&i.trigger("error",[t[e].error]);if(i.parents(".cloneable").size()>0){cloneable_field=i.parents(".cloneable:eq(0)");for(var n=0;n<t[e].value.length;n++){cloneable_field.find(".cloneable-item").size()<n+1&&cloneable_field.find(".cloneable-btn-add:eq(0)").trigger("click");cloneable_field.find(".cloneable-item:eq("+n+') *[name="'+t[e].name+'"]').val(t[e].value[n])}}else i.val(t[e].value)}$(".field-box input:text").first().focus()}};$.show_alert=function(t){$.hide_alert();var e=$('<div class="screen"><div class="alert"><div class="inner"><br /><br /><button class="small">Ok</button></div></div></div>');e.find(".alert > .inner").prepend(t);$("body").append(e);e.find("button").on("click",$.hide_alert)};$.show_prompt=function(t,e){$.hide_alert();var i=$('<div class="screen"><div class="alert"><div class="inner"><br /><br /><div class="button primary">Confirm</div> <div class="button cancel">Cancel</div></div></div></div>');i.find(".alert > .inner").prepend(t);$("body").append(i);i.find(".cancel").on("click",$.hide_alert);i.find(".primary").on("click",function(){e();$.hide_alert()})};$.hide_alert=function(){$(".alert").parent(".screen").remove();$(".prompt").parent(".screen").remove()};$.upload=function(t,e,i){function n(t){s.upload.removeEventListener("progress",a,!1);s.upload.removeEventListener("load",n,!1);s.upload.removeEventListener("error",o,!1);s.upload.removeEventListener("abort",r,!1);i.trigger("fileUploadComplete")}function a(t){if(t.lengthComputable){var e=Math.round(t.loaded/t.total*100);i.trigger("fileUploadProgress",[e])}}function o(t){i.trigger("fileUploadError",[s.status])}function r(t){i.trigger("fileUploadAbort")}var s=new XMLHttpRequest;s.open("post",e,!0);s.setRequestHeader("Content-Type","multipart/form-data");s.setRequestHeader("X-File-Name",t.name);s.setRequestHeader("X-File-Size",t.size);s.setRequestHeader("X-File-Type",t.type);s.send(t);s.upload.addEventListener("progress",a,!1);s.upload.addEventListener("load",n,!1);s.upload.addEventListener("error",o,!1);s.upload.addEventListener("abort",r,!1)};$.keygen=function(t,e){null==e&&(e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");null==t&&(t=12);for(var i="",n=t;n>0;--n)i+=e[Math.floor(Math.random()*e.length)];return i};$.input_errors=function(t,e){var i={scroll_to_error:!0},e=$.extend(i,e),n=[];t.find(".cloneable-item:visible").each(function(){var t=[],e=$(this).find(".validate-notempty"),i=$(this).closest(".cloneable").find(".cloneable-item").size();if(e.size()>0){e.each(function(){""==$(this).find("input, textarea").val()&&t.push($(this))});t.length==e.size()&&i>1&&$(this).find(".cloneable-btn-del").trigger("click")}});t.find(".validate-notempty:visible, .validate-email:visible").each(function(){$(this).trigger("clear-error")});t.find(".validate-notempty:visible").each(function(){if($(this).find("input:checkbox").size()>0||$(this).find("input:radio").size()>0){if(0==$(this).find("input:checked").size()){$(this).trigger("error",["Select an option"]);n.push($(this))}}else{var t=$(this).find("input, textarea"),e=$(this);t.each(function(){if(""==$.trim($(this).val())&&$(this).parent().not(".ql-tooltip").length>0){var t="This field cannot be empty.",i=e.find("label").text();void 0!==i&&""!==i&&(t="Enter "+i+".");e.trigger("error",[t]);n.push(e)}})}});t.find(".validate-max-file-size:visible").each(function(){if($(this).find('input[type="file"]').length>0){var t=$(this).find('input[type="file"]');if(window.File&&window.FileReader&&window.FileList&&window.Blob&&void 0!==t[0].files[0]&&null!==t[0].files[0]){if(t[0].files[0].size>5242880){$(this).trigger("error",["Maximum image size is 5 MB."]);n.push($(this))}}}});t.find(".validate-required-attribute:visible").each(function(){var t=$(this).attr("data-required-attribute");if(void 0!==t){if(void 0!==$(this).attr(t)&&!($(this).find("input").val().length>0)){$(this).trigger("error",["This field is required."]);n.push($(this))}}});t.find(".validate-alphanumeric:visible").each(function(){if($(this).find("input").val().length>0&&!$.passedRegex("alphanumeric",$(this).find("input").val())){$(this).trigger("error",["Only letters and numbers are allowed."]);n.push($(this))}});t.find(".validate-limited-punctuation:visible").each(function(){if($(this).find("input").val().length>0&&!$.passedRegex("limited-punctuation",$(this).find("input").val())){$(this).trigger("error",["Only letters, numbers, and limited punctuation (dot, dash, underscore) is allowed."]);n.push($(this))}});t.find(".validate-email:visible").each(function(){if($(this).find("input").val().length>0&&!$.passedRegex("email",$(this).find("input").val())){$(this).trigger("error",["Please provide a valid email address."]);n.push($(this))}});t.find(".validate-url:visible").each(function(){if($(this).find("input").val().length>0&&!$.passedRegex("url",$(this).find("input").val())){$(this).trigger("error",["Please provide a valid web address."]);n.push($(this))}});t.find(".validate-password:visible").each(function(){if($(this).find("input").val().length>0&&!$.passedRegex("password",$(this).find("input").val())){$(this).trigger("error",["Password must be at least 8 characters and contain at least 1 number and 1 letter."]);n.push($(this))}});t.find(".validate-password-sitewide:visible").each(function(){if($(this).find("input").val().length<6){$(this).trigger("error",["Minimum 6 characters."]);n.push($(this))}});t.find(".validate-phone:visible").each(function(){if($(this).find("input").val().length>0&&!$.passedRegex("phone",$(this).find("input").val())){$(this).trigger("error",["Please provide a valid phone number with area code."]);n.push($(this))}});t.find(".validate-zip:visible").each(function(){if($(this).find("input").val().length>0&&!$.passedRegex("zip",$(this).find("input").val())){$(this).trigger("error",["Please provide a valid zip code."]);n.push($(this))}});t.find(".validate-percent:visible").each(function(){if($(this).find("input").val().length>0&&!$.passedRegex("percent",$(this).find("input").val())){$(this).trigger("error",["Please provide a valid percentage."]);n.push($(this))}});t.find(".validate-match:visible").each(function(e){var i=t.find(".validate-match:eq(0)");if(e>0&&$(this).find("input").val()!=i.find("input").val()){$(this).trigger("error",["Fields do not match"]);i.trigger("error",["Fields do not match"]);n.push($(this));n.push(i)}});t.find(".validate-integer:visible").each(function(){if(!$(this).find("input").val().match(/^\d*$/)){$(this).trigger("error",["Whole number is required<br />(no decimals)."]);n.push($(this))}});t.find(".validate-numeric:visible").each(function(){if($(this).find("input").val().length>0&&!$.passedRegex("numeric",$(this).find("input").val())){$(this).trigger("error",["Only numbers are allowed."]);n.push($(this))}});t.find(".validate-min:visible").each(function(){var t=$(this).attr("data-min");if($(this).find("input:checked").size()<t){$(this).trigger("error",["Select at least "+t+" options"]);n.push($(this))}});t.find(".validate-max:visible").each(function(){var t=$(this).attr("data-max");if($(this).find("input:checked").size()>t){$(this).trigger("error",["Exceeded limited of selected options"]);n.push($(this))}});t.find(".validate-count:visible").each(function(){var t=$(this).attr("data-count");if($(this).find("input:checked").size()!=t){$(this).trigger("error",["Select "+t+" options"]);n.push($(this))}});t.find(".validate-required-for:visible").each(function(){var t;t=$(this).closest(".cloneable-item")?$(this).closest(".cloneable-item").find($(this).attr("data-required-for")):$(this).find($(this).attr("data-required-for"));if(""!=t.val()&&""==$(this).find("input, textarea").val()){$(this).trigger("error",["This field is required if "+t.attr("id")+" is entered."]);n.push($(this))}});t.find(".validate-youtube:visible").each(function(){var t=$(this).find("input").val();if(t){var e=this;$.ajax({url:"/advisor-network/api/check-youtube/?video_url="+encodeURI(t),method:"GET",dataType:"json",async:!1,success:function(t,i,a){if(!t.status){$(e).trigger("error",["Enter a valid YouTube URL that allows external embedding."]);n.push($(e))}},error:function(t,i,a){$(e).trigger("error",["Enter a valid YouTube URL that allows external embedding."]);n.push($(e))}})}});if(e.scroll_to_error&&n.length>0){var a=t.find(".error:eq(0)").not(".no-scroll");1==a.length&&$("html, body").animate({scrollTop:a.offset().top-100},1e3)}return n};$.passedRegex=function(t,e){var i;switch(t){case"phone":i=/^\(?\d{3}\)?\.? ?\-?\d{3}\.?\-?\d{4}$/;break;case"alphanumeric":i=/^[a-z0-9]+$/i;break;case"email":i=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,}(?:\.[a-z]{2})?)$/i;break;case"url":i=/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi;break;case"password":i=/^(?=.*[A-Za-z])(?=.*\d).{8,}$/;break;case"zip":i=/(^\d{5}$)|(^\d{5}-\d{4}$)/;break;case"numeric":i=/^\d*\.?\d*$/;break;case"percent":i=/^[0-9][0-9]?$/;break;case"limited-punctuation":i=/^[a-zA-Z 0-9\._\-]*$/i;break;default:return!1}return i.test(e)};$.urlParam=function(t){return $.urlParams()[t]};$.urlParams=function(t){var e,i={},n=window.location.href;null!=t&&(n=t);for(var a=n.slice(n.indexOf("?")+1).split("&"),o=0;o<a.length;o++){e=a[o].split("=");i[e[0]]=e[1]}return i};$.fn.querystringDropdown=function(t){var e={do_scroll:!0},t=$.extend(e,t);return this.each(function(){function e(t,e){t.each(function(){var t=$(this).attr("href").split("&pos=");null==e&&(e=$(window).scrollTop());t=t[0]+"&pos="+e;$(this).attr("href",t)})}var i=$(this);window.location.href.split("?")[1];if(1==t.do_scroll){$(window).on("scroll",function(){e(i.find("a"))});e(i.find("a"),$.urlParam("pos"));!function(t){null!=t&&$("html, body").animate({scrollTop:t+"px"},1)}($.urlParam("pos"))}var n=i.find("a:eq("+function(){var t=0,e=$.urlParams();i.find("a").each(function(i){var n=$.urlParams($(this).attr("href")),a=!0;for(var o in n)n[o]!=e[o]&&(a=!1);1==a&&(t=i)});return t}()+")");i.find("li").removeClass("selected");i.find("> .title").text(n.text());n.addClass("selected")})};$.fn.filmstrip=function(t){var e={};e.speed=400;var t=$.extend(e,t);return this.each(function(){function e(){var e=n("fwd");e&&o.find(".slides").stop().animate({scrollLeft:e},t.speed)}function i(){var e=n("rwd");e&&o.find(".slides").stop().animate({scrollLeft:e},t.speed)}function n(t){var e=!1,i=o.find(".slides");o.find(".slides > li:visible").each(function(){if("fwd"==t&&Math.floor($(this).position().left+$(this).width())>o.width()){e=i.scrollLeft()+$(this).position().left;return!1}if("rwd"==t){if(0==Math.floor($(this).position().left)){e=i.scrollLeft()+$(this).position().left-i.width();return!1}if(Math.floor($(this).position().left)>=0){e=i.scrollLeft()+$(this).prev().position().left-i.width();return!1}}});return e}function a(){var t=o.find(".slides")[0],e=$(".slides > *:last-child")[0];if(e.offsetLeft+$(e).outerWidth()>$(t).outerWidth()){o.find("> .btn.next").removeClass("hidden");o.find("> .btn.prev").removeClass("hidden")}else{o.find("> .btn.next").addClass("hidden");o.find("> .btn.prev").addClass("hidden")}}var o=$(this);a();$(window).off("resize.filmstrip").on("resize.filmstrip",a);o.find("> .btn.next").off("click.filmstrip").on("click.filmstrip",e);o.find("> .btn.prev").off("click.filmstrip").on("click.filmstrip",i)})};$.fn.modal=function(t){var e={hijackScroll:this},t=$.extend(e,t);return this.each(function(){function e(){n.closest(".screen").removeClass("hidden");if(t.hijackScroll.length>0){$("body").css({overflow:"hidden"});$("header, body > .page").css({overflow:"scroll"});$(document).on("touchmove.modal",function(t){t.target==$(".screen")[0]&&t.preventDefault()});t.hijackScroll.on("touchmove.modal",function(t){var e=$(this).scrollTop(),i=$(this)[0].scrollHeight-$(this)[0].offsetHeight;if(e<1){$(this).scrollTop(1);t.preventDefault()}if(e>i){$(this).scrollTop(i);t.preventDefault()}})}}function i(e){if(t.hijackScroll.length>0){$("body").css({overflow:""});$("header, body > .page").css({overflow:""});$(document).off("touchmove.modal");t.hijackScroll.off("touchmove.modal")}n.closest(".screen").remove()}var n=$(this);n.closest(".screen").on("click",i);n.on("click",function(t){t.stopPropagation()});n.find(".modal-close").on("click",i);n.on("open",e);n.on("close",i);$(document).on("jwplayer-initial-setup",function(t,e){e.on("play",function(){n.closest(".screen").is(".hidden")&&e.stop()})})})};$.fn.dropmenu=function(t){var e={};e.all_selector=".dropmenu";var t=$.extend(e,t);return this.each(function(){var e=$(this);$("html").off("click.dropmenu").on("click.dropmenu",function(){$(t.all_selector).removeClass("open")});e.on("click.dropmenu",function(i){i.stopPropagation();$(t.all_selector).not(e).removeClass("open");e.toggleClass("open")})})};$.fn.charcounter=function(t){var e={},t=$.extend(e,t);return this.each(function(){var t=$(this),e=(t.parents(".field-box:eq(0)"),t.prev("textarea"));if(e.size()>0){var i=e.attr("maxlength");e.on("keyup blur",function(e){var n=$(this).val(),a=i-$(this).val().length;t.text(a);if(n.length>=i){$(this).val(n.substring(0,n.length));t.addClass("warning")}else t.removeClass("warning")});e.trigger("keyup")}})};$.fn.fieldbox=function(t){var e={},t=$.extend(e,t);return this.each(function(){var t=$(this);t.find("input, select").on("keydown change",function(){t.removeClass("error")});0==$(this).find(".field-alert").size()&&$(this).append('<div class="field-alert"><div class="msg"></div></div>');t.on("error",function(t,e){$(this).addClass("error");$(this).find(".msg").html(e)});t.on("clear-error",function(t){$(this).removeClass("error");$(this).find(".msg").html("")})})};$.fn.emailfield=function(t){var e={},t=$.extend(e,t);return this.each(function(){$(this).off("blur").on("blur",function(){var t=$(this).parents(".field-box:eq(0)");$(this).val().length>0&&!$.passedRegex("email",$(this).val())?t.trigger("error",["Not a valid email address."]):$(this).hasClass(".validate-notempty")&&""!=$(this).val()&&t.trigger("clear-error")})})};$.fn.tabset=function(t){var e={};e.panel=".tabpanel";e.autoTrigger=!0;var t=$.extend(e,t);return this.each(function(){function e(t){t.preventDefault();a.find("> li").removeClass("selected");$(this).parent().addClass("selected");n($($(this).attr("href")));a.trigger("select",[$(this)])}function i(){$(t.panel).hide()}function n(t){i();t.show()}var a=$(this);a.find("> li:not(.link) > a").on("click",e);0==a.find("> li.selected").size()&&1==t.autoTrigger?a.find("> li:first > a").trigger("click"):a.find("> li.selected > a").trigger("click")})};$.fn.cloneable=function(t){var e={limit:null},t=$.extend(e,t);return this.each(function(){function e(){var e=o.clone();e.find('input[type="text"]').val("");e.find(".field-box.error").removeClass("error");e.find(".field-box").fieldbox();a.append(e);null!=t.limit&&a.find(".cloneable-item").size()==t.limit&&a.addClass("limit");e.find("input, select, button, textarea").eq(0).focus();n()}function i(){var e=$(this).parents(".cloneable-item:eq(0)");e.next().find("input, select, button, textarea").eq(0).focus();e.remove();a.find(".cloneable-item").size()<t.limit&&a.removeClass("limit");n()}function n(){a.find(".cloneable-item").size()>1?a.addClass("many"):a.removeClass("many")}var a=$(this),o=a.find(".cloneable-item");a.attr("data-limit")&&(t.limit=a.attr("data-limit"));a.delegate(".cloneable-btn-add","click",e);a.delegate(".cloneable-btn-del","click",i)})};$.fn.checkbox=function(t){var e={},t=$.extend(e,t);return this.each(function(){function t(){e.prop("checked")?i.addClass("checked"):i.removeClass("checked")}var e=$(this),i=$('<div class="checkbox-skin"></div>');if(!(e.siblings(".checkbox-skin").size()>0)){e.off("change.skin").on("change.skin",t);e.off("update.skin").on("update.skin",t);e.off("DOMAttrModified.skin").on("DOMAttrModified.skin",t);e.off("focus.skin").on("focus.skin",function(){i.addClass("focus")});e.off("blur.skin").on("blur.skin",function(){i.removeClass("focus")});e.off("keyup.skin").on("keyup.skin",t);i.off("click.skin").on("click.skin",function(){0==e.parents("label").size()&&e.trigger("click")});i.insertAfter(e);e.css({position:"absolute",left:"-999px"});t()}})};$.fn.validateInteger=function(t){var e={},t=$.extend(e,t);return this.each(function(){var t=$(this);t.find('input[type="number"], input[type="text"]').on("keyup blur",function(){$(this).val()%1!=0?t.trigger("error",["Whole number is required<br />(no decimals)."]):t.removeClass("error")})})};$.fn.validateMax=function(t){var e={},t=$.extend(e,t);return this.each(function(){var t=$(this),e=t.attr("data-max");t.find('input[type="checkbox"]').on("change",function(){if(t.find("input:checked").size()==e){t.find("input").not(":checked").attr("disabled","disabled");t.find("input").not(":checked").parent().addClass("disabled")}else{t.find("input").removeAttr("disabled");t.find("input").parent().removeClass("disabled")}})})};$.fn.validateMatch=function(t){var e={},t=$.extend(e,t),i=$(this[0]);return this.each(function(t){var e=$(this);t>0&&e.on("change",function(){if(e.find("input").val()!=i.find("input").val()){e.trigger("error",["Fields do not match"]);i.trigger("error",["Fields do not match"])}else{e.removeClass("error");i.removeClass("error")}})})};$.fn.checkAll=function(t){var e={};e.slaves=null;e.checked=null;var t=$.extend(e,t);return this.each(function(e){function i(){t.slaves.size()==t.slaves.filter(":checked").size()?a.prop("checked",!0).trigger("update.skin"):a.prop("checked",!1).trigger("update.skin")}function n(){t.slaves.each(function(){a.is(":checked")?$(this).prop("checked",!0).trigger("update.skin"):$(this).prop("checked",!1).trigger("update.skin")})}var a=$(this);if(null!=t.slaves){a.off("change.checkAll").on("change.checkAll",n);t.slaves.off("change.checkAll").on("change.checkAll",i);1==t.checked&&a.prop("checked",!0).trigger("change");0==t.checked&&a.prop("checked",!1).trigger("change")}else console.log("checkAll Error: No targets assigned!")})};$.fn.filterResults=function(t){var e={};e.submit_delay=1;e.exclude=null;var t=$.extend(e,t);return this.each(function(e,i){function n(){var e=$(this);a=[];r.find('input[type="checkbox"]').not(t.exclude).each(function(){1==$(this).prop("checked")&&a.push($(this).val())});r.trigger("beforeQuery");clearTimeout(o);o=setTimeout(function(){r.trigger("query",[a,e])},1e3*t.submit_delay)}var a,o,r=$(this);$(this).find('input[type="checkbox"]').on("change",n);n()})};$.fn.pixelTrackLink=function(t){var e={onClickSelector:"a"},t=$.extend(e,t);return this.each(function(e,i){var n=$(i).data("pixel-src");void 0!==n&&$(i).find(t.onClickSelector).on("click",function(t){var e=this;if(e.hasAttribute("target"))$('<img src="'+n+'">').load(function(){$(this).width(1).height(1).appendTo(".page")});else{t.preventDefault();$('<img src="'+n+'">').load(function(){$(this).width(1).height(1).appendTo(".page");window.location=e.href})}})})};$.fn.validate=function(t){var e={};e.rules;e.zIndex=110;e.pattern;e.msg;e.field;e.show_message=!0;var t=$.extend(e,t);return this.each(function(){var e,n,a=$(this),o="";if(!a.hasClass("form-hidden")){e=null!=t.field?a.find(t.field).val():a.val();for(i in t.rules){switch(t.rules[i].type){
case"notempty":""==e.replace(/\s/g,"")&&(o="This field cannot be empty.");break;case"dropdownlistindexgreaterthan0":a.find("option:selected").index()<=0&&(o="Please select a value from the dropdownlist.");break;case"dropdownliststringisnot":a.find("option:selected").text()==t.rules[i].string&&(o="Please select a different value - "+t.rules[i].string+" is not valid.");break;case"email":pattern=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;1!=pattern.test(String(e))&&(o="Please enter a valid email address.");case"emaillength":e.length>128&&(o="The email address is too long.");break;case"phone":pattern=/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/;1!=pattern.test(String(e))&&(o="Please enter a number in the format:<br />(xxx) xxx-xxxx.");break;case"post":pattern=/(^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$)|(^\d{5}(-\d{4})?$)/i;1!=pattern.test(String(e))&&(o="Please provide a valid zip / post code.");break;case"alphanum":pattern=/^[a-z0-9-_]+$/i;1!=pattern.test(String(e))&&(o="Only letters, numbers, underscores( _ ) and dashes( - ) are allowed.");break;case"atleastone":a.find("input:checked").size()<1&&(o="At least one item must be checked.");break;case"between":(String(e).length<t.rules[i].from||String(e).length>t.rules[i].to)&&(o="Must be "+t.rules[i].from+" to "+t.rules[i].to+" characters in length.");break;case"minimum":parseInt(e,"10")<t.rules[i].min&&(o="A value of "+t.rules[i].min+" or more is required.");break;case"minimumlength":String(e).length<t.rules[i].min&&(o="A length of "+t.rules[i].min+" or more is required.");break;case"maximumlength":String(e).length>t.rules[i].max&&(o="A length of "+t.rules[i].max+" or less is required.");break;case"numeric":e=e.replace(/,/g,"");e=e.replace(/\$/g,"");isNaN(e)&&(o="Value must be numeric.");break;case"notzero":0==e&&(o="Value must be greater or less than 0");break;case"greaterthanzero":e=e.replace(/,/g,"");e<=0&&(o="Value must be greater than 0");break;case"match":String(e)!=String(t.rules[i].matchval)&&(o="password"==a.attr("type").toLowerCase()?"Must match associated field.":"Must match <br />( "+String(t.rules[i].matchval)+" ).");break;case"regex":pattern=t.pattern;1!=pattern.test(String(e))&&(o=t.rules[i].msg)}if(""!=o)break}""!=o&&t.rules[i].msg&&(o=t.rules[i].msg);var r=a.parents(".msg-validate");if(r.size()>0){a.removeClass("warning");a.insertBefore(r);r.remove()}if(""!=o){var s="";s+='<a class="tooltip msg-validate">';s+="<div></div>";s+='\t<span class="content" style="display: none">';s+="\t\t"+o+"<br />";s+='\t\t<span class="pointer"></span>';s+="\t</span>";s+="</a>";if(1==t.show_message){a.is("select")&&a.prev().is(".selectmenu")&&(a=a.prev(".selectmenu"));a.addClass("warning");a.wrap($(s));var l=a.parents(".tooltip"),h=l.find(".content");a.bind("focus",function(){h.show()});a.bind("blur",function(){h.hide()})}n=!1}else n=!0;null!=t.onComplete&&t.onComplete(n,a)}})};$.fn.stickyfill=function(t){var e={};e.pageTop=0;e.additionalOffsets=[];var t=$.extend(e,t);return this.each(function(){function e(){var e=i.outerHeight(),a=t.pageTop,o=$(window)[0].pageYOffset+t.pageTop,r=n.offset().top,s=r+n.outerHeight(),l=s-e,h=0-r;for(j=0;j<t.additionalOffsets.length;j++)h+=$(t.additionalOffsets[j]).outerHeight();o>=r?o>l?i.css({position:"absolute",top:l+h+"px"}):i.css({position:"fixed",top:a+"px"}):i.css({position:"",top:""})}var i=$(this),n=i.parent();$(window).on("scroll.sticky resize.sticky",e);e()})};$.fn.watchlistTicker=function(t){var e={};e.title="<strong>Add To</strong> Watchlist";e.symbols=[];e.symbolsData={};var t=$.extend(e,t);for(var i in t.symbols)t.symbols[i]=t.symbols[i].toUpperCase();return this.each(function(i){function n(t,e){if(null===e||"Success"==e.Outcome){var i="";i+='<div class="ticker" data-symbol="'+t+'">';i+='  <div class="name"></div>';i+='  <div class="info">';i+='    <div class="symbol">'+t+"</div>";i+='    <div class="value"></div>';i+='    <div class="change"></div>';i+="  </div>";i+='  <div class="chart"></div>';i+='  <div class="action"><div class="inv-icon-star"></div></div>';i+="</div>";var n=$(i);r.append(n);n.on("click",function(e){e.preventDefault();e.stopPropagation();document.location.href="/"+baseMarketsURL+"/stocks/"+t+"/"});n.on("click",".action",function(t){var e=$(this).closest(".ticker").attr("data-symbol");t.preventDefault();t.stopPropagation();investopedia.helper.authentication.authorizeAction(investopedia.component.InvDialog.addSymbol.showDialog,e,{login_title:investopedia.markets.LOGIN_TITLE_ADD_SYMBOL,registration_title:investopedia.markets.REGISTRATION_TITLE_ADD_SYMBOL,extended_disclaimer:investopedia.markets.REGISTRATION_EXTENDED_DISCLAIMER_TEXT})});if(null===e)xignite.getLatestMarketOpenDateForSymbol(t).done(function(e){a(n,t,e)}).fail(function(e){o(t)});else{marketOpenDate=new Date(e.marketOpenDate).getTime();a(n,t,marketOpenDate)}}}function a(t,e,i){new TickerChart(t.find(".chart"),e,0,i).element.on("removeItem",function(t,e){o(e)});investopedia.helper.authentication.isUserLoggedIn()&&s.searchPortfoliosBySymbol({success:function(t,i,n){t&&t.data.length>0&&r.find('[data-symbol="'+e+'"] .action').addClass("added")},error:function(t,e,i){}},e)}function o(t){r.find('[data-symbol="'+t+'"]').remove();if(0==r.find(".ticker").length){r.closest("aside.watchlist").remove();r.closest(".tooltip.ticker").remove()}}var r=$(this),s=new PortfolioManagerService;r.html('<a href="/markets/watchlist"><div class="tickers-title">'+t.title+"</div></a>");for(var i in t.symbols)void 0!==e.symbolsData[t.symbols[i]]?n(t.symbols[i],e.symbolsData[t.symbols[i]]):n(t.symbols[i],null);xignite.quote(t.symbols).done(function(t){for(var e in t)if("Success"===t[e].Outcome){var i=r.find('[data-symbol="'+t[e].Identifier+'"]');i.find(".name").text(t[e].Name);i.find(".value").text(numberSmartFormat(t[e].Last,2));i.find(".change").html(formatValuePlusMinus(numberSmartFormat(t[e].PercentChange,2),"%"))}else o(t[e].Identifier)})})};$.fn.addTableData=function(t,e){if(this.is("table")&&t&&e){for(var i=this,n=i.find("tr:eq(0) th"),a=$(this).attr("data-id"),o="",r=0;r<t.length;r++){o+=a?"<tr identifier="+t[r][a]+">":"<tr>";n.each(function(){var i=$(this).attr("data-id"),n=$(this).attr("data-subid"),a=$(this).attr("class");o+=e(t[r],i,n,a)});o+="</tr>"}i.append(o)}};$.fn.displayTableDataError=function(t,e){if(this.is("table")){var i='<tr><td align="center" colspan="'+e+'">'+t+"</td></tr>";this.find("tr:gt(0)").remove();this.append(i)}};var geoData=geoData||null,Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,i,n,a,o,r,s,l="",h=0;t=Base64._utf8_encode(t);for(;h<t.length;){e=t.charCodeAt(h++);i=t.charCodeAt(h++);n=t.charCodeAt(h++);a=e>>2;o=(3&e)<<4|i>>4;r=(15&i)<<2|n>>6;s=63&n;isNaN(i)?r=s=64:isNaN(n)&&(s=64);l=l+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(s)}return l},decode:function(t){var e,i,n,a,o,r,s,l="",h=0;t=t.replace(/[^A-Za-z0-9+\/=]/g,"");for(;h<t.length;){a=this._keyStr.indexOf(t.charAt(h++));o=this._keyStr.indexOf(t.charAt(h++));r=this._keyStr.indexOf(t.charAt(h++));s=this._keyStr.indexOf(t.charAt(h++));e=a<<2|o>>4;i=(15&o)<<4|r>>2;n=(3&r)<<6|s;l+=String.fromCharCode(e);64!=r&&(l+=String.fromCharCode(i));64!=s&&(l+=String.fromCharCode(n))}l=Base64._utf8_decode(l);return l},_utf8_encode:function(t){t=t.replace(/rn/g,"n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n<128)e+=String.fromCharCode(n);else if(n>127&&n<2048){e+=String.fromCharCode(n>>6|192);e+=String.fromCharCode(63&n|128)}else{e+=String.fromCharCode(n>>12|224);e+=String.fromCharCode(n>>6&63|128);e+=String.fromCharCode(63&n|128)}}return e},_utf8_decode:function(t){for(var e="",i=0,n=c1=c2=0;i<t.length;){n=t.charCodeAt(i);if(n<128){e+=String.fromCharCode(n);i++}else if(n>191&&n<224){c2=t.charCodeAt(i+1);e+=String.fromCharCode((31&n)<<6|63&c2);i+=2}else{c2=t.charCodeAt(i+1);c3=t.charCodeAt(i+2);e+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3);i+=3}}return e}},Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,i,n,a,o,r,s,l="",h=0;t=Base64._utf8_encode(t);for(;h<t.length;){e=t.charCodeAt(h++);i=t.charCodeAt(h++);n=t.charCodeAt(h++);a=e>>2;o=(3&e)<<4|i>>4;r=(15&i)<<2|n>>6;s=63&n;isNaN(i)?r=s=64:isNaN(n)&&(s=64);l=l+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(s)}return l},decode:function(t){var e,i,n,a,o,r,s,l="",h=0;t=t.replace(/[^A-Za-z0-9+\/=]/g,"");for(;h<t.length;){a=this._keyStr.indexOf(t.charAt(h++));o=this._keyStr.indexOf(t.charAt(h++));r=this._keyStr.indexOf(t.charAt(h++));s=this._keyStr.indexOf(t.charAt(h++));e=a<<2|o>>4;i=(15&o)<<4|r>>2;n=(3&r)<<6|s;l+=String.fromCharCode(e);64!=r&&(l+=String.fromCharCode(i));64!=s&&(l+=String.fromCharCode(n))}l=Base64._utf8_decode(l);return l},_utf8_encode:function(t){t=t.replace(/rn/g,"n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n<128)e+=String.fromCharCode(n);else if(n>127&&n<2048){e+=String.fromCharCode(n>>6|192);e+=String.fromCharCode(63&n|128)}else{e+=String.fromCharCode(n>>12|224);e+=String.fromCharCode(n>>6&63|128);e+=String.fromCharCode(63&n|128)}}return e},_utf8_decode:function(t){for(var e="",i=0,n=c1=c2=0;i<t.length;){n=t.charCodeAt(i);if(n<128){e+=String.fromCharCode(n);i++}else if(n>191&&n<224){c2=t.charCodeAt(i+1);e+=String.fromCharCode((31&n)<<6|63&c2);i+=2}else{c2=t.charCodeAt(i+1);c3=t.charCodeAt(i+2);e+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3);i+=3}}return e}},recentlyViewedStocks=function(){this.recentlyViewed=null;this.expire=Date.now()-15552e6;this.localStorageKey="invRecentlyViewedStocks"};recentlyViewedStocks.prototype.get=function(){if(null!=this.recentlyViewed)return Object.keys(this.recentlyViewed);var t=localStorage.getItem(this.localStorageKey);if(null!=t){t=JSON.parse(Base64.decode(t));this.recentlyViewed=this.sort(t);return Object.keys(this.recentlyViewed)}return null};recentlyViewedStocks.prototype.set=function(t){null==this.recentlyViewed&&this.get();null==this.recentlyViewed&&(this.recentlyViewed={});this.recentlyViewed[t]=Date.now();this.recentlyViewed=this.sort(this.recentlyViewed);this.save()};recentlyViewedStocks.prototype.sort=function(t){if(Object.keys(t).length<=1)return t;var e=[];for(var i in t)t[i]>this.expire&&e.push([i,t[i]]);e.sort(function(t,e){return e[1]-t[1]});var n={};for(var i in e)n[e[i][0]]=e[i][1];return n};recentlyViewedStocks.prototype.remove=function(t){null!==t&&void 0!==t&&null!==this.recentlyViewed&&void 0!==this.recentlyViewed[t]&&delete this.recentlyViewed[t];this.save()};recentlyViewedStocks.prototype.save=function(){var t=Base64.encode(JSON.stringify(this.recentlyViewed));try{localStorage.setItem(this.localStorageKey,t)}catch(t){if(22!==t.code)throw t;console.warn("Local storage exceeded quota",t)}};$("body").on("user-login",function(){updateHeaderUserMenu()});var invEscapeHtml=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return function(e){return newString=String(e).replace(/[&<>"'`=\/]/g,function(e){return t[e]})}}();!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t,e){function i(){return new Date(Date.UTC.apply(Date,arguments))}function n(){var t=new Date;return i(t.getFullYear(),t.getMonth(),t.getDate())}function a(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function o(t){return function(){return this[t].apply(this,arguments)}}function r(t){return t&&!isNaN(t.getTime())}function s(e,i){function n(t,e){return e.toLowerCase()}var a,o=t(e).data(),r={},s=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var l in o)if(i.test(l)){a=l.replace(s,n);r[a]=o[l]}return r}function l(e){var i={};if(!m[e]){e=e.split("-")[0];if(!m[e])return}var n=m[e];t.each(g,function(t,e){e in n&&(i[e]=n[e])});return i}var h=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),i=0,n=this.length;i<n;i++)if(this[i].valueOf()===e)return i;return-1},remove:function(t){this.splice(t,1)},replace:function(e){if(e){t.isArray(e)||(e=[e]);this.clear();this.push.apply(this,e)}},clear:function(){this.length=0},copy:function(){var t=new h;t.replace(this);return t}};return function(){var i=[];i.push.apply(i,arguments);t.extend(i,e);return i}}(),c=function(e,i){t(e).data("datepicker",this);this._process_options(i);this.dates=new h;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=t(e);this.isInput=this.element.is("input");this.inputField=this.isInput?this.element:this.element.find("input");this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn");this.hasInput=this.component&&this.inputField.length;this.component&&0===this.component.length&&(this.component=!1);this.isInline=!this.component&&this.element.is("div");this.picker=t(v.template);this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow);this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");this.o.rtl&&this.picker.addClass("datepicker-rtl");this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(t,e){return parseInt(e)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted);this.setDatesDisabled(this.o.datesDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()};c.prototype={constructor:c,_resolveViewName:function(t,i){return 0===t||"days"===t||"month"===t?0:1===t||"months"===t||"year"===t?1:2===t||"years"===t||"decade"===t?2:3===t||"decades"===t||"century"===t?3:4===t||"centuries"===t||"millennium"===t?4:i!==e&&i},_check_template:function(i){try{if(i===e||""===i)return!1;if((i.match(/[<>]/g)||[]).length<=0)return!0;return t(i).length>0}catch(t){return!1}},_process_options:function(e){this._o=t.extend({},this._o,e);var a=this.o=t.extend({},this._o),o=a.language;if(!m[o]){o=o.split("-")[0];m[o]||(o=f.language)}a.language=o;a.startView=this._resolveViewName(a.startView,0);a.minViewMode=this._resolveViewName(a.minViewMode,0);a.maxViewMode=this._resolveViewName(a.maxViewMode,4);a.startView=Math.min(a.startView,a.maxViewMode);a.startView=Math.max(a.startView,a.minViewMode);if(!0!==a.multidate){a.multidate=Number(a.multidate)||!1;!1!==a.multidate&&(a.multidate=Math.max(0,a.multidate))}a.multidateSeparator=String(a.multidateSeparator);a.weekStart%=7;a.weekEnd=(a.weekStart+6)%7;var r=v.parseFormat(a.format);a.startDate!==-1/0&&(a.startDate?a.startDate instanceof Date?a.startDate=this._local_to_utc(this._zero_time(a.startDate)):a.startDate=v.parseDate(a.startDate,r,a.language,a.assumeNearbyYear):a.startDate=-1/0);a.endDate!==1/0&&(a.endDate?a.endDate instanceof Date?a.endDate=this._local_to_utc(this._zero_time(a.endDate)):a.endDate=v.parseDate(a.endDate,r,a.language,a.assumeNearbyYear):a.endDate=1/0);a.daysOfWeekDisabled=a.daysOfWeekDisabled||[];t.isArray(a.daysOfWeekDisabled)||(a.daysOfWeekDisabled=a.daysOfWeekDisabled.split(/[,\s]*/));a.daysOfWeekDisabled=t.map(a.daysOfWeekDisabled,function(t){return parseInt(t,10)});a.daysOfWeekHighlighted=a.daysOfWeekHighlighted||[];t.isArray(a.daysOfWeekHighlighted)||(a.daysOfWeekHighlighted=a.daysOfWeekHighlighted.split(/[,\s]*/));a.daysOfWeekHighlighted=t.map(a.daysOfWeekHighlighted,function(t){return parseInt(t,10)});a.datesDisabled=a.datesDisabled||[];t.isArray(a.datesDisabled)||(a.datesDisabled=[a.datesDisabled]);a.datesDisabled=t.map(a.datesDisabled,function(t){return v.parseDate(t,r,a.language,a.assumeNearbyYear)});var s=String(a.orientation).toLowerCase().split(/\s+/g),l=a.orientation.toLowerCase();s=t.grep(s,function(t){return/^auto|left|right|top|bottom$/.test(t)});a.orientation={x:"auto",y:"auto"};if(l&&"auto"!==l)if(1===s.length)switch(s[0]){case"top":case"bottom":a.orientation.y=s[0];break;case"left":case"right":a.orientation.x=s[0]}else{l=t.grep(s,function(t){return/^left|right$/.test(t)});a.orientation.x=l[0]||"auto";l=t.grep(s,function(t){return/^top|bottom$/.test(t)});a.orientation.y=l[0]||"auto"}else;if(a.defaultViewDate){var h=a.defaultViewDate.year||(new Date).getFullYear(),c=a.defaultViewDate.month||0,d=a.defaultViewDate.day||1;a.defaultViewDate=i(h,c,d)}else a.defaultViewDate=n()},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var i,n,a,o=0;o<t.length;o++){i=t[o][0];if(2===t[o].length){n=e;a=t[o][1]}else if(3===t[o].length){n=t[o][1];a=t[o][2]}i.on(a,n)}},_unapplyEvents:function(t){for(var i,n,a,o=0;o<t.length;o++){i=t[o][0];if(2===t[o].length){a=e;n=t[o][1]}else if(3===t[o].length){a=t[o][1];n=t[o][2]}i.off(n,a)}},_buildEvents:function(){var e={keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this),paste:t.proxy(this.paste,this)};!0===this.o.showOnFocus&&(e.focus=t.proxy(this.show,this));this.isInput?this._events=[[this.element,e]]:this.component&&this.hasInput?this._events=[[this.inputField,e],[this.component,{click:t.proxy(this.show,this)}]]:this._events=[[this.element,{click:t.proxy(this.show,this),keydown:t.proxy(this.keydown,this)}]];this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]);this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":t.proxy(function(t){this.update(t.date)},this)}]);this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var n=i||this.dates.get(-1),a=this._utc_to_local(n);this.element.trigger({type:e,date:a,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){if(0===arguments.length){t=this.dates.length-1;e=this.o.format}else if("string"==typeof t){e=t;t=this.dates.length-1}e=e||this.o.format;var i=this.dates.get(t);return v.formatDate(i,e,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly)){this.isInline||this.picker.appendTo(this.o.container);this.place();this.picker.show();this._attachSecondaryEvents();this._trigger("show");(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur();return this}},hide:function(){if(this.isInline||!this.picker.is(":visible"))return this;this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();this.o.forceParse&&this.inputField.val()&&this.setValue();this._trigger("hide");return this},destroy:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;this.isInput||delete this.element.data().date;return this},paste:function(e){var i;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==t.inArray("text/plain",e.originalEvent.clipboardData.types))i=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;i=window.clipboardData.getData("Text")}this.setDate(i);this.update();e.preventDefault()},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return void 0!==t?new Date(t):null},clearDates:function(){this.inputField&&this.inputField.val("");this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e);this._trigger("changeDate");this.setValue();return this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t.map(e,this._utc_to_local));this._trigger("changeDate");this.setValue();return this},setDate:o("setDates"),setUTCDate:o("setUTCDates"),remove:o("destroy"),setValue:function(){var t=this.getFormattedDate();this.inputField.val(t);return this},getFormattedDate:function(i){i===e&&(i=this.o.format);var n=this.o.language;return t.map(this.dates,function(t){return v.formatDate(t,i,n)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){this._process_options({startDate:t});this.update();this.updateNavArrows();return this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){this._process_options({endDate:t});this.update();this.updateNavArrows();return this},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t});this.update();this.updateNavArrows();return this},setDaysOfWeekHighlighted:function(t){this._process_options({daysOfWeekHighlighted:t});this.update();return this},setDatesDisabled:function(t){this._process_options({datesDisabled:t});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),i=this.picker.outerHeight(),n=t(this.o.container),a=n.width(),o="body"===this.o.container?t(document).scrollTop():n.scrollTop(),r=n.offset(),s=[];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!==e&&0!==e&&s.push(parseInt(e))});var l=Math.max.apply(Math,s)+this.o.zIndexOffset,h=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),u=h.left-r.left,p=h.top-r.top;"body"!==this.o.container&&(p+=o);this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");if("auto"!==this.o.orientation.x){this.picker.addClass("datepicker-orient-"+this.o.orientation.x);"right"===this.o.orientation.x&&(u-=e-d)}else if(h.left<0){this.picker.addClass("datepicker-orient-left");u-=h.left-10}else if(u+e>a){this.picker.addClass("datepicker-orient-right");u+=d-e}else this.picker.addClass("datepicker-orient-left");var f,g=this.o.orientation.y;if("auto"===g){f=-o+p-i;g=f<0?"bottom":"top"}this.picker.addClass("datepicker-orient-"+g);"top"===g?p-=i+parseInt(this.picker.css("padding-top")):p+=c;if(this.o.rtl){var m=a-(u+d);this.picker.css({top:p,right:m,zIndex:l})}else this.picker.css({top:p,left:u,zIndex:l});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),i=[],n=!1;if(arguments.length){t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e));i.push(e)},this));n=!0}else{i=this.isInput?this.element.val():this.element.data("date")||this.inputField.val();i=i&&this.o.multidate?i.split(this.o.multidateSeparator):[i];delete this.element.data().date}i=t.map(i,t.proxy(function(t){return v.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)},this));i=t.grep(i,t.proxy(function(t){return!this.dateWithinRange(t)||!t},this),!0);this.dates.replace(i);this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate;n?this.setValue():i.length&&String(e)!==String(this.dates)&&this._trigger("changeDate");!this.dates.length&&e.length&&this._trigger("clearDate");this.fill();this.element.change();return this},fillDow:function(){var e=this.o.weekStart,i="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(t,e){return parseInt(e)+1});i+='<th class="cw">&#160;</th>'}for(;e<this.o.weekStart+7;){i+='<th class="dow';t.inArray(e,this.o.daysOfWeekDisabled)>-1&&(i+=" disabled");i+='">'+m[this.o.language].daysMin[e++%7]+"</th>"}i+="</tr>";this.picker.find(".datepicker-days thead").append(i)},fillMonths:function(){for(var t=this._utc_to_local(this.viewDate),e="",i=0;i<12;){e+='<span class="month'+(t&&t.getMonth()===i?" focused":"")+'">'+m[this.o.language].monthsShort[i++]+"</span>"}this.picker.find(".datepicker-months td").html(e)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range;this.fill()},getClassNames:function(e){var i=[],n=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),o=new Date;e.getUTCFullYear()<n||e.getUTCFullYear()===n&&e.getUTCMonth()<a?i.push("old"):(e.getUTCFullYear()>n||e.getUTCFullYear()===n&&e.getUTCMonth()>a)&&i.push("new");this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&i.push("focused");this.o.todayHighlight&&e.getUTCFullYear()===o.getFullYear()&&e.getUTCMonth()===o.getMonth()&&e.getUTCDate()===o.getDate()&&i.push("today");-1!==this.dates.contains(e)&&i.push("active");this.dateWithinRange(e)||i.push("disabled");this.dateIsDisabled(e)&&i.push("disabled","disabled-date");-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&i.push("highlighted");if(this.range){e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range");-1!==t.inArray(e.valueOf(),this.range)&&i.push("selected");e.valueOf()===this.range[0]&&i.push("range-start");e.valueOf()===this.range[this.range.length-1]&&i.push("range-end")}return i},_fill_yearsView:function(i,n,a,o,r,s,l,h){var c,d,u,p,f,g,m,v,y,b,x;c="";d=this.picker.find(i);u=parseInt(r/a,10)*a;f=parseInt(s/o,10)*o;g=parseInt(l/o,10)*o;p=t.map(this.dates,function(t){return parseInt(t.getUTCFullYear()/o,10)*o});d.find(".datepicker-switch").text(u+"-"+(u+9*o));m=u-o;for(v=-1;v<11;v+=1){y=[n];b=null;-1===v?y.push("old"):10===v&&y.push("new");-1!==t.inArray(m,p)&&y.push("active");(m<f||m>g)&&y.push("disabled");m===this.viewDate.getFullYear()&&y.push("focused");if(h!==t.noop){x=h(new Date(m,0,1));x===e?x={}:"boolean"==typeof x?x={enabled:x}:"string"==typeof x&&(x={classes:x});!1===x.enabled&&y.push("disabled");x.classes&&(y=y.concat(x.classes.split(/\s+/)));x.tooltip&&(b=x.tooltip)}c+='<span class="'+y.join(" ")+'"'+(b?' title="'+b+'"':"")+">"+m+"</span>";m+=o}d.find("td").html(c)},fill:function(){var n,a,o=new Date(this.viewDate),r=o.getUTCFullYear(),s=o.getUTCMonth(),l=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,h=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,d=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,u=m[this.o.language].today||m.en.today||"",p=m[this.o.language].clear||m.en.clear||"",f=m[this.o.language].titleFormat||m.en.titleFormat;if(!isNaN(r)&&!isNaN(s)){this.picker.find(".datepicker-days .datepicker-switch").text(v.formatDate(o,f,this.o.language));this.picker.find("tfoot .today").text(u).toggle(!1!==this.o.todayBtn);this.picker.find("tfoot .clear").text(p).toggle(!1!==this.o.clearBtn);this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title);this.updateNavArrows();this.fillMonths();var g=i(r,s-1,28),y=v.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(y);g.setUTCDate(y-(g.getUTCDay()-this.o.weekStart+7)%7);var b=new Date(g);g.getUTCFullYear()<100&&b.setUTCFullYear(g.getUTCFullYear());b.setUTCDate(b.getUTCDate()+42);b=b.valueOf();for(var x,k=[];g.valueOf()<b;){if(g.getUTCDay()===this.o.weekStart){k.push("<tr>");if(this.o.calendarWeeks){var w=new Date(+g+(this.o.weekStart-g.getUTCDay()-7)%7*864e5),S=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),C=new Date(Number(C=i(S.getUTCFullYear(),0,1))+(11-C.getUTCDay())%7*864e5),D=(S-C)/864e5/7+1;k.push('<td class="cw">'+D+"</td>")}}x=this.getClassNames(g);x.push("day");if(this.o.beforeShowDay!==t.noop){a=this.o.beforeShowDay(this._utc_to_local(g));a===e?a={}:"boolean"==typeof a?a={enabled:a}:"string"==typeof a&&(a={classes:a});!1===a.enabled&&x.push("disabled");a.classes&&(x=x.concat(a.classes.split(/\s+/)));a.tooltip&&(n=a.tooltip)}x=t.isFunction(t.uniqueSort)?t.uniqueSort(x):t.unique(x);k.push('<td class="'+x.join(" ")+'"'+(n?' title="'+n+'"':"")+">"+g.getUTCDate()+"</td>");n=null;g.getUTCDay()===this.o.weekEnd&&k.push("</tr>");g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(k.join(""));var T=m[this.o.language].monthsTitle||m.en.monthsTitle||"Months",M=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?T:r).end().find("span").removeClass("active");t.each(this.dates,function(t,e){e.getUTCFullYear()===r&&M.eq(e.getUTCMonth()).addClass("active")});(r<l||r>c)&&M.addClass("disabled");r===l&&M.slice(0,h).addClass("disabled");r===c&&M.slice(d+1).addClass("disabled");if(this.o.beforeShowMonth!==t.noop){var A=this;t.each(M,function(i,n){var a=new Date(r,i,1),o=A.o.beforeShowMonth(a);o===e?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o});!1!==o.enabled||t(n).hasClass("disabled")||t(n).addClass("disabled");o.classes&&t(n).addClass(o.classes);o.tooltip&&t(n).prop("title",o.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,1,r,l,c,this.o.beforeShowYear);this._fill_yearsView(".datepicker-decades","decade",100,10,r,l,c,this.o.beforeShowDecade);this._fill_yearsView(".datepicker-centuries","century",1e3,100,r,l,c,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:case 3:case 4:this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(e){e.preventDefault();e.stopPropagation();var a,o,r,s,l,h,c;a=t(e.target);a.hasClass("datepicker-switch")&&this.showMode(1);var d=a.closest(".prev, .next");if(d.length>0){o=v.modes[this.viewMode].navStep*(d.hasClass("prev")?-1:1);if(0===this.viewMode){this.viewDate=this.moveMonth(this.viewDate,o);this._trigger("changeMonth",this.viewDate)}else{this.viewDate=this.moveYear(this.viewDate,o)
;1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill()}if(a.hasClass("today")&&!a.hasClass("day")){this.showMode(-2);this._setDate(n(),"linked"===this.o.todayBtn?null:"view")}a.hasClass("clear")&&this.clearDates();if(!a.hasClass("disabled")){if(a.hasClass("day")){r=parseInt(a.text(),10)||1;s=this.viewDate.getUTCFullYear();l=this.viewDate.getUTCMonth();if(a.hasClass("old"))if(0===l){l=11;s-=1;h=!0;c=!0}else{l-=1;h=!0}if(a.hasClass("new"))if(11===l){l=0;s+=1;h=!0;c=!0}else{l+=1;h=!0}this._setDate(i(s,l,r));c&&this._trigger("changeYear",this.viewDate);h&&this._trigger("changeMonth",this.viewDate)}if(a.hasClass("month")){this.viewDate.setUTCDate(1);r=1;l=a.parent().find("span").index(a);s=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(l);this._trigger("changeMonth",this.viewDate);if(1===this.o.minViewMode){this._setDate(i(s,l,r));this.showMode()}else this.showMode(-1);this.fill()}if(a.hasClass("year")||a.hasClass("decade")||a.hasClass("century")){this.viewDate.setUTCDate(1);r=1;l=0;s=parseInt(a.text(),10)||0;this.viewDate.setUTCFullYear(s);if(a.hasClass("year")){this._trigger("changeYear",this.viewDate);2===this.o.minViewMode&&this._setDate(i(s,l,r))}if(a.hasClass("decade")){this._trigger("changeDecade",this.viewDate);3===this.o.minViewMode&&this._setDate(i(s,l,r))}if(a.hasClass("century")){this._trigger("changeCentury",this.viewDate);4===this.o.minViewMode&&this._setDate(i(s,l,r))}this.showMode(-1);this.fill()}}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus();delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);t||this.dates.clear();if(-1!==e)(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e);else if(!1===this.o.multidate){this.dates.clear();this.dates.push(t)}else this.dates.push(t);if("number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t));e&&"view"!==e||(this.viewDate=t&&new Date(t));this.fill();this.setValue();e&&"view"===e||this._trigger("changeDate");this.inputField&&this.inputField.change();!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var i=new Date(t);i.setUTCDate(t.getUTCDate()+e);return i},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!r(t))return this.o.defaultViewDate;if(!e)return t;var i,n,a=new Date(t.valueOf()),o=a.getUTCDate(),s=a.getUTCMonth(),l=Math.abs(e);e=e>0?1:-1;if(1===l){n=-1===e?function(){return a.getUTCMonth()===s}:function(){return a.getUTCMonth()!==i};i=s+e;a.setUTCMonth(i);(i<0||i>11)&&(i=(i+12)%12)}else{for(var h=0;h<l;h++)a=this.moveMonth(a,e);i=a.getUTCMonth();a.setUTCDate(o);n=function(){return i!==a.getUTCMonth()}}for(;n();){a.setUTCDate(--o);a.setUTCMonth(i)}return a},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,i){do{t=this[i](t,e);if(!this.dateWithinRange(t))return!1;i="moveDay"}while(this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(e){return-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(e){return this.weekOfDateIsDisabled(e)||t.grep(this.o.datesDisabled,function(t){return a(e,t)}).length>0},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":visible")){var e,i,n=!1,a=this.focusDate||this.viewDate;switch(t.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill()}else this.hide();t.preventDefault();t.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1;if(0===this.viewMode)if(t.ctrlKey){i=this.moveAvailableDate(a,e,"moveYear");i&&this._trigger("changeYear",this.viewDate)}else if(t.shiftKey){i=this.moveAvailableDate(a,e,"moveMonth");i&&this._trigger("changeMonth",this.viewDate)}else 37===t.keyCode||39===t.keyCode?i=this.moveAvailableDate(a,e,"moveDay"):this.weekOfDateIsDisabled(a)||(i=this.moveAvailableDate(a,e,"moveWeek"));else if(1===this.viewMode){38!==t.keyCode&&40!==t.keyCode||(e*=4);i=this.moveAvailableDate(a,e,"moveMonth")}else if(2===this.viewMode){38!==t.keyCode&&40!==t.keyCode||(e*=4);i=this.moveAvailableDate(a,e,"moveYear")}if(i){this.focusDate=this.viewDate=i;this.setValue();this.fill();t.preventDefault()}break;case 13:if(!this.o.forceParse)break;a=this.focusDate||this.dates.get(-1)||this.viewDate;if(this.o.keyboardNavigation){this._toggle_multidate(a);n=!0}this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(":visible")){t.preventDefault();t.stopPropagation();this.o.autoclose&&this.hide()}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide()}if(n){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");this.inputField&&this.inputField.change()}}else if(40===t.keyCode||27===t.keyCode){this.show();t.stopPropagation()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+t)));this.picker.children("div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).show();this.updateNavArrows()}};var d=function(e,i){t(e).data("datepicker",this);this.element=t(e);this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t});delete i.inputs;p.call(t(this.inputs),i).on("changeDate",t.proxy(this.dateUpdated,this));this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")});this.updateDates()};d.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()});this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var i=t(e.target).data("datepicker");if(void 0!==i){var n=i.getUTCDate(),a=t.inArray(e.target,this.inputs),o=a-1,r=a+1,s=this.inputs.length;if(-1!==a){t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(n)});if(n<this.dates[o])for(;o>=0&&n<this.dates[o];)this.pickers[o--].setUTCDate(n);else if(n>this.dates[r])for(;r<s&&n>this.dates[r];)this.pickers[r++].setUTCDate(n);this.updateDates();delete this.updating}}}},remove:function(){t.map(this.pickers,function(t){t.remove()});delete this.element.data().datepicker}};var u=t.fn.datepicker,p=function(i){var n=Array.apply(null,arguments);n.shift();var a;this.each(function(){var e=t(this),o=e.data("datepicker"),r="object"==typeof i&&i;if(!o){var h=s(this,"date"),u=t.extend({},f,h,r),p=l(u.language),g=t.extend({},f,p,h,r);if(e.hasClass("input-daterange")||g.inputs){t.extend(g,{inputs:g.inputs||e.find("input").toArray()});o=new d(this,g)}else o=new c(this,g);e.data("datepicker",o)}"string"==typeof i&&"function"==typeof o[i]&&(a=o[i].apply(o,n))});if(a===e||a instanceof c||a instanceof d)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+i+" function)");return a};t.fn.datepicker=p;var f=t.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,beforeShowYear:t.noop,beforeShowDecade:t.noop,beforeShowCentury:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&laquo;",rightArrow:"&raquo;"}},g=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=c;var m=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},v={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"decades",navFnc:"FullDecade",navStep:100},{clsName:"centuries",navFnc:"FullCentury",navStep:1e3}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,v.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(a,o,r,s){function l(t,e){!0===e&&(e=10);if(t<100){t+=2e3;t>(new Date).getFullYear()+e&&(t-=100)}return t}function h(){var t=this.slice(0,y[p].length),e=y[p].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(!a)return e;if(a instanceof Date)return a;"string"==typeof o&&(o=v.parseFormat(o));if(o.toValue)return o.toValue(a,o,r);var d,u,p,f,g=/([\-+]\d+)([dmwy])/,y=a.match(/([\-+]\d+)([dmwy])/g),b={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},x={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(a)){a=new Date;for(p=0;p<y.length;p++){d=g.exec(y[p]);u=parseInt(d[1]);f=b[d[2]];a=c.prototype[f](a,u)}return i(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())}if(void 0!==x[a]){a=x[a];y=a.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(a)){a=new Date;for(p=0;p<y.length;p++){d=g.exec(y[p]);u=parseInt(d[1]);f=b[d[2]];a=c.prototype[f](a,u)}return i(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())}}y=a&&a.match(this.nonpunctuation)||[];a=new Date;var k,w,S={},C=["yyyy","yy","M","MM","m","mm","d","dd"],D={yyyy:function(t,e){return t.setUTCFullYear(s?l(e,s):e)},yy:function(t,e){return t.setUTCFullYear(s?l(e,s):e)},m:function(t,e){if(isNaN(t))return t;e-=1;for(;e<0;)e+=12;e%=12;t.setUTCMonth(e);for(;t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};D.M=D.MM=D.mm=D.m;D.dd=D.d;a=n();var T=o.parts.slice();y.length!==T.length&&(T=t(T).filter(function(e,i){return-1!==t.inArray(i,C)}).toArray());if(y.length===T.length){var M;for(p=0,M=T.length;p<M;p++){k=parseInt(y[p],10);d=T[p];if(isNaN(k))switch(d){case"MM":w=t(m[r].months).filter(h);k=t.inArray(w[0],m[r].months)+1;break;case"M":w=t(m[r].monthsShort).filter(h);k=t.inArray(w[0],m[r].monthsShort)+1}S[d]=k}var A,P;for(p=0;p<C.length;p++){P=C[p];if(P in S&&!isNaN(S[P])){A=new Date(a);D[P](A,S[P]);isNaN(A)||(a=A)}}}return a},formatDate:function(e,i,n){if(!e)return"";"string"==typeof i&&(i=v.parseFormat(i));if(i.toDisplay)return i.toDisplay(e,i,n);var a={d:e.getUTCDate(),D:m[n].daysShort[e.getUTCDay()],DD:m[n].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:m[n].monthsShort[e.getUTCMonth()],MM:m[n].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};a.dd=(a.d<10?"0":"")+a.d;a.mm=(a.m<10?"0":"")+a.m;e=[];for(var o=t.extend([],i.separators),r=0,s=i.parts.length;r<=s;r++){o.length&&e.push(o.shift());e.push(a[i.parts[r]])}return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>";t.fn.datepicker.DPGlobal=v;t.fn.datepicker.noConflict=function(){t.fn.datepicker=u;return this};t.fn.datepicker.version="1.6.4";t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);if(!i.data("datepicker")){e.preventDefault();p.call(i,"show")}});t(function(){p.call(t('[data-provide="datepicker-inline"]'))})});$.fn.datepicker.Constructor.prototype.setDateNoEvent=function(){var t=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t);this.setValue();return this};!function(t){t.fn.autoComplete=function(e){var i=t.extend({},t.fn.autoComplete.defaults,e);if("string"==typeof e){this.each(function(){var i=t(this);if("destroy"==e){t(window).off("resize.autocomplete",i.updateSC);i.off("blur.autocomplete focus.autocomplete keydown.autocomplete keyup.autocomplete");i.data("autocomplete")?i.attr("autocomplete",i.data("autocomplete")):i.removeAttr("autocomplete");t(i.data("sc")).remove();i.removeData("sc").removeData("autocomplete")}});return this}return this.each(function(){function e(t){var e=n.val();n.cache[e]=t;if(t.length&&e.length>=i.minChars){for(var a="",o=0;o<t.length;o++)a+=i.renderItem(t[o],e);n.sc.html(a);n.updateSC(0)}else n.sc.hide()}var n=t(this);n.sc=t('<div class="autocomplete-suggestions '+i.menuClass+'"></div>');n.data("sc",n.sc).data("autocomplete",n.attr("autocomplete"));n.attr("autocomplete","off");n.cache={};n.last_val="";n.updateSC=function(e,i){n.sc.css({top:n.offset().top+n.outerHeight(),left:n.offset().left,width:n.outerWidth()});if(!e){n.sc.show();n.sc.maxHeight||(n.sc.maxHeight=parseInt(n.sc.css("max-height")));n.sc.suggestionHeight||(n.sc.suggestionHeight=t(".autocomplete-suggestion",n.sc).first().outerHeight());if(n.sc.suggestionHeight)if(i){var a=n.sc.scrollTop(),o=i.offset().top-n.sc.offset().top;o+n.sc.suggestionHeight-n.sc.maxHeight>0?n.sc.scrollTop(o+n.sc.suggestionHeight+a-n.sc.maxHeight):o<0&&n.sc.scrollTop(o+a)}else n.sc.scrollTop(0)}};t(window).on("resize.autocomplete",n.updateSC);n.sc.appendTo("body");n.sc.on("mouseleave",".autocomplete-suggestion",function(){t(".autocomplete-suggestion.selected").removeClass("selected")});n.sc.on("mouseenter",".autocomplete-suggestion",function(){t(".autocomplete-suggestion.selected").removeClass("selected");t(this).addClass("selected")});n.sc.on("mousedown click",".autocomplete-suggestion",function(e){var a=t(this),o=a.data("val");if(o||a.hasClass("autocomplete-suggestion")){n.val(o);i.onSelect(e,o,a);n.sc.hide()}return!1});n.on("blur.autocomplete",function(){try{over_sb=t(".autocomplete-suggestions:hover").length}catch(t){over_sb=0}if(over_sb)n.is(":focus")||setTimeout(function(){n.focus()},20);else{n.last_val=n.val();n.sc.hide();setTimeout(function(){n.sc.hide()},350)}});i.minChars||n.on("focus.autocomplete",function(){n.last_val="\n";n.trigger("keyup.autocomplete")});n.on("keydown.autocomplete",function(e){if((40==e.which||38==e.which)&&n.sc.html()){var a,o=t(".autocomplete-suggestion.selected",n.sc);if(o.length){a=40==e.which?o.next(".autocomplete-suggestion"):o.prev(".autocomplete-suggestion");if(a.length){o.removeClass("selected");n.val(a.addClass("selected").data("val"))}else{o.removeClass("selected");n.val(n.last_val);a=0}}else{a=40==e.which?t(".autocomplete-suggestion",n.sc).first():t(".autocomplete-suggestion",n.sc).last();n.val(a.addClass("selected").data("val"))}n.updateSC(0,a);return!1}if(27==e.which)n.val(n.last_val).sc.hide();else if(13==e.which||9==e.which){var o=t(".autocomplete-suggestion.selected",n.sc);if(o.length&&n.sc.is(":visible")){i.onSelect(e,o.data("val"),o);setTimeout(function(){n.sc.hide()},20)}}});n.on("keyup.autocomplete",function(a){if(!~t.inArray(a.which,[13,27,35,36,37,38,39,40])){var o=n.val();if(o.length>=i.minChars){if(o!=n.last_val){n.last_val=o;clearTimeout(n.timer);if(i.cache){if(o in n.cache){e(n.cache[o]);return}for(var r=1;r<o.length-i.minChars;r++){var s=o.slice(0,o.length-r);if(s in n.cache&&!n.cache[s].length){e([]);return}}}n.timer=setTimeout(function(){i.source(o,e)},i.delay)}}else{n.last_val=o;n.sc.hide()}}})})};t.fn.autoComplete.defaults={source:0,minChars:3,delay:150,cache:1,menuClass:"",renderItem:function(t,e){e=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var i=new RegExp("("+e.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+t+'">'+t.replace(i,"<b>$1</b>")+"</div>"},onSelect:function(t,e,i){}}}(jQuery);!function(t){t.fn.symbolAutoComplete=function(e){this.autoComplete(t.extend({delay:500,minChars:1,source:function(e,i){var n="/"+baseMarketsURL+"/api/suggest/"+e.toUpperCase()+"/";t.getJSON(n,{},function(t){i(t)})},renderItem:function(t,e){return'<div class="autocomplete-suggestion" data-val="'+t.symbol+'"><b>'+t.symbol+"</b> - "+t.description.replace("<","&lt;").replace(">","&gt;")+"</div>"},onSelect:function(t,e,i){e&&(document.location.href="/"+baseMarketsURL+"/stocks/"+e+"/")}},e))}}(jQuery);var DateFormat={};!function(t){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],o={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[Z\-+]?(\d{2}:?\d{2})?/;t.format=function(){function t(t){return e[parseInt(t,10)]||t}function s(t){return i[parseInt(t,10)]||t}function l(t){var e=parseInt(t,10)-1;return n[e]||t}function h(t){var e=parseInt(t,10)-1;return a[e]||t}function c(t){return o[t]||t}function d(t){var e,i,n,a,o,r=t,s="";if(-1!==r.indexOf(".")){a=r.split(".");r=a[0];s=a[a.length-1]}o=r.split(":");if(3===o.length){e=o[0];i=o[1];n=o[2].replace(/\s.+/,"").replace(/[a-z]/gi,"");r=r.replace(/\s.+/,"").replace(/[a-z]/gi,"");return{time:r,hour:e,minute:i,second:n,millis:s}}return{time:"",hour:"",minute:"",second:"",millis:""}}function u(t,e){for(var i=e-String(t).length,n=0;n<i;n++)t="0"+t;return t}return{parseDate:function(t){var e,i,n={date:null,year:null,month:null,dayOfMonth:null,dayOfWeek:null,time:null};if("number"==typeof t)return this.parseDate(new Date(t));if("function"==typeof t.getFullYear){n.year=String(t.getFullYear());n.month=String(t.getMonth()+1);n.dayOfMonth=String(t.getDate());n.time=d(t.toTimeString()+"."+t.getMilliseconds())}else if(-1!=t.search(r)){e=t.split(/[T\+-]/);n.year=e[0];n.month=e[1];n.dayOfMonth=e[2];n.time=d(e[3].split(".")[0])}else{e=t.split(" ");6===e.length&&isNaN(e[5])&&(e[e.length]="()");switch(e.length){case 6:n.year=e[5];n.month=c(e[1]);n.dayOfMonth=e[2];n.time=d(e[3]);break;case 2:i=e[0].split("-");n.year=i[0];n.month=i[1];n.dayOfMonth=i[2];n.time=d(e[1]);break;case 7:case 9:case 10:n.year=e[3];n.month=c(e[1]);n.dayOfMonth=e[2];n.time=d(e[4]);break;case 1:i=e[0].split("");n.year=i[0]+i[1]+i[2]+i[3];n.month=i[5]+i[6];n.dayOfMonth=i[8]+i[9];n.time=d(i[13]+i[14]+i[15]+i[16]+i[17]+i[18]+i[19]+i[20]);break;default:return null}}n.time?n.date=new Date(n.year,n.month-1,n.dayOfMonth,n.time.hour,n.time.minute,n.time.second,n.time.millis):n.date=new Date(n.year,n.month-1,n.dayOfMonth);n.dayOfWeek=String(n.date.getDay());return n},date:function(e,i){try{var n=this.parseDate(e);if(null===n)return e;for(var a,o=n.year,r=n.month,c=n.dayOfMonth,d=n.dayOfWeek,p=n.time,f="",g="",m="",v=!1,y=0;y<i.length;y++){var b=i.charAt(y),x=i.charAt(y+1);if(v)if("'"==b){g+=""===f?"'":f;f="";v=!1}else f+=b;else{f+=b;m="";switch(f){case"ddd":g+=t(d);f="";break;case"dd":if("d"===x)break;g+=u(c,2);f="";break;case"d":if("d"===x)break;g+=parseInt(c,10);f="";break;case"D":c=1==c||21==c||31==c?parseInt(c,10)+"st":2==c||22==c?parseInt(c,10)+"nd":3==c||23==c?parseInt(c,10)+"rd":parseInt(c,10)+"th";g+=c;f="";break;case"MMMM":g+=h(r);f="";break;case"MMM":if("M"===x)break;g+=l(r);f="";break;case"MM":if("M"===x)break;g+=u(r,2);f="";break;case"M":if("M"===x)break;g+=parseInt(r,10);f="";break;case"y":case"yyy":if("y"===x)break;g+=f;f="";break;case"yy":if("y"===x)break;g+=String(o).slice(-2);f="";break;case"yyyy":g+=o;f="";break;case"HH":g+=u(p.hour,2);f="";break;case"H":if("H"===x)break;g+=parseInt(p.hour,10);f="";break;case"hh":a=0===parseInt(p.hour,10)?12:p.hour<13?p.hour:p.hour-12;g+=u(a,2);f="";break;case"h":if("h"===x)break;a=0===parseInt(p.hour,10)?12:p.hour<13?p.hour:p.hour-12;g+=parseInt(a,10);f="";break;case"mm":g+=u(p.minute,2);f="";break;case"m":if("m"===x)break;g+=p.minute;f="";break;case"ss":g+=u(p.second.substring(0,2),2);f="";break;case"s":if("s"===x)break;g+=p.second;f="";break;case"S":case"SS":if("S"===x)break;g+=f;f="";break;case"SSS":var k="000"+p.millis.substring(0,3);g+=k.substring(k.length-3);f="";break;case"a":g+=p.hour>=12?"PM":"AM";f="";break;case"p":g+=p.hour>=12?"p.m.":"a.m.";f="";break;case"E":g+=s(d);f="";break;case"'":f="";v=!0;break;default:g+=b;f=""}}}g+=m;return g}catch(t){console&&console.log&&console.log(t);return e}},prettyDate:function(t){var e,i,n;"string"!=typeof t&&"number"!=typeof t||(e=new Date(t));"object"==typeof t&&(e=new Date(t.toString()));i=((new Date).getTime()-e.getTime())/1e3;n=Math.floor(i/86400);if(!(isNaN(n)||n<0))return i<60?"just now":i<120?"1 minute ago":i<3600?Math.floor(i/60)+" minutes ago":i<7200?"1 hour ago":i<86400?Math.floor(i/3600)+" hours ago":1===n?"Yesterday":n<7?n+" days ago":n<31?Math.ceil(n/7)+" weeks ago":n>=31?"more than 5 weeks ago":void 0},toBrowserTimeZone:function(t,e){return this.date(new Date(t),e||"MM/dd/yyyy HH:mm:ss")}}}()}(DateFormat);!function(t){t.format=DateFormat.format}(jQuery);!function(t,e){"object"==typeof module&&module.exports?module.exports=t.document?e(t):e:t.Highcharts=e(t)}("undefined"!=typeof window?window:this,function(t){function e(e,i){var n="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(i)throw new Error(n);t.console&&console.log(n)}function i(t,e,i){this.options=e;this.elem=t;this.prop=i}function n(){var t,e,i=arguments,n={},a=function(t,e){var i,n;"object"!=typeof t&&(t={});for(n in e)if(e.hasOwnProperty(n)){i=e[n];i&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"renderTo"!==n&&"number"!=typeof i.nodeType?t[n]=a(t[n]||{},i):t[n]=e[n]}return t};if(!0===i[0]){n=i[1];i=Array.prototype.slice.call(i,2)}e=i.length;for(t=0;t<e;t++)n=a(n,i[t]);return n}function a(t,e){return parseInt(t,e||10)}function o(t){return"string"==typeof t}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}}function l(t){return t!==N&&null!==t}function h(t,e,i){var n,a;if(o(e))l(i)?t.setAttribute(e,i):t&&t.getAttribute&&(a=t.getAttribute(e));else if(l(e)&&ce(e))for(n in e)t.setAttribute(n,e[n]);return a}function c(t){return r(t)?t:[t]}function d(t,e,i){if(e)return setTimeout(t,e,i);t.call(0,i)}function u(t,e){Mt&&!Et&&e&&e.opacity!==N&&(e.filter="alpha(opacity="+100*e.opacity+")");he(t.style,e)}function p(t,e,i,n,a){var o=pt.createElement(t);e&&he(o,e);a&&u(o,{padding:0,border:"none",margin:0});i&&u(o,i);n&&n.appendChild(o);return o}function f(t,e){var i=function(){};i.prototype=new t;he(i.prototype,e);return i}function g(t,e,i){return new Array((e||2)+1-String(t).length).join(i||0)+t}function m(t,e){return/%$/.test(t)?e*parseFloat(t)/100:parseFloat(t)}function v(t){return 6e4*(Z&&Z(t)||K||0)}function y(t,e){var i,n=/f$/,a=/\.([0-9])/,o=X.lang;if(n.test(t)){i=t.match(a);i=i?i[1]:-1;null!==e&&(e=ut.numberFormat(e,i,o.decimalPoint,t.indexOf(",")>-1?o.thousandsSep:""))}else e=V(t,e);return e}function b(t,e){for(var i,n,a,o,r,s,l,h="{",c=!1,d=[];-1!==(l=t.indexOf(h));){i=t.slice(0,l);if(c){n=i.split(":");a=n.shift().split(".");r=a.length;s=e;for(o=0;o<r;o++)s=s[a[o]];n.length&&(s=y(n.join(":"),s));d.push(s)}else d.push(i);t=t.slice(l+1);c=!c;h=c?"}":"{"}d.push(t);return d.join("")}function x(t){return ft.pow(10,mt(ft.log(t)/ft.LN10))}function k(t,e,i,n,a){var o,r,s=t;i=ue(i,1);o=t/i;if(!e){e=[1,2,2.5,5,10];!1===n&&(1===i?e=[1,2,5,10]:i<=.1&&(e=[1/i]))}for(r=0;r<e.length;r++){s=e[r];if(a&&s*i>=t||!a&&o<=(e[r]+(e[r+1]||e[r]))/2)break}s*=i;return s}function w(t,e){var i,n,a=t.length;for(n=0;n<a;n++)t[n].safeI=n;t.sort(function(t,n){i=e(t,n);return 0===i?t.safeI-n.safeI:i});for(n=0;n<a;n++)delete t[n].safeI}function S(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i}function C(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i}function D(t,e){var i;for(i in t){t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy();delete t[i]}}function T(t){Y||(Y=p(Nt));t&&Y.appendChild(t);Y.innerHTML=""}function M(t,e){return parseFloat(t.toPrecision(e||14))}function A(t,e){e.renderer.globalAnimation=ue(t,e.animation)}function P(t){return ce(t)?n(t):{duration:t?500:0}}function L(){var e=X.global,i=e.useUTC,n=i?"getUTC":"get",a=i?"setUTC":"set";j=e.Date||t.Date;K=i&&e.timezoneOffset;Z=i&&e.getTimezoneOffset;Q=function(t,e,n,a,o,r){var s;if(i){s=j.UTC.apply(0,arguments);s+=v(s)}else s=new j(t,e,ue(n,1),ue(a,0),ue(o,0),ue(r,0)).getTime();return s};J=n+"Minutes";tt=n+"Hours";et=n+"Day";it=n+"Date";nt=n+"Month";at=n+"FullYear";ot=a+"Milliseconds";rt=a+"Seconds";st=a+"Minutes";lt=a+"Hours";ht=a+"Date";ct=a+"Month";dt=a+"FullYear"}function I(t){X=n(!0,X,t);L();return X}function O(){return X}function E(t){if(!(this instanceof E))return new E(t);this.init(t)}function _(){}function $(t,e){var i=pt.getElementsByTagName("head")[0],n=pt.createElement("script");n.type="text/javascript";n.src=t;n.onload=e;i.appendChild(n)}function R(t,e,i,n){this.axis=t;this.pos=e;this.type=i||"";this.isNew=!0;i||n||this.addLabel()}function F(t,e,i,n,a){var o=t.chart.inverted;this.axis=t;this.isNegative=i;this.options=e;this.x=n;this.total=null;this.points={};this.stack=a;this.leftCliff=0;this.rightCliff=0;this.alignOptions={align:e.align||(o?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(o?"middle":i?"bottom":"top"),y:ue(e.y,o?4:i?14:-6),x:ue(e.x,o?i?-6:6:0)};this.textAlign=e.textAlign||(o?i?"right":"left":"center")}function B(t,e,i){this.scrollbarButtons=[];this.renderer=t;this.userOptions=e;this.options=n(ai,e);this.chart=i;this.size=ue(this.options.size,this.options.height);this.render();this.initEvents();this.addEvents()}function z(t){var e=t.options,i=e.navigator,n=i.enabled,a=e.scrollbar,o=a.enabled,r=n?i.height:0,s=o?a.height:0;this.handles=[];this.elementsToDestroy=[];this.chart=t;this.setBaseSeries();this.height=r;this.scrollbarHeight=s;this.scrollbarEnabled=o;this.navigatorEnabled=n;this.navigatorOptions=i;this.outlineHeight=r+s;this.init()}function H(t){this.init(t)}var N,W,U,Y,X,V,G,q,j,Q,K,Z,J,tt,et,it,nt,at,ot,rt,st,lt,ht,ct,dt,ut,pt=t.document,ft=Math,gt=ft.round,mt=ft.floor,vt=ft.ceil,yt=ft.max,bt=ft.min,xt=ft.abs,kt=ft.cos,wt=ft.sin,St=ft.PI,Ct=2*St/360,Dt=t.navigator&&t.navigator.userAgent||"",Tt=t.opera,Mt=/(msie|trident|edge)/i.test(Dt)&&!Tt,At=pt&&8===pt.documentMode,Pt=!Mt&&/AppleWebKit/.test(Dt),Lt=/Firefox/.test(Dt),It=/(Mobile|Android|Windows Phone)/.test(Dt),Ot="http://www.w3.org/2000/svg",Et=pt&&pt.createElementNS&&!!pt.createElementNS(Ot,"svg").createSVGRect,_t=Lt&&parseInt(Dt.split("Firefox/")[1],10)<4,$t=pt&&!Et&&!Mt&&!!pt.createElement("canvas").getContext,Rt={},Ft=0,Bt=function(){},zt=[],Ht=0,Nt="div",Wt="absolute",Ut="highcharts-",Yt="px",Xt="none",Vt="M",Gt="L",qt=/^[0-9]+$/,jt=["plotTop","marginRight","marginBottom","plotLeft"],Qt={};ut=t.Highcharts?e(16,!0):{win:t};ut.seriesTypes=Qt;var Kt,Zt,Jt,te,ee,ie,ne,ae,oe,re,se,le=[];i.prototype={dSetter:function(){var t,e=this.paths[0],i=this.paths[1],n=[],a=this.now,o=e.length;if(1===a)n=this.toD;else if(o===i.length&&a<1)for(;o--;){t=parseFloat(e[o]);n[o]=isNaN(t)?e[o]:a*parseFloat(i[o]-t)+t}else n=i;this.elem.attr("d",n)},update:function(){var t=this.elem,e=this.prop,i=this.now,n=this.options.step;this[e+"Setter"]?this[e+"Setter"]():t.attr?t.element&&t.attr(e,i):t.style[e]=i+this.unit;n&&n.call(t,i,this)},run:function(t,e,i){var n,a=this,o=function(t){return!o.stopped&&a.step(t)};this.startTime=+new j;this.start=t;this.end=e;this.unit=i;this.now=this.start;this.pos=0;o.elem=this.elem;o()&&1===le.push(o)&&(o.timerId=setInterval(function(){for(n=0;n<le.length;n++)le[n]()||le.splice(n--,1);le.length||clearInterval(o.timerId)},13))},step:function(t){var e,i,n,a=+new j,o=this.options,r=this.elem,s=o.complete,l=o.duration,h=o.curAnim;if(r.attr&&!r.element)e=!1;else if(t||a>=l+this.startTime){this.now=this.end;this.pos=1;this.update();h[this.prop]=!0;i=!0;for(n in h)!0!==h[n]&&(i=!1);i&&s&&s.call(r);e=!1}else{this.pos=o.easing((a-this.startTime)/l);this.now=this.start+(this.end-this.start)*this.pos;this.update();e=!0}return e},initPath:function(t,e,i){function n(t){c=t.length;for(;c--;)t[c]!==Vt&&t[c]!==Gt||t.splice(c+1,0,t[c+1],t[c+2],t[c+1],t[c+2])}function a(t,e,i){[].splice.apply(t,[i,0].concat(e))}function o(t,e){for(;t.length<l;){t[0]=e[l-t.length];a(t,t.slice(0,g),0);if(y){a(t,t.slice(t.length-g),t.length);c--}}t[0]="M"}function r(t,e){for(var i=(l-t.length)/g;i>0&&i--;){h=t.slice().splice(t.length/b-g,g*b);h[0]=e[l-g-i*g];if(f){h[g-6]=h[g-2];h[g-5]=h[g-1]}a(t,h,t.length/b);y&&i--}}e=e||"";var s,l,h,c,d,u=t.startX,p=t.endX,f=e.indexOf("C")>-1,g=f?7:3,m=e.split(" "),v=i.slice(),y=t.isArea,b=y?2:1;if(f){n(m);n(v)}if(u&&p){for(c=0;c<u.length;c++){if(u[c]===p[0]){s=c;break}if(u[0]===p[p.length-u.length+c]){s=c;d=!0;break}}void 0===s&&(m=[])}if(m.length&&ut.isNumber(s)){l=v.length+s*b*g;if(d){o(m,v);r(v,m)}else{o(v,m);r(m,v)}}return[m,v]}};var he=ut.extend=function(t,e){var i;t||(t={});for(i in e)t[i]=e[i];return t},ce=ut.isObject=function(t,e){return t&&"object"==typeof t&&(!e||!r(t))},de=ut.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},ue=ut.pick=function(){var t,e,i=arguments,n=i.length;for(t=0;t<n;t++){e=i[t];if(e!==N&&null!==e)return e}},pe=ut.wrap=function(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);t.unshift(n);return i.apply(this,t)}};V=function(t,e,i){if(!l(e)||isNaN(e))return X.lang.invalidDate||"";t=ue(t,"%Y-%m-%d %H:%M:%S");var n,a=new j(e-v(e)),o=a[tt](),r=a[et](),s=a[it](),h=a[nt](),c=a[at](),d=X.lang,u=d.weekdays,p=d.shortWeekdays,f=he({a:p?p[r]:u[r].substr(0,3),A:u[r],d:g(s),e:g(s,2," "),w:r,b:d.shortMonths[h],B:d.months[h],m:g(h+1),y:c.toString().substr(2,2),Y:c,H:g(o),k:o,I:g(o%12||12),l:o%12||12,M:g(a[J]()),p:o<12?"AM":"PM",P:o<12?"am":"pm",S:g(a.getSeconds()),L:g(gt(e%1e3),3)},ut.dateFormats);for(n in f)for(;-1!==t.indexOf("%"+n);)t=t.replace("%"+n,"function"==typeof f[n]?f[n](e):f[n]);return i?t.substr(0,1).toUpperCase()+t.substr(1):t};G={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5};ut.numberFormat=function(t,e,i,n){t=+t||0;e=+e;var o,r,s,l,h=X.lang,c=(t.toString().split(".")[1]||"").length,d=Math.abs(t);-1===e?e=Math.min(c,20):de(e)||(e=2);r=String(a(d.toFixed(e)));s=r.length>3?r.length%3:0;i=ue(i,h.decimalPoint);n=ue(n,h.thousandsSep);l=t<0?"-":"";l+=s?r.substr(0,s)+n:"";l+=r.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+n);if(e){o=Math.abs(d-r+Math.pow(10,-Math.max(e,c)-1));l+=i+o.toFixed(e).slice(2)}return l};Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)};Kt=function(e,i){var n
;if("width"===i)return Math.min(e.offsetWidth,e.scrollWidth)-Kt(e,"padding-left")-Kt(e,"padding-right");if("height"===i)return Math.min(e.offsetHeight,e.scrollHeight)-Kt(e,"padding-top")-Kt(e,"padding-bottom");n=t.getComputedStyle(e,void 0);return n&&a(n.getPropertyValue(i))};Zt=function(t,e){return e.indexOf?e.indexOf(t):[].indexOf.call(e,t)};te=function(t,e){return[].filter.call(t,e)};ie=function(t,e){for(var i=[],n=0,a=t.length;n<a;n++)i[n]=e.call(t[n],t[n],n,t);return i};ee=function(e){var i=pt.documentElement,n=e.getBoundingClientRect();return{top:n.top+(t.pageYOffset||i.scrollTop)-(i.clientTop||0),left:n.left+(t.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}};se=function(t){for(var e=le.length;e--;)le[e].elem===t&&(le[e].stopped=!0)};Jt=function(t,e){return Array.prototype.forEach.call(t,e)};ne=function(e,i,n){function a(i){i.target=i.srcElement||t;n.call(e,i)}var o=e.hcEvents=e.hcEvents||{};if(e.addEventListener)e.addEventListener(i,n,!1);else if(e.attachEvent){e.hcEventsIE||(e.hcEventsIE={});e.hcEventsIE[n.toString()]=a;e.attachEvent("on"+i,a)}o[i]||(o[i]=[]);o[i].push(n)};ae=function(t,e,i){function n(e,i){if(t.removeEventListener)t.removeEventListener(e,i,!1);else if(t.attachEvent){i=t.hcEventsIE[i.toString()];t.detachEvent("on"+e,i)}}function a(){var i,a,o;if(t.nodeName){if(e){i={};i[e]=!0}else i=s;for(o in i)if(s[o]){a=s[o].length;for(;a--;)n(o,s[o][a])}}}var o,r,s=t.hcEvents;if(s)if(e){o=s[e]||[];if(i){r=Zt(i,o);if(r>-1){o.splice(r,1);s[e]=o}n(e,i)}else{a();s[e]=[]}}else{a();t.hcEvents={}}};oe=function(t,e,i,n){var a,o,r,s,l,h=t.hcEvents;i=i||{};if(pt.createEvent&&(t.dispatchEvent||t.fireEvent)){a=pt.createEvent("Events");a.initEvent(e,!0,!0);a.target=t;he(a,i);t.dispatchEvent?t.dispatchEvent(a):t.fireEvent(e,a)}else if(h){o=h[e]||[];r=o.length;i.preventDefault||(i.preventDefault=function(){i.defaultPrevented=!0});i.target=t;i.type||(i.type=e);for(s=0;s<r;s++){l=o[s];l&&!1===l.call(t,i)&&i.preventDefault()}}n&&!i.defaultPrevented&&n(i)};re=function(t,e,a){var o,r,s,l,h,c="";if(!ce(a)){l=arguments;a={duration:l[2],easing:l[3],complete:l[4]}}de(a.duration)||(a.duration=400);a.easing="function"==typeof a.easing?a.easing:Math[a.easing]||Math.easeInOutSine;a.curAnim=n(e);for(h in e){s=new i(t,a,h);r=null;if("d"===h){s.paths=s.initPath(t,t.d,e.d);s.toD=e.d;o=0;r=1}else if(t.attr)o=t.attr(h);else{o=parseFloat(Kt(t,h))||0;"opacity"!==h&&(c="px")}r||(r=e[h]);r.match&&r.match("px")&&(r=r.replace(/px/g,""));s.run(o,r,c)}};t.jQuery&&(t.jQuery.fn.highcharts=function(){var t=[].slice.call(arguments);if(this[0]){if(t[0]){new(ut[o(t[0])?t.shift():"Chart"])(this[0],t[0],t[1]);return this}return zt[h(this[0],"data-highcharts-chart")]}});pt&&!pt.defaultView&&(Kt=function(t,e){var i,n={width:"clientWidth",height:"clientHeight"}[e];if(t.style[e])return a(t.style[e]);"opacity"===e&&(e="filter");if(n){t.style.zoom=1;return Math.max(t[n]-2*Kt(t,"padding"),0)}i=t.currentStyle[e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})];"filter"===e&&(i=i.replace(/alpha\(opacity=([0-9]+)\)/,function(t,e){return e/100}));return""===i?1:a(i)});Array.prototype.forEach||(Jt=function(t,e){for(var i=0,n=t.length;i<n;i++)if(!1===e.call(t[i],t[i],i,t))return i});Array.prototype.indexOf||(Zt=function(t,e){var i,n=0;if(e){i=e.length;for(;n<i;n++)if(e[n]===t)return n}return-1});Array.prototype.filter||(te=function(t,e){for(var i=[],n=0,a=t.length;n<a;n++)e(t[n],n)&&i.push(t[n]);return i});ut.Fx=i;ut.inArray=Zt;ut.each=Jt;ut.grep=te;ut.offset=ee;ut.map=ie;ut.addEvent=ne;ut.removeEvent=ae;ut.fireEvent=oe;ut.animate=re;ut.animObject=P;ut.stop=se;X={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/stock/4.2.6/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}},width:null,height:null},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"},widthAdjust:-44},subtitle:{text:"",align:"center",style:{color:"#555555"},widthAdjust:-44},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":ut.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:Wt,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:Wt,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:Wt,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Et,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">â—</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:It?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var fe=X.plotOptions,ge=fe.line;L();E.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[a(t[1]),a(t[2]),a(t[3]),parseFloat(t[4],10)]}},{regex:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(t){return[a(t[1],16),a(t[2],16),a(t[3],16),1]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[a(t[1]),a(t[2]),a(t[3]),1]}}],init:function(t){var e,i,n,a;this.input=t;if(t&&t.stops)this.stops=ie(t.stops,function(t){return new E(t[1])});else{n=this.parsers.length;for(;n--&&!i;){a=this.parsers[n];e=a.regex.exec(t);e&&(i=a.parse(e))}}this.rgba=i||[]},get:function(t){var e,i=this.input,a=this.rgba;if(this.stops){e=n(i);e.stops=[].concat(e.stops);Jt(this.stops,function(i,n){e.stops[n]=[e.stops[n][0],i.get(t)]})}else e=a&&de(a[0])?"rgb"===t||!t&&1===a[3]?"rgb("+a[0]+","+a[1]+","+a[2]+")":"a"===t?a[3]:"rgba("+a.join(",")+")":i;return e},brighten:function(t){var e,i=this.rgba;if(this.stops)Jt(this.stops,function(e){e.brighten(t)});else if(de(t)&&0!==t)for(e=0;e<3;e++){i[e]+=a(255*t);i[e]<0&&(i[e]=0);i[e]>255&&(i[e]=255)}return this},setOpacity:function(t){this.rgba[3]=t;return this}};_.prototype={opacity:1,textProps:["direction","fontSize","fontWeight","fontFamily","fontStyle","color","lineHeight","width","textDecoration","textOverflow","textShadow"],init:function(t,e){var i=this;i.element="span"===e?p(e):pt.createElementNS(Ot,e);i.renderer=t},animate:function(t,e,i){var n=ue(e,this.renderer.globalAnimation,!0);se(this);if(n){i&&(n.complete=i);re(this,t,n)}else this.attr(t,null,i);return this},colorGradient:function(t,e,i){var a,o,s,h,c,d,u,p,f,g,m,v,y,b=this.renderer,x=[];t.linearGradient?o="linearGradient":t.radialGradient&&(o="radialGradient");if(o){s=t[o];c=b.gradients;u=t.stops;g=i.radialReference;r(s)&&(t[o]=s={x1:s[0],y1:s[1],x2:s[2],y2:s[3],gradientUnits:"userSpaceOnUse"});if("radialGradient"===o&&g&&!l(s.gradientUnits)){h=s;s=n(s,b.getRadialAttr(g,h),{gradientUnits:"userSpaceOnUse"})}for(m in s)"id"!==m&&x.push(m,s[m]);for(m in u)x.push(u[m]);x=x.join(",");if(c[x])v=c[x].attr("id");else{s.id=v=Ut+Ft++;c[x]=d=b.createElement(o).attr(s).add(b.defs);d.radAttr=h;d.stops=[];Jt(u,function(t){var e;if(0===t[1].indexOf("rgba")){a=E(t[1]);p=a.get("rgb");f=a.get("a")}else{p=t[1];f=1}e=b.createElement("stop").attr({offset:t[0],"stop-color":p,"stop-opacity":f}).add(d);d.stops.push(e)})}y="url("+b.url+"#"+v+")";i.setAttribute(e,y);i.gradient=x;t.toString=function(){return y}}},applyTextShadow:function(t){var e,i=this.element,n=-1!==t.indexOf("contrast"),o={},r=this.renderer.forExport,s=r||i.style.textShadow!==N&&!Mt;n&&(o.textShadow=t=t.replace(/contrast/g,this.renderer.getContrast(i.style.fill)));(Pt||r)&&(o.textRendering="geometricPrecision");if(s)this.css(o);else{this.fakeTS=!0;this.ySetter=this.xSetter;e=[].slice.call(i.getElementsByTagName("tspan"));Jt(t.split(/\s?,\s?/g),function(t){var n,o,r=i.firstChild;t=t.split(" ");n=t[t.length-1];o=t[t.length-2];o&&Jt(e,function(t,e){var s;if(0===e){t.setAttribute("x",i.getAttribute("x"));e=i.getAttribute("y");t.setAttribute("y",e||0);null===e&&i.setAttribute("y",0)}s=t.cloneNode(1);h(s,{class:Ut+"text-shadow",fill:n,stroke:n,"stroke-opacity":1/yt(a(o),3),"stroke-width":o,"stroke-linejoin":"round"});i.insertBefore(s,r)})})}},attr:function(t,e,i){var n,a,o,r,s,l=this.element,h=this;if("string"==typeof t&&e!==N){n=t;t={};t[n]=e}if("string"==typeof t)h=(this[t+"Getter"]||this._defaultGetter).call(this,t,l);else{for(n in t){a=t[n];r=!1;if(this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(n)){if(!o){this.symbolAttr(t);o=!0}r=!0}!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0);if(!r){s=this[n+"Setter"]||this._defaultSetter;s.call(this,a,n,l);this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,a,s)}}if(this.doTransform){this.updateTransform();this.doTransform=!1}}i&&i();return h},updateShadows:function(t,e,i){for(var n=this.shadows,a=n.length;a--;)i.call(n[a],"height"===t?Math.max(e-(n[a].cutHeight||0),0):"d"===t?this.d:e,t,n[a])},addClass:function(t){var e=this.element,i=h(e,"class")||"";-1===i.indexOf(t)&&h(e,"class",i+" "+t);return this},symbolAttr:function(t){var e=this;Jt(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(i){e[i]=ue(t[i],e[i])});e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":Xt)},crisp:function(t){var e,i,n=this,a={},o=n.strokeWidth||0;i=gt(o)%2/2;t.x=mt(t.x||n.x||0)+i;t.y=mt(t.y||n.y||0)+i;t.width=mt((t.width||n.width||0)-2*i);t.height=mt((t.height||n.height||0)-2*i);t.strokeWidth=o;for(e in t)n[e]!==t[e]&&(n[e]=a[e]=t[e]);return a},css:function(t){var e,i,n,o=this,r=o.styles,s={},l=o.element,c="",d=!r;t&&t.color&&(t.fill=t.color);if(r)for(i in t)if(t[i]!==r[i]){s[i]=t[i];d=!0}if(d){e=o.textWidth=t&&t.width&&"text"===l.nodeName.toLowerCase()&&a(t.width)||o.textWidth;r&&(t=he(r,s));o.styles=t;e&&($t||!Et&&o.renderer.forExport)&&delete t.width;if(Mt&&!Et)u(o.element,t);else{n=function(t,e){return"-"+e.toLowerCase()};for(i in t)c+=i.replace(/([A-Z])/g,n)+":"+t[i]+";";h(l,"style",c)}e&&o.added&&o.renderer.buildText(o)}return o},on:function(t,e){var i=this,n=i.element;if(U&&"click"===t){n.ontouchstart=function(t){i.touchEventFired=j.now();t.preventDefault();e.call(n,t)};n.onclick=function(t){(-1===Dt.indexOf("Android")||j.now()-(i.touchEventFired||0)>1100)&&e.call(n,t)}}else n["on"+t]=e;return this},setRadialReference:function(t){var e=this.renderer.gradients[this.element.gradient];this.element.radialReference=t;e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr));return this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){var t=this;t.inverted=!0;t.updateTransform();return t},updateTransform:function(){var t,e=this,i=e.translateX||0,n=e.translateY||0,a=e.scaleX,o=e.scaleY,r=e.inverted,s=e.rotation,h=e.element;if(r){i+=e.attr("width");n+=e.attr("height")}t=["translate("+i+","+n+")"];r?t.push("rotate(90) scale(-1,1)"):s&&t.push("rotate("+s+" "+(h.getAttribute("x")||0)+" "+(h.getAttribute("y")||0)+")");(l(a)||l(o))&&t.push("scale("+ue(a,1)+" "+ue(o,1)+")");t.length&&h.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;t.parentNode.appendChild(t);return this},align:function(t,e,i){var n,a,r,l,h,c={},d=this.renderer,u=d.alignedObjects;if(t){this.alignOptions=t;this.alignByTranslate=e;if(!i||o(i)){this.alignTo=h=i||"renderer";s(u,this);u.push(this);i=null}}else{t=this.alignOptions;e=this.alignByTranslate;h=this.alignTo}i=ue(i,d[h],d);n=t.align;a=t.verticalAlign;r=(i.x||0)+(t.x||0);l=(i.y||0)+(t.y||0);"right"!==n&&"center"!==n||(r+=(i.width-(t.width||0))/{right:1,center:2}[n]);c[e?"translateX":"x"]=gt(r);"bottom"!==a&&"middle"!==a||(l+=(i.height-(t.height||0))/({bottom:1,middle:2}[a]||1));c[e?"translateY":"y"]=gt(l);this[this.placed?"animate":"attr"](c);this.placed=!0;this.alignAttr=c;return this},getBBox:function(t,e){var i,n,a,o,r,s,l,h,c=this,d=c.renderer,u=c.element,p=c.styles,f=c.textStr,g=u.style,m=d.cache,v=d.cacheKeys;o=ue(e,c.rotation);r=o*Ct;if(f!==N){h=["",o||0,p&&p.fontSize,u.style.width].join(",");h=""===f||qt.test(f)?"num:"+f.toString().length+h:f+h}h&&!t&&(i=m[h]);if(!i){if(u.namespaceURI===Ot||d.forExport){try{l=this.fakeTS&&function(t){Jt(u.querySelectorAll("."+Ut+"text-shadow"),function(e){e.style.display=t})};if(Lt&&g.textShadow){s=g.textShadow;g.textShadow=""}else l&&l(Xt);i=u.getBBox?he({},u.getBBox()):{width:u.offsetWidth,height:u.offsetHeight};s?g.textShadow=s:l&&l("")}catch(t){}(!i||i.width<0)&&(i={width:0,height:0})}else i=c.htmlGetBBox();if(d.isSVG){n=i.width;a=i.height;Mt&&p&&"11px"===p.fontSize&&"16.9"===a.toPrecision(3)&&(i.height=a=14);if(o){i.width=xt(a*wt(r))+xt(n*kt(r));i.height=xt(a*kt(r))+xt(n*wt(r))}}if(h){for(;v.length>250;)delete m[v.shift()];m[h]||v.push(h);m[h]=i}}return i},show:function(t){return this.attr({visibility:t?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,i=this.renderer,n=this.element;t&&(this.parentGroup=t);this.parentInverted=t&&t.inverted;void 0!==this.textStr&&i.buildText(this);this.added=!0;(!t||t.handleZ||this.zIndex)&&(e=this.zIndexSetter());e||(t?t.element:i.box).appendChild(n);this.onAdd&&this.onAdd();return this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i,n=this,a=n.element||{},o=n.shadows,r=n.renderer.isSVG&&"SPAN"===a.nodeName&&n.parentGroup;a.onclick=a.onmouseout=a.onmouseover=a.onmousemove=a.point=null;se(n);n.clipPath&&(n.clipPath=n.clipPath.destroy());if(n.stops){for(i=0;i<n.stops.length;i++)n.stops[i]=n.stops[i].destroy();n.stops=null}n.safeRemoveChild(a);o&&Jt(o,function(t){n.safeRemoveChild(t)});for(;r&&r.div&&0===r.div.childNodes.length;){t=r.parentGroup;n.safeRemoveChild(r.div);delete r.div;r=t}n.alignTo&&s(n.renderer.alignedObjects,n);for(e in n)delete n[e];return null},shadow:function(t,e,i){var n,a,o,r,s,l,c=[],d=this.element;if(t){r=ue(t.width,3);s=(t.opacity||.15)/r;l=this.parentInverted?"(-1,-1)":"("+ue(t.offsetX,1)+", "+ue(t.offsetY,1)+")";for(n=1;n<=r;n++){a=d.cloneNode(0);o=2*r+1-2*n;h(a,{isShadow:"true",stroke:t.color||"black","stroke-opacity":s*n,"stroke-width":o,transform:"translate"+l,fill:Xt});if(i){h(a,"height",yt(h(a,"height")-o,0));a.cutHeight=o}e?e.element.appendChild(a):d.parentNode.insertBefore(a,d);c.push(a)}this.shadows=c}return this},xGetter:function(t){"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t);return this._defaultGetter(t)},_defaultGetter:function(t){var e=ue(this[t],this.element?this.element.getAttribute(t):null,0);/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e));return e},dSetter:function(t,e,i){t&&t.join&&(t=t.join(" "));/(NaN| {2}|^$)/.test(t)&&(t="M 0 0");i.setAttribute(e,t);this[e]=t},dashstyleSetter:function(t){var e,i=this["stroke-width"];"inherit"===i&&(i=1);t=t&&t.toLowerCase();if(t){t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");e=t.length;for(;e--;)t[e]=a(t[e])*i;t=t.join(",").replace(/NaN/g,"none");this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,i){this[e]=t;i.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];if(!e){e=pt.createElementNS(Ot,"title");this.element.appendChild(e)}e.firstChild&&e.removeChild(e.firstChild);e.appendChild(pt.createTextNode(String(ue(t),"").replace(/<[^>]*>/g,"")))},textSetter:function(t){if(t!==this.textStr){delete this.bBox;this.textStr=t;this.added&&this.renderer.buildText(this)}},fillSetter:function(t,e,i){"string"==typeof t?i.setAttribute(e,t):t&&this.colorGradient(t,e,i)},visibilitySetter:function(t,e,i){"inherit"===t?i.removeAttribute(e):i.setAttribute(e,t)},zIndexSetter:function(t,e){var i,n,o,r,s,h=this.renderer,c=this.parentGroup,d=c||h,u=d.element||h.box,p=this.element,f=this.added;if(l(t)){p.zIndex=t;t=+t;this[e]===t&&(f=!1);this[e]=t}if(f){t=this.zIndex;t&&c&&(c.handleZ=!0);i=u.childNodes;for(s=0;s<i.length&&!r;s++){n=i[s];o=n.zIndex;if(n!==p&&(a(o)>t||!l(t)&&l(o))){u.insertBefore(p,n);r=!0}}r||u.appendChild(p)}return r},_defaultSetter:function(t,e,i){i.setAttribute(e,t)}};_.prototype.yGetter=_.prototype.xGetter;_.prototype.translateXSetter=_.prototype.translateYSetter=_.prototype.rotationSetter=_.prototype.verticalAlignSetter=_.prototype.scaleXSetter=_.prototype.scaleYSetter=function(t,e){this[e]=t;this.doTransform=!0};_.prototype["stroke-widthSetter"]=_.prototype.strokeSetter=function(t,e,i){this[e]=t;if(this.stroke&&this["stroke-width"]){this.strokeWidth=this["stroke-width"];_.prototype.fillSetter.call(this,this.stroke,"stroke",i);i.setAttribute("stroke-width",this["stroke-width"]);this.hasStroke=!0}else if("stroke-width"===e&&0===t&&this.hasStroke){i.removeAttribute("stroke");this.hasStroke=!1}};var me=function(){this.init.apply(this,arguments)};me.prototype={Element:_,init:function(e,i,n,a,o,r){var s,l,c,d=this;s=d.createElement("svg").attr({version:"1.1"}).css(this.getStyle(a));l=s.element;e.appendChild(l);-1===e.innerHTML.indexOf("xmlns")&&h(l,"xmlns",Ot);d.isSVG=!0;d.box=l;d.boxWrapper=s;d.alignedObjects=[];d.url=(Lt||Pt)&&pt.getElementsByTagName("base").length?t.location.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";c=this.createElement("desc").add();c.element.appendChild(pt.createTextNode("Created with Highstock 4.2.6"));d.defs=this.createElement("defs").add();d.allowHTML=r;d.forExport=o;d.gradients={};d.cache={};d.cacheKeys=[];d.imgCount=0;d.setSize(i,n,!1);var p,f;if(Lt&&e.getBoundingClientRect){d.subPixelFix=p=function(){u(e,{left:0,top:0});f=e.getBoundingClientRect();u(e,{left:vt(f.left)-f.left+Yt,top:vt(f.top)-f.top+Yt})};p();ne(t,"resize",p)}},getStyle:function(t){this.style=he({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t);return this.style},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this,i=e.defs;e.box=null;e.boxWrapper=e.boxWrapper.destroy();D(e.gradients||{});e.gradients=null;i&&(e.defs=i.destroy());e.subPixelFix&&ae(t,"resize",e.subPixelFix);e.alignedObjects=null;return null},createElement:function(t){var e=new this.Element;e.init(this,t);return e},draw:function(){},getRadialAttr:function(t,e){return{cx:t[0]-t[2]/2+e.cx*t[2],cy:t[1]-t[2]/2+e.cy*t[2],r:e.r*t[2]}},buildText:function(t){for(var e,i,n,o,r=t.element,s=this,l=s.forExport,c=ue(t.textStr,"").toString(),d=-1!==c.indexOf("<"),p=r.childNodes,f=h(r,"x"),g=t.styles,m=t.textWidth,v=g&&g.lineHeight,y=g&&g.textShadow,b=g&&"ellipsis"===g.textOverflow,x=p.length,k=m&&!t.added&&this.box,w=function(t){return v?a(v):s.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:g&&g.fontSize||s.style.fontSize||12,t).h},S=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")};x--;)r.removeChild(p[x]);if(d||y||b||m||-1!==c.indexOf(" ")){i=/<.*style="([^"]+)".*>/;n=/<.*href="(http[^"]+)".*>/;k&&k.appendChild(r);e=d?c.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[c];e=te(e,function(t){return""!==t});Jt(e,function(e,a){var c,d=0;e=e.replace(/^\s+|\s+$/g,"").replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");c=e.split("|||");Jt(c,function(e){if(""!==e||1===c.length){var p,v={},y=pt.createElementNS(Ot,"tspan");if(i.test(e)){p=e.match(i)[1].replace(/(;| |^)color([ :])/,"$1fill$2");h(y,"style",p)}if(n.test(e)&&!l){h(y,"onclick",'location.href="'+e.match(n)[1]+'"');u(y,{cursor:"pointer"})}e=S(e.replace(/<(.|\n)*?>/g,"")||" ");if(" "!==e){y.appendChild(pt.createTextNode(e));d?v.dx=0:a&&null!==f&&(v.x=f);h(y,v);r.appendChild(y);if(!d&&a){!Et&&l&&u(y,{display:"block"});h(y,"dy",w(y))}if(m){for(var x,k,C,D=e.replace(/([^\^])-/g,"$1- ").split(" "),T=c.length>1||a||D.length>1&&"nowrap"!==g.whiteSpace,M=[],A=w(y),P=1,L=t.rotation,I=e,O=I.length;(T||b)&&(D.length||M.length);){t.rotation=0;C=t.getBBox(!0);k=C.width;!Et&&s.forExport&&(k=s.measureSpanWidth(y.firstChild.data,t.styles));x=k>m;void 0===o&&(o=x);if(b&&o){O/=2;if(""===I||!x&&O<.5)D=[];else{I=e.substring(0,I.length+(x?-1:1)*vt(O));D=[I+(m>3?"â€¦":"")];y.removeChild(y.firstChild)}}else if(x&&1!==D.length){y.removeChild(y.firstChild);M.unshift(D.pop())}else{D=M;M=[];if(D.length){P++;y=pt.createElementNS(Ot,"tspan");h(y,{dy:A,x:f});p&&h(y,"style",p);r.appendChild(y)}k>m&&(m=k)}D.length&&y.appendChild(pt.createTextNode(D.join(" ").replace(/- /g,"-")))}t.rotation=L}d++}}})});o&&t.attr("title",t.textStr);k&&k.removeChild(r);y&&t.applyTextShadow&&t.applyTextShadow(y)}else r.appendChild(pt.createTextNode(S(c)))},getContrast:function(t){t=E(t).rgba;return t[0]+t[1]+t[2]>384?"#000000":"#FFFFFF"},button:function(t,e,i,a,o,r,s,l,h){var c,d,u,p,f,g,m=this.label(t,e,i,h,null,null,null,null,"button"),v=0,y={x1:0,y1:0,x2:0,y2:1};o=n({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:y,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},o);u=o.style;delete o.style;r=n(o,{stroke:"#68A",fill:{linearGradient:y,stops:[[0,"#FFF"],[1,"#ACF"]]}},r);p=r.style;delete r.style;s=n(o,{stroke:"#68A",fill:{linearGradient:y,stops:[[0,"#9BD"],[1,"#CDF"]]}},s);f=s.style;delete s.style;l=n(o,{style:{color:"#CCC"}},l);g=l.style;delete l.style;ne(m.element,Mt?"mouseover":"mouseenter",function(){3!==v&&m.attr(r).css(p)});ne(m.element,Mt?"mouseout":"mouseleave",function(){if(3!==v){c=[o,r,s][v];d=[u,p,f][v];m.attr(c).css(d)}});m.setState=function(t){m.state=v=t;t?2===t?m.attr(s).css(f):3===t&&m.attr(l).css(g):m.attr(o).css(u)};return m.on("click",function(t){3!==v&&a.call(m,t)}).attr(o).css(he({cursor:"default"},u))},crispLine:function(t,e){t[1]===t[4]&&(t[1]=t[4]=gt(t[1])-e%2/2);t[2]===t[5]&&(t[2]=t[5]=gt(t[2])+e%2/2);return t},path:function(t){var e={fill:Xt};r(t)?e.d=t:ce(t)&&he(e,t);return this.createElement("path").attr(e)},circle:function(t,e,i){var n=ce(t)?t:{x:t,y:e,r:i},a=this.createElement("circle");a.xSetter=a.ySetter=function(t,e,i){i.setAttribute("c"+e,t)};return a.attr(n)},arc:function(t,e,i,n,a,o){var r;if(ce(t)){e=t.y;i=t.r;n=t.innerR;a=t.start;o=t.end;t=t.x}r=this.symbol("arc",t||0,e||0,i||0,i||0,{innerR:n||0,start:a||0,end:o||0});r.r=i;return r},rect:function(t,e,i,n,a,o){a=ce(t)?t.r:a;var r=this.createElement("rect"),s=ce(t)?t:t===N?{}:{x:t,y:e,width:yt(i,0),height:yt(n,0)};if(o!==N){r.strokeWidth=o;s=r.crisp(s)}a&&(s.r=a);r.rSetter=function(t,e,i){h(i,{rx:t,ry:t})};return r.attr(s)},setSize:function(t,e,i){var n=this,a=n.alignedObjects,o=a.length;n.width=t;n.height=e;n.boxWrapper[ue(i,!0)?"animate":"attr"]({width:t,height:e});for(;o--;)a[o].align()},g:function(t){var e=this.createElement("g");return l(t)?e.attr({class:Ut+t}):e},image:function(t,e,i,n,a){var o,r={preserveAspectRatio:Xt};arguments.length>1&&he(r,{x:e,y:i,width:n,height:a});o=this.createElement("image").attr(r);o.element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):o.element.setAttribute("hc-svg-href",t);return o},symbol:function(t,e,i,n,a,o){var r,s,l,h,c=this,d=this.symbols[t],f=d&&d(gt(e),gt(i),n,a,o),g=/^url\((.*?)\)$/;if(f){r=this.path(f);he(r,{symbolName:t,x:e,y:i,width:n,height:a});o&&he(r,o)}else if(g.test(t)){h=function(t,e){if(t.element){t.attr({width:e[0],height:e[1]});t.alignByTranslate||t.translate(gt((n-e[0])/2),gt((a-e[1])/2))}};s=t.match(g)[1];l=Rt[s]||o&&o.width&&o.height&&[o.width,o.height];r=this.image(s).attr({x:e,y:i});r.isImg=!0;if(l)h(r,l);else{r.attr({width:0,height:0});p("img",{onload:function(){if(0===this.width){u(this,{position:Wt,top:"-999em"});pt.body.appendChild(this)}h(r,Rt[s]=[this.width,this.height]);this.parentNode&&this.parentNode.removeChild(this);c.imgCount--;!c.imgCount&&zt[c.chartIndex].onload&&zt[c.chartIndex].onload()},src:s});this.imgCount++}}return r},symbols:{circle:function(t,e,i,n){var a=.166*i;return[Vt,t+i/2,e,"C",t+i+a,e,t+i+a,e+n,t+i/2,e+n,"C",t-a,e+n,t-a,e,t+i/2,e,"Z"]},square:function(t,e,i,n){return[Vt,t,e,Gt,t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return[Vt,t+i/2,e,Gt,t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return[Vt,t,e,Gt,t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return[Vt,t+i/2,e,Gt,t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,a){var o=a.start,r=a.r||i||n,s=a.end-.001,l=a.innerR,h=a.open,c=kt(o),d=wt(o),u=kt(s),p=wt(s),f=a.end-o<St?0:1;return[Vt,t+r*c,e+r*d,"A",r,r,0,f,1,t+r*u,e+r*p,h?Vt:Gt,t+l*u,e+l*p,"A",l,l,0,f,0,t+l*c,e+l*d,h?"":"Z"]},callout:function(t,e,i,n,a){var o,r=bt(a&&a.r||0,i,n),s=r+6,l=a&&a.anchorX,h=a&&a.anchorY;o=["M",t+r,e,"L",t+i-r,e,"C",t+i,e,t+i,e,t+i,e+r,"L",t+i,e+n-r,"C",t+i,e+n,t+i,e+n,t+i-r,e+n,"L",t+r,e+n,"C",t,e+n,t,e+n,t,e+n-r,"L",t,e+r,"C",t,e,t,e,t+r,e];l&&l>i&&h>e+s&&h<e+n-s?o.splice(13,3,"L",t+i,h-6,t+i+6,h,t+i,h+6,t+i,e+n-r):l&&l<0&&h>e+s&&h<e+n-s?o.splice(33,3,"L",t,h+6,t-6,h,t,h-6,t,e+r):h&&h>n&&l>t+s&&l<t+i-s?o.splice(23,3,"L",l+6,e+n,l,e+n+6,l-6,e+n,t+r,e+n):h&&h<0&&l>t+s&&l<t+i-s&&o.splice(3,3,"L",l-6,e,l,e-6,l+6,e,i-r,e);return o}},clipRect:function(t,e,i,n){var a,o=Ut+Ft++,r=this.createElement("clipPath").attr({id:o}).add(this.defs);a=this.rect(t,e,i,n,0).add(r);a.id=o;a.clipPath=r;a.count=0;return a},text:function(t,e,i,n){var a,o=this,r=$t||!Et&&o.forExport,s={};if(n&&(o.allowHTML||!o.forExport))return o.html(t,e,i);s.x=Math.round(e||0);i&&(s.y=Math.round(i));(t||0===t)&&(s.text=t);a=o.createElement("text").attr(s);r&&a.css({position:Wt});n||(a.xSetter=function(t,e,i){var n,a,o=i.getElementsByTagName("tspan"),r=i.getAttribute(e);for(a=0;a<o.length;a++){n=o[a];n.getAttribute(e)===r&&n.setAttribute(e,t)}i.setAttribute(e,t)});return a},fontMetrics:function(e,i){var n,o,r;e=e||this.style.fontSize;if(!e&&i&&t.getComputedStyle){i=i.element||i;r=t.getComputedStyle(i,"");e=r&&r.fontSize}e=/px/.test(e)?a(e):/em/.test(e)?12*parseFloat(e):12;n=e<24?e+3:gt(1.2*e);o=gt(.8*n);return{h:n,b:o,f:e}},rotCorr:function(t,e,i){var n=t;e&&i&&(n=yt(n*kt(e*Ct),4));return{x:-t/3*wt(e*Ct),y:n}},label:function(t,e,i,a,o,r,s,h,c){var d,u,p,f,g,m,v,y,b,x,k,w=this,S=w.g(c),C=w.text("",0,0,s).attr({zIndex:1}),D=0,T=3,M=0,A=0,P={};b=function(){var t,e,i=C.element.style;u=(void 0===p||void 0===f||S.styles.textAlign)&&l(C.textStr)&&C.getBBox();S.width=(p||u.width||0)+2*T+M;S.height=(f||u.height||0)+2*T;v=T+w.fontMetrics(i&&i.fontSize,C).b;if(y){if(!d){t=A;e=(h?-v:0)+A;S.box=d=w.symbols[a]?w.symbol(a,t,e,S.width,S.height,P):w.rect(t,e,S.width,S.height,0,P["stroke-width"]);d.isImg||d.attr("fill",Xt);d.add(S)}d.isImg||d.attr(he({width:gt(S.width),height:gt(S.height)},P));P=null}};x=function(){var t,e=S.styles,i=e&&e.textAlign,n=M+T;t=h?0:v;l(p)&&u&&("center"===i||"right"===i)&&(n+={center:.5,right:1}[i]*(p-u.width));if(n!==C.x||t!==C.y){C.attr("x",n);t!==N&&C.attr("y",t)}C.x=n;C.y=t};k=function(t,e){d?d.attr(t,e):P[t]=e};S.onAdd=function(){C.add(S);S.attr({text:t||0===t?t:"",x:e,y:i});d&&l(o)&&S.attr({anchorX:o,anchorY:r})};S.widthSetter=function(t){p=t};S.heightSetter=function(t){f=t};S.paddingSetter=function(t){if(l(t)&&t!==T){T=S.padding=t;x()}};S.paddingLeftSetter=function(t){if(l(t)&&t!==M){M=t;x()}};S.alignSetter=function(t){t={left:0,center:.5,right:1}[t];if(t!==D){D=t;u&&S.attr({x:g})}};S.textSetter=function(t){t!==N&&C.textSetter(t);b();x()};S["stroke-widthSetter"]=function(t,e){t&&(y=!0);A=t%2/2;k(e,t)};S.strokeSetter=S.fillSetter=S.rSetter=function(t,e){"fill"===e&&t&&(y=!0);k(e,t)};S.anchorXSetter=function(t,e){o=t;k(e,gt(t)-A-g)};S.anchorYSetter=function(t,e){r=t;k(e,t-m)};S.xSetter=function(t){S.x=t;D&&(t-=D*((p||u.width)+2*T));g=gt(t);S.attr("translateX",g)};S.ySetter=function(t){m=S.y=gt(t);S.attr("translateY",m)};var L=S.css;return he(S,{css:function(t){if(t){var e={};t=n(t);Jt(S.textProps,function(i){if(t[i]!==N){e[i]=t[i];delete t[i]}});C.css(e)}return L.call(S,t)},getBBox:function(){return{width:u.width+2*T,height:u.height+2*T,x:u.x-T,y:u.y-T}},shadow:function(t){d&&d.shadow(t);return S},destroy:function(){ae(S.element,"mouseenter");ae(S.element,"mouseleave");C&&(C=C.destroy());d&&(d=d.destroy());_.prototype.destroy.call(S);S=w=b=x=k=null}})}};W=me;he(_.prototype,{htmlCss:function(t){var e=this,i=e.element,n=t&&"SPAN"===i.tagName&&t.width;if(n){delete t.width;e.textWidth=n;e.updateTransform()}if(t&&"ellipsis"===t.textOverflow){t.whiteSpace="nowrap";t.overflow="hidden"}e.styles=he(e.styles,t);u(e.element,t);return e},htmlGetBBox:function(){var t=this,e=t.element;"text"===e.nodeName&&(e.style.position=Wt);return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var t=this,e=t.renderer,i=t.element,n=t.translateX||0,o=t.translateY||0,r=t.x||0,s=t.y||0,h=t.textAlign||"left",c={left:0,center:.5,right:1}[h],d=t.shadows,p=t.styles;u(i,{marginLeft:n,marginTop:o});d&&Jt(d,function(t){u(t,{marginLeft:n+1,marginTop:o+1})});t.inverted&&Jt(i.childNodes,function(t){e.invertChild(t,i)});if("SPAN"===i.tagName){var f,g=t.rotation,m=a(t.textWidth),v=p&&p.whiteSpace,y=[g,h,i.innerHTML,t.textWidth,t.textAlign].join(",");if(y!==t.cTT){f=e.fontMetrics(i.style.fontSize).b;l(g)&&t.setSpanRotation(g,c,f);u(i,{width:"",whiteSpace:v||"nowrap"});i.offsetWidth>m&&/[ \-]/.test(i.textContent||i.innerText)&&u(i,{width:m+Yt,display:"block",whiteSpace:v||"normal"});t.getSpanCorrection(i.offsetWidth,f,c,g,h)}u(i,{left:r+(t.xCorr||0)+Yt,top:s+(t.yCorr||0)+Yt});Pt&&(f=i.offsetHeight)
;t.cTT=y}}else this.alignOnAdd=!0},setSpanRotation:function(t,e,i){var n={},a=Mt?"-ms-transform":Pt?"-webkit-transform":Lt?"MozTransform":Tt?"-o-transform":"";n[a]=n.transform="rotate("+t+"deg)";n[a+(Lt?"Origin":"-origin")]=n.transformOrigin=100*e+"% "+i+"px";u(this.element,n)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i;this.yCorr=-e}});he(me.prototype,{html:function(t,e,i){var n=this.createElement("span"),a=n.element,o=n.renderer,r=o.isSVG,s=function(t,e){Jt(["opacity","visibility"],function(i){pe(t,i+"Setter",function(t,i,n,a){t.call(this,i,n,a);e[n]=i})})};n.textSetter=function(t){t!==a.innerHTML&&delete this.bBox;a.innerHTML=this.textStr=t;n.htmlUpdateTransform()};r&&s(n,n.element.style);n.xSetter=n.ySetter=n.alignSetter=n.rotationSetter=function(t,e){"align"===e&&(e="textAlign");n[e]=t;n.htmlUpdateTransform()};n.attr({text:t,x:gt(e),y:gt(i)}).css({position:Wt,fontFamily:this.style.fontFamily,fontSize:this.style.fontSize});a.style.whiteSpace="nowrap";n.css=n.htmlCss;r&&(n.add=function(t){var e,i,r=o.box.parentNode,l=[];this.parentGroup=t;if(t){e=t.div;if(!e){i=t;for(;i;){l.push(i);i=i.parentGroup}Jt(l.reverse(),function(t){var i,n=h(t.element,"class");n&&(n={className:n});e=t.div=t.div||p(Nt,n,{position:Wt,left:(t.translateX||0)+Yt,top:(t.translateY||0)+Yt,opacity:t.opacity},e||r);i=e.style;he(t,{translateXSetter:function(e,n){i.left=e+Yt;t[n]=e;t.doTransform=!0},translateYSetter:function(e,n){i.top=e+Yt;t[n]=e;t.doTransform=!0}});s(t,i)})}}else e=r;e.appendChild(a);n.added=!0;n.alignOnAdd&&n.htmlUpdateTransform();return n});return n}});var ve,ye;if(!Et&&!$t){ye={init:function(t,e){var i=this,n=["<",e,' filled="f" stroked="f"'],a=["position: ",Wt,";"],o=e===Nt;("shape"===e||o)&&a.push("left:0;top:0;width:1px;height:1px;");a.push("visibility: ",o?"hidden":"visible");n.push(' style="',a.join(""),'"/>');if(e){n=o||"span"===e||"img"===e?n.join(""):t.prepVML(n);i.element=p(n)}i.renderer=t},add:function(t){var e=this,i=e.renderer,n=e.element,a=i.box,o=t&&t.inverted,r=t?t.element||t:a;t&&(this.parentGroup=t);o&&i.invertChild(n,r);r.appendChild(n);e.added=!0;e.alignOnAdd&&!e.deferUpdateTransform&&e.updateTransform();e.onAdd&&e.onAdd();return e},updateTransform:_.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=kt(t*Ct),i=wt(t*Ct);u(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-i,", M21=",i,", M22=",e,", sizingMethod='auto expand')"].join(""):Xt})},getSpanCorrection:function(t,e,i,n,a){var o,r=n?kt(n*Ct):1,s=n?wt(n*Ct):0,l=ue(this.elemHeight,this.element.offsetHeight),h=a&&"left"!==a;this.xCorr=r<0&&-t;this.yCorr=s<0&&-l;o=r*s<0;this.xCorr+=s*e*(o?1-i:i);this.yCorr-=r*e*(n?o?i:1-i:1);if(h){this.xCorr-=t*i*(r<0?-1:1);n&&(this.yCorr-=l*i*(s<0?-1:1));u(this.element,{textAlign:a})}},pathToVML:function(t){for(var e=t.length,i=[];e--;)if(de(t[e]))i[e]=gt(10*t[e])-5;else if("Z"===t[e])i[e]="x";else{i[e]=t[e];if(t.isArc&&("wa"===t[e]||"at"===t[e])){i[e+5]===i[e+7]&&(i[e+7]+=t[e+7]>t[e+5]?1:-1);i[e+6]===i[e+8]&&(i[e+8]+=t[e+8]>t[e+6]?1:-1)}}return i.join(" ")||"x"},clip:function(t){var e,i,n=this;if(t){e=t.members;s(e,n);e.push(n);n.destroyClip=function(){s(e,n)};i=t.getCSS(n)}else{n.destroyClip&&n.destroyClip();i={clip:At?"inherit":"rect(auto)"}}return n.css(i)},css:_.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&T(t)},destroy:function(){this.destroyClip&&this.destroyClip();return _.prototype.destroy.apply(this)},on:function(e,i){this.element["on"+e]=function(){var e=t.event;e.target=e.srcElement;i(e)};return this},cutOffPath:function(t,e){var i;t=t.split(/[ ,]/);i=t.length;9!==i&&11!==i||(t[i-4]=t[i-2]=a(t[i-2])-10*e);return t.join(" ")},shadow:function(t,e,i){var n,o,r,s,l,h,c,d=[],u=this.element,f=this.renderer,g=u.style,m=u.path;m&&"string"!=typeof m.value&&(m="x");l=m;if(t){h=ue(t.width,3);c=(t.opacity||.15)/h;for(n=1;n<=3;n++){s=2*h+1-2*n;i&&(l=this.cutOffPath(m.value,s+.5));r=['<shape isShadow="true" strokeweight="',s,'" filled="false" path="',l,'" coordsize="10 10" style="',u.style.cssText,'" />'];o=p(f.prepVML(r),null,{left:a(g.left)+ue(t.offsetX,1),top:a(g.top)+ue(t.offsetY,1)});i&&(o.cutOff=s+1);r=['<stroke color="',t.color||"black",'" opacity="',c*n,'"/>'];p(f.prepVML(r),null,null,o);e?e.element.appendChild(o):u.parentNode.insertBefore(o,u);d.push(o)}this.shadows=d}return this},updateShadows:Bt,setAttr:function(t,e){At?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,i){(i.getElementsByTagName("stroke")[0]||p(this.renderer.prepVML(["<stroke/>"]),null,null,i))[e]=t||"solid";this[e]=t},dSetter:function(t,e,i){var n,a=this.shadows;t=t||[];this.d=t.join&&t.join(" ");i.path=t=this.pathToVML(t);if(a){n=a.length;for(;n--;)a[n].path=a[n].cutOff?this.cutOffPath(t,a[n].cutOff):t}this.setAttr(e,t)},fillSetter:function(t,e,i){var n=i.nodeName;if("SPAN"===n)i.style.color=t;else if("IMG"!==n){i.filled=t!==Xt;this.setAttr("fillcolor",this.renderer.color(t,i,e,this))}},"fill-opacitySetter":function(t,e,i){p(this.renderer.prepVML(["<",e.split("-")[0],' opacity="',t,'"/>']),null,null,i)},opacitySetter:Bt,rotationSetter:function(t,e,i){var n=i.style;this[e]=n[e]=t;n.left=-gt(wt(t*Ct)+1)+Yt;n.top=gt(kt(t*Ct))+Yt},strokeSetter:function(t,e,i){this.setAttr("strokecolor",this.renderer.color(t,i,e,this))},"stroke-widthSetter":function(t,e,i){i.stroked=!!t;this[e]=t;de(t)&&(t+=Yt);this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,i){"inherit"===t&&(t="visible");this.shadows&&Jt(this.shadows,function(i){i.style[e]=t});if("DIV"===i.nodeName){t="hidden"===t?"-999em":0;At||(i.style[e]=t?"visible":"hidden");e="top"}i.style[e]=t},xSetter:function(t,e,i){this[e]=t;"x"===e?e="left":"y"===e&&(e="top");if(this.updateClipping){this[e]=t;this.updateClipping()}else i.style[e]=t},zIndexSetter:function(t,e,i){i.style[e]=t}};ye["stroke-opacitySetter"]=ye["fill-opacitySetter"];ut.VMLElement=ye=f(_,ye);ye.prototype.ySetter=ye.prototype.widthSetter=ye.prototype.heightSetter=ye.prototype.xSetter;var be={Element:ye,isIE8:Dt.indexOf("MSIE 8.0")>-1,init:function(t,e,i,n){var a,o,r,s=this;s.alignedObjects=[];a=s.createElement(Nt).css(he(this.getStyle(n),{position:"relative"}));o=a.element;t.appendChild(a.element);s.isVML=!0;s.box=o;s.boxWrapper=a;s.gradients={};s.cache={};s.cacheKeys=[];s.imgCount=0;s.setSize(e,i,!1);if(!pt.namespaces.hcv){pt.namespaces.add("hcv","urn:schemas-microsoft-com:vml");r="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{pt.createStyleSheet().cssText=r}catch(t){pt.styleSheets[0].cssText+=r}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,e,i,n){var a=this.createElement(),o=ce(t);return he(a,{members:[],count:0,left:(o?t.x:t)+1,top:(o?t.y:e)+1,width:(o?t.width:i)-1,height:(o?t.height:n)-1,getCSS:function(t){var e=t.element,i=e.nodeName,n="shape"===i,a=t.inverted,o=this,r=o.top-(n?e.offsetTop:0),s=o.left,l=s+o.width,h=r+o.height,c={clip:"rect("+gt(a?s:r)+"px,"+gt(a?h:l)+"px,"+gt(a?l:h)+"px,"+gt(a?r:s)+"px)"};!a&&At&&"DIV"===i&&he(c,{width:l+Yt,height:h+Yt});return c},updateClipping:function(){Jt(a.members,function(t){t.element&&t.css(a.getCSS(t))})}})},color:function(t,e,i,n){var a,o,r,s=this,l=/^rgba/,h=Xt;t&&t.linearGradient?r="gradient":t&&t.radialGradient&&(r="pattern");if(r){var c,d,u,f,g,m,v,y,b,x,k,w,S=t.linearGradient||t.radialGradient,C="",D=t.stops,T=[],M=function(){o=['<fill colors="'+T.join(",")+'" opacity="',y,'" o:opacity2="',v,'" type="',r,'" ',C,'focus="100%" method="any" />'];p(s.prepVML(o),null,null,e)};k=D[0];w=D[D.length-1];k[0]>0&&D.unshift([0,k[1]]);w[0]<1&&D.push([1,w[1]]);Jt(D,function(t,e){if(l.test(t[1])){a=E(t[1]);c=a.get("rgb");d=a.get("a")}else{c=t[1];d=1}T.push(100*t[0]+"% "+c);if(e){y=d;b=c}else{v=d;x=c}});if("fill"===i)if("gradient"===r){u=S.x1||S[0]||0;f=S.y1||S[1]||0;g=S.x2||S[2]||0;m=S.y2||S[3]||0;C='angle="'+(90-180*ft.atan((m-f)/(g-u))/St)+'"';M()}else{var A,P=S.r,L=2*P,I=2*P,O=S.cx,_=S.cy,$=e.radialReference,R=function(){if($){A=n.getBBox();O+=($[0]-A.x)/A.width-.5;_+=($[1]-A.y)/A.height-.5;L*=$[2]/A.width;I*=$[2]/A.height}C='src="'+X.global.VMLRadialGradientURL+'" size="'+L+","+I+'" origin="0.5,0.5" position="'+O+","+_+'" color2="'+x+'" ';M()};n.added?R():n.onAdd=R;h=b}else h=c}else if(l.test(t)&&"IMG"!==e.tagName){a=E(t);n[i+"-opacitySetter"](a.get("a"),i,e);h=a.get("rgb")}else{var F=e.getElementsByTagName(i);if(F.length){F[0].opacity=1;F[0].type="solid"}h=t}return h},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;t=t.join("");if(i){t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />');t=-1===t.indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e)}else t=t.replace("<","<hcv:");return t},text:me.prototype.html,path:function(t){var e={coordsize:"10 10"};r(t)?e.d=t:ce(t)&&he(e,t);return this.createElement("shape").attr(e)},circle:function(t,e,i){var n=this.symbol("circle");if(ce(t)){i=t.r;e=t.y;t=t.x}n.isCircle=!0;n.r=i;return n.attr({x:t,y:e})},g:function(t){var e,i;t&&(i={className:Ut+t,class:Ut+t});e=this.createElement(Nt).attr(i);return e},image:function(t,e,i,n,a){var o=this.createElement("img").attr({src:t});arguments.length>1&&o.attr({x:e,y:i,width:n,height:a});return o},createElement:function(t){return"rect"===t?this.symbol(t):me.prototype.createElement.call(this,t)},invertChild:function(t,e){var i=this,n=e.style,o="IMG"===t.tagName&&t.style;u(t,{flip:"x",left:a(n.width)-(o?a(o.top):1),top:a(n.height)-(o?a(o.left):1),rotation:-90});Jt(t.childNodes,function(e){i.invertChild(e,t)})},symbols:{arc:function(t,e,i,n,a){var o,r=a.start,s=a.end,l=a.r||i||n,h=a.innerR,c=kt(r),d=wt(r),u=kt(s),p=wt(s);if(s-r==0)return["x"];o=["wa",t-l,e-l,t+l,e+l,t+l*c,e+l*d,t+l*u,e+l*p];a.open&&!h&&o.push("e",Vt,t,e);o.push("at",t-h,e-h,t+h,e+h,t+h*u,e+h*p,t+h*c,e+h*d,"x","e");o.isArc=!0;return o},circle:function(t,e,i,n,a){a&&(i=n=2*a.r);if(a&&a.isCircle){t-=i/2;e-=n/2}return["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,a){return me.prototype.symbols[l(a)&&a.r?"callout":"square"].call(0,t,e,i,n,a)}}};ut.VMLRenderer=ve=function(){this.init.apply(this,arguments)};ve.prototype=n(me.prototype,be);W=ve}me.prototype.measureSpanWidth=function(t,e){var i,n=pt.createElement("span"),a=pt.createTextNode(t);n.appendChild(a);u(n,e);this.box.appendChild(n);i=n.offsetWidth;T(n);return i};var xe,ke;if($t){ut.CanVGRenderer=xe=function(){Ot="http://www.w3.org/1999/xhtml"};xe.prototype.symbols={};ke=function(){function t(){var t,i=e.length;for(t=0;t<i;t++)e[t]();e=[]}var e=[];return{push:function(i,n){0===e.length&&$(n,t);e.push(i)}}}();W=xe}R.prototype={addLabel:function(){var t,e,i=this,a=i.axis,o=a.options,r=a.chart,s=a.categories,h=a.names,c=i.pos,d=o.labels,u=a.tickPositions,p=c===u[0],f=c===u[u.length-1],g=s?ue(s[c],h[c],c):c,m=i.label,v=u.info;a.isDatetimeAxis&&v&&(e=o.dateTimeLabelFormats[v.higherRanks[c]||v.unitName]);i.isFirst=p;i.isLast=f;t=a.labelFormatter.call({axis:a,chart:r,isFirst:p,isLast:f,dateTimeLabelFormat:e,value:a.isLog?M(a.lin2log(g)):g});if(l(m))m&&m.attr({text:t});else{i.label=m=l(t)&&d.enabled?r.renderer.text(t,0,0,d.useHTML).css(n(d.style)).add(a.labelGroup):null;i.labelLength=m&&m.getBBox().width;i.rotation=0}},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(t){var e,i,n,a=this.axis,o=t.x,r=a.chart.chartWidth,s=a.chart.spacing,l=ue(a.labelLeft,bt(a.pos,s[3])),h=ue(a.labelRight,yt(a.pos+a.len,r-s[1])),c=this.label,d=this.rotation,u={left:0,center:.5,right:1}[a.labelAlign],p=c.getBBox().width,f=a.getSlotWidth(),g=f,m=u,v=1,y={};if(d)d<0&&o-u*p<l?n=gt(o/kt(d*Ct)-l):d>0&&o+u*p>h&&(n=gt((r-o)/kt(d*Ct)));else{e=o-u*p;i=o+(1-u)*p;if(e<l)g=t.x+g*(1-u)-l;else if(i>h){g=h-t.x+g*u;v=-1}g=bt(f,g);g<f&&"center"===a.labelAlign&&(t.x+=v*(f-g-m*(f-bt(p,g))));(p>g||a.autoRotation&&c.styles.width)&&(n=g)}if(n){y.width=n;a.options.labels.style.textOverflow||(y.textOverflow="ellipsis");c.css(y)}},getPosition:function(t,e,i,n){var a=this.axis,o=a.chart,r=n&&o.oldChartHeight||o.chartHeight;return{x:t?a.translate(e+i,null,null,n)+a.transB:a.left+a.offset+(a.opposite?(n&&o.oldChartWidth||o.chartWidth)-a.right-a.left:0),y:t?r-a.bottom+a.offset-(a.opposite?a.height:0):r-a.translate(e+i,null,null,n)-a.transB}},getLabelPosition:function(t,e,i,n,a,o,r,s){var h,c=this.axis,d=c.transA,u=c.reversed,p=c.staggerLines,f=c.tickRotCorr||{x:0,y:0},g=a.y;l(g)||(g=0===c.side?i.rotation?-8:-i.getBBox().height:2===c.side?f.y+8:kt(i.rotation*Ct)*(f.y-i.getBBox(!1,0).height/2));t=t+a.x+f.x-(o&&n?o*d*(u?-1:1):0);e=e+g-(o&&!n?o*d*(u?1:-1):0);if(p){h=r/(s||1)%p;c.opposite&&(h=p-h-1);e+=h*(c.labelOffset/p)}return{x:t,y:gt(e)}},getMarkPath:function(t,e,i,n,a,o){return o.crispLine([Vt,t,e,Gt,t+(a?0:-i),e+(a?i:0)],n)},render:function(t,e,i){var n,a,o,r=this,s=r.axis,l=s.options,h=s.chart,c=h.renderer,d=s.horiz,u=r.type,p=r.label,f=r.pos,g=l.labels,m=r.gridLine,v=u?u+"Grid":"grid",y=u?u+"Tick":"tick",b=l[v+"LineWidth"],x=l[v+"LineColor"],k=l[v+"LineDashStyle"],w=s.tickSize(y),S=l[y+"Color"],C=r.mark,D=g.step,T=!0,M=s.tickmarkOffset,A=r.getPosition(d,f,M,e),P=A.x,L=A.y,I=d&&P===s.pos+s.len||!d&&L===s.pos?-1:1;i=ue(i,1);this.isActive=!0;if(b){n=s.getPlotLinePath(f+M,b*I,e,!0);if(m===N){o={stroke:x,"stroke-width":b};k&&(o.dashstyle=k);u||(o.zIndex=1);e&&(o.opacity=0);r.gridLine=m=b?c.path(n).attr(o).add(s.gridGroup):null}!e&&m&&n&&m[r.isNew?"attr":"animate"]({d:n,opacity:i})}if(w){s.opposite&&(w[0]=-w[0]);a=r.getMarkPath(P,L,w[0],w[1]*I,d,c);C?C.animate({d:a,opacity:i}):r.mark=c.path(a).attr({stroke:S,"stroke-width":w[1],opacity:i}).add(s.axisGroup)}if(p&&de(P)){p.xy=A=r.getLabelPosition(P,L,p,d,g,M,t,D);r.isFirst&&!r.isLast&&!ue(l.showFirstLabel,1)||r.isLast&&!r.isFirst&&!ue(l.showLastLabel,1)?T=!1:!d||s.isRadial||g.step||g.rotation||e||0===i||r.handleOverflow(A);D&&t%D&&(T=!1);if(T&&de(A.y)){A.opacity=i;p[r.isNew?"attr":"animate"](A)}else{se(p);p.attr("y",-9999)}r.isNew=!1}},destroy:function(){D(this,this.axis)}};ut.PlotLineOrBand=function(t,e){this.axis=t;if(e){this.options=e;this.id=e.id}};ut.PlotLineOrBand.prototype={render:function(){var t,e,i=this,a=i.axis,o=a.horiz,r=i.options,s=r.label,h=i.label,c=r.width,d=r.to,u=r.from,p=l(u)&&l(d),f=r.value,g=r.dashStyle,m=i.svgElem,v=[],y=r.color,b=ue(r.zIndex,0),x=r.events,k={},w=a.chart.renderer,S=a.log2lin;if(a.isLog){u=S(u);d=S(d);f=S(f)}if(c){v=a.getPlotLinePath(f,c);k={stroke:y,"stroke-width":c};g&&(k.dashstyle=g)}else{if(!p)return;v=a.getPlotBandPath(u,d,r);y&&(k.fill=y);if(r.borderWidth){k.stroke=r.borderColor;k["stroke-width"]=r.borderWidth}}k.zIndex=b;if(m)if(v){m.show();m.animate({d:v})}else{m.hide();h&&(i.label=h=h.destroy())}else if(v&&v.length){i.svgElem=m=w.path(v).attr(k).add();if(x){t=function(t){m.on(t,function(e){x[t].apply(i,[e])})};for(e in x)t(e)}}if(s&&l(s.text)&&v&&v.length&&a.width>0&&a.height>0&&!v.flat){s=n({align:o&&p&&"center",x:o?!p&&4:10,verticalAlign:!o&&p&&"middle",y:o?p?16:10:p?6:-4,rotation:o&&!p&&90},s);this.renderLabel(s,v,p,b)}else h&&h.hide();return i},renderLabel:function(t,e,i,n){var a,o,r,s,l,h=this,c=h.label,d=h.axis.chart.renderer;if(!c){a={align:t.textAlign||t.align,rotation:t.rotation};a.zIndex=n;h.label=c=d.text(t.text,0,0,t.useHTML).attr(a).css(t.style).add()}o=[e[1],e[4],i?e[6]:e[1]];r=[e[2],e[5],i?e[7]:e[2]];s=S(o);l=S(r);c.align(t,!1,{x:s,y:l,width:C(o)-s,height:C(r)-l});c.show()},destroy:function(){s(this.axis.plotLinesAndBands,this);delete this.axis;D(this)}};q={getPlotBandPath:function(t,e){var i=this.getPlotLinePath(e,null,null,!0),n=this.getPlotLinePath(t,null,null,!0);if(n&&i){n.flat=n.toString()===i.toString();n.push(i[4],i[5],i[1],i[2])}else n=null;return n},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var i=new ut.PlotLineOrBand(this,t).render(),n=this.userOptions;if(i){if(e){n[e]=n[e]||[];n[e].push(t)}this.plotLinesAndBands.push(i)}return i},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,i=this.options,n=this.userOptions,a=e.length;a--;)e[a].id===t&&e[a].destroy();Jt([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],function(e){a=e.length;for(;a--;)e[a].id===t&&s(e,e[a])})}};var we=ut.Axis=function(){this.init.apply(this,arguments)};we.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return ut.numberFormat(this.total,-1)},style:n(fe.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},init:function(t,e){var i=e.isX,n=this;n.chart=t;n.horiz=t.inverted?!i:i;n.isXAxis=i;n.coll=i?"xAxis":"yAxis";n.opposite=e.opposite;n.side=e.side||(n.horiz?n.opposite?0:2:n.opposite?1:3);n.setOptions(e);var a=this.options,o=a.type,r="datetime"===o;n.labelFormatter=a.labels.formatter||n.defaultLabelFormatter;n.userOptions=e;n.minPixelPadding=0;n.reversed=a.reversed;n.visible=!1!==a.visible;n.zoomEnabled=!1!==a.zoomEnabled;n.categories=a.categories||"category"===o;n.names=n.names||[];n.isLog="logarithmic"===o;n.isDatetimeAxis=r;n.isLinked=l(a.linkedTo);n.ticks={};n.labelEdge=[];n.minorTicks={};n.plotLinesAndBands=[];n.alternateBands={};n.len=0;n.minRange=n.userMinRange=a.minRange||a.maxZoom;n.range=a.range;n.offset=a.offset||0;n.stacks={};n.oldStacks={};n.stacksTouched=0;n.max=null;n.min=null;n.crosshair=ue(a.crosshair,c(t.options.tooltip.crosshairs)[i?0:1],!1);var s,h=n.options.events;if(-1===Zt(n,t.axes)){i&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,n):t.axes.push(n);t[n.coll].push(n)}n.series=n.series||[];t.inverted&&i&&n.reversed===N&&(n.reversed=!0);n.removePlotBand=n.removePlotBandOrLine;n.removePlotLine=n.removePlotBandOrLine;for(s in h)ne(n,s,h[s]);if(n.isLog){n.val2lin=n.log2lin;n.lin2val=n.lin2log}},setOptions:function(t){this.options=n(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],n(X[this.coll],t))},defaultLabelFormatter:function(){var t,e,i=this.axis,n=this.value,a=i.categories,o=this.dateTimeLabelFormat,r=X.lang.numericSymbols,s=r&&r.length,l=i.options.labels.format,h=i.isLog?n:i.tickInterval;if(l)e=b(l,this);else if(a)e=n;else if(o)e=V(o,n);else if(s&&h>=1e3)for(;s--&&e===N;){t=Math.pow(1e3,s+1);h>=t&&10*n%t==0&&null!==r[s]&&0!==n&&(e=ut.numberFormat(n/t,-1)+r[s])}e===N&&(e=xt(n)>=1e4?ut.numberFormat(n,-1):ut.numberFormat(n,-1,N,""));return e},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1;t.dataMin=t.dataMax=t.threshold=null;t.softThreshold=!t.isXAxis;t.buildStacks&&t.buildStacks();Jt(t.series,function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var n,a,o,r=i.options,s=r.threshold;t.hasVisibleSeries=!0;t.isLog&&s<=0&&(s=null);if(t.isXAxis){n=i.xData;if(n.length){a=S(n);if(!(de(a)||a instanceof j)){n=te(n,function(t){return de(t)});a=S(n)}t.dataMin=bt(ue(t.dataMin,n[0]),a);t.dataMax=yt(ue(t.dataMax,n[0]),C(n))}}else{i.getExtremes();o=i.dataMax;a=i.dataMin;if(l(a)&&l(o)){t.dataMin=bt(ue(t.dataMin,a),a);t.dataMax=yt(ue(t.dataMax,o),o)}l(s)&&(t.threshold=s);r.softThreshold&&!t.isLog||(t.softThreshold=!1)}}})},translate:function(t,e,i,n,a,o){var r,s=this.linkedParent||this,l=1,h=0,c=n?s.oldTransA:s.transA,d=n?s.oldMin:s.min,u=s.minPixelPadding,p=(s.isOrdinal||s.isBroken||s.isLog&&a)&&s.lin2val;c||(c=s.transA);if(i){l*=-1;h=s.len}if(s.reversed){l*=-1;h-=l*(s.sector||s.len)}if(e){t=t*l+h;t-=u;r=t/c+d;p&&(r=s.lin2val(r))}else{p&&(t=s.val2lin(t));"between"===o&&(o=.5);r=l*(t-d)*c+h+l*u+(de(o)?c*o*s.pointRange:0)}return r},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n,a){var o,r,s,l,h,c=this,d=c.chart,u=c.left,p=c.top,f=i&&d.oldChartHeight||d.chartHeight,g=i&&d.oldChartWidth||d.chartWidth,m=c.transB,v=function(t,e,i){(t<e||t>i)&&(n?t=bt(yt(e,t),i):h=!0);return t};a=ue(a,c.translate(t,null,null,i));o=s=gt(a+m);r=l=gt(f-a-m);if(de(a))if(c.horiz){r=p;l=f-c.bottom;o=s=v(o,u,u+c.width)}else{o=u;s=g-c.right;r=l=v(r,p,p+c.height)}else h=!0;return h&&!n?null:d.renderer.crispLine([Vt,o,r,Gt,s,l],e||1)},getLinearTickPositions:function(t,e,i){var n,a,o=M(mt(e/t)*t),r=M(vt(i/t)*t),s=[];if(e===i&&de(e))return[e];n=o;for(;n<=r;){s.push(n);n=M(n+t);if(n===a)break;a=n}return s},getMinorTickPositions:function(){var t,e,i,n=this,a=n.options,o=n.tickPositions,r=n.minorTickInterval,s=[],l=n.pointRangePadding||0,h=n.min-l,c=n.max+l,d=c-h;if(d&&d/r<n.len/3)if(n.isLog){i=o.length;for(e=1;e<i;e++)s=s.concat(n.getLogTickPositions(r,o[e-1],o[e],!0))}else if(n.isDatetimeAxis&&"auto"===a.minorTickInterval)s=s.concat(n.getTimeTicks(n.normalizeTimeTickInterval(r),h,c,a.startOfWeek));else for(t=h+(o[0]-h)%r;t<=c;t+=r)s.push(t);0!==s.length&&n.trimTicks(s,a.startOnTick,a.endOnTick);return s},adjustForMinRange:function(){var t,e,i,n,a,o,r,s,h,c=this,d=c.options,u=c.min,p=c.max,f=c.dataMax-c.dataMin>=c.minRange;if(c.isXAxis&&c.minRange===N&&!c.isLog)if(l(d.min)||l(d.max))c.minRange=null;else{Jt(c.series,function(t){a=t.xData;o=t.xIncrement?1:a.length-1;for(i=o;i>0;i--){n=a[i]-a[i-1];(e===N||n<e)&&(e=n)}});c.minRange=bt(5*e,c.dataMax-c.dataMin)}if(p-u<c.minRange){h=c.minRange;t=(h-p+u)/2;r=[u-t,ue(d.min,u-t)];f&&(r[2]=c.dataMin);u=C(r);s=[u+h,ue(d.max,u+h)];f&&(s[2]=c.dataMax);p=S(s);if(p-u<h){r[0]=p-h;r[1]=ue(d.min,p-h);u=C(r)}}c.min=u;c.max=p},getClosest:function(){var t;this.categories?t=1:Jt(this.series,function(e){var i=e.closestPointRange;!e.noSharedTooltip&&l(i)&&(t=l(t)?bt(t,i):i)});return t},setAxisTranslation:function(t){var e,i,n=this,a=n.max-n.min,r=n.axisPointRange||0,s=0,l=0,h=n.linkedParent,c=!!n.categories,d=n.transA,u=n.isXAxis;if(u||c||r){if(h){s=h.minPointOffset;l=h.pointRangePadding}else{e=n.getClosest();Jt(n.series,function(t){var i=c?1:u?ue(t.options.pointRange,e,0):n.axisPointRange||0,a=t.options.pointPlacement;r=yt(r,i);if(!n.single){s=yt(s,o(a)?0:i/2);l=yt(l,"on"===a?0:i)}})}i=n.ordinalSlope&&e?n.ordinalSlope/e:1;n.minPointOffset=s*=i;n.pointRangePadding=l*=i;n.pointRange=bt(r,a);u&&(n.closestPointRange=e)}t&&(n.oldTransA=d);n.translationSlope=n.transA=d=n.len/(a+l||1);n.transB=n.horiz?n.left:n.bottom;n.minPixelPadding=d*s},minFromRange:function(){return this.max-this.range},setTickInterval:function(t){var i,n,a,o,r,s,h,c=this,d=c.chart,u=c.options,p=c.isLog,f=c.log2lin,g=c.isDatetimeAxis,m=c.isXAxis,v=c.isLinked,y=u.maxPadding,b=u.minPadding,w=u.tickInterval,S=u.tickPixelInterval,C=c.categories,D=c.threshold,T=c.softThreshold;g||C||v||this.getTickAmount();s=ue(c.userMin,u.min);h=ue(c.userMax,u.max);if(v){c.linkedParent=d[c.coll][u.linkedTo];n=c.linkedParent.getExtremes();c.min=ue(n.min,n.dataMin);c.max=ue(n.max,n.dataMax);u.type!==c.linkedParent.options.type&&e(11,1)}else{if(!T&&l(D))if(c.dataMin>=D){o=D;b=0}else if(c.dataMax<=D){r=D;y=0}c.min=ue(s,o,c.dataMin);c.max=ue(h,r,c.dataMax)}if(p){!t&&bt(c.min,ue(c.dataMin,c.min))<=0&&e(10,1);c.min=M(f(c.min),15);c.max=M(f(c.max),15)}if(c.range&&l(c.max)){c.userMin=c.min=s=yt(c.min,c.minFromRange());c.userMax=h=c.max;c.range=null}oe(c,"foundExtremes");c.beforePadding&&c.beforePadding();c.adjustForMinRange();if(!C&&!c.axisPointRange&&!c.usePercentage&&!v&&l(c.min)&&l(c.max)){i=c.max-c.min;if(i){!l(s)&&b&&(c.min-=i*b);!l(h)&&y&&(c.max+=i*y)}}de(u.floor)&&(c.min=yt(c.min,u.floor));de(u.ceiling)&&(c.max=bt(c.max,u.ceiling));if(T&&l(c.dataMin)){D=D||0;!l(s)&&c.min<D&&c.dataMin>=D?c.min=D:!l(h)&&c.max>D&&c.dataMax<=D&&(c.max=D)}c.min===c.max||void 0===c.min||void 0===c.max?c.tickInterval=1:v&&!w&&S===c.linkedParent.options.tickPixelInterval?c.tickInterval=w=c.linkedParent.tickInterval:c.tickInterval=ue(w,this.tickAmount?(c.max-c.min)/yt(this.tickAmount-1,1):void 0,C?1:(c.max-c.min)*S/yt(c.len,S));m&&!t&&Jt(c.series,function(t){t.processData(c.min!==c.oldMin||c.max!==c.oldMax)});c.setAxisTranslation(!0);c.beforeSetTickPositions&&c.beforeSetTickPositions();c.postProcessTickInterval&&(c.tickInterval=c.postProcessTickInterval(c.tickInterval));c.pointRange&&!w&&(c.tickInterval=yt(c.pointRange,c.tickInterval));a=ue(u.minTickInterval,c.isDatetimeAxis&&c.closestPointRange);!w&&c.tickInterval<a&&(c.tickInterval=a);g||p||w||(c.tickInterval=k(c.tickInterval,null,x(c.tickInterval),ue(u.allowDecimals,!(c.tickInterval>.5&&c.tickInterval<5&&c.max>1e3&&c.max<9999)),!!this.tickAmount));!this.tickAmount&&this.len&&(c.tickInterval=c.unsquish());this.setTickPositions()},setTickPositions:function(){var t,e,i=this.options,n=i.tickPositions,a=i.tickPositioner,o=i.startOnTick,r=i.endOnTick;this.tickmarkOffset=this.categories&&"between"===i.tickmarkPlacement&&1===this.tickInterval?.5:0;this.minorTickInterval="auto"===i.minorTickInterval&&this.tickInterval?this.tickInterval/5:i.minorTickInterval;this.tickPositions=t=n&&n.slice();if(!t){t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,i.units),this.min,this.max,i.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max);t.length>this.len&&(t=[t[0],t.pop()]);this.tickPositions=t;if(a){a=a.apply(this,[this.min,this.max]);a&&(this.tickPositions=t=a)}}if(!this.isLinked){this.trimTicks(t,o,r);if(this.min===this.max&&l(this.min)&&!this.tickAmount){e=!0;this.min-=.5;this.max+=.5}this.single=e;n||a||this.adjustTickAmount()}},trimTicks:function(t,e,i){var n=t[0],a=t[t.length-1],o=this.minPointOffset||0;if(e)this.min=n;else for(;this.min-o>t[0];)t.shift();if(i)this.max=a;else for(;this.max+o<t[t.length-1];)t.pop();0===t.length&&l(n)&&t.push((a+n)/2)},alignToOthers:function(){var t,e={},i=this.options;!1!==this.chart.options.chart.alignTicks&&!1!==i.alignTicks&&Jt(this.chart[this.coll],function(i){var n=i.options,a=i.horiz,o=[a?n.left:n.top,n.width,n.height,n.pane].join(",");i.series.length&&(e[o]?t=!0:e[o]=1)});return t},getTickAmount:function(){var t=this.options,e=t.tickAmount,i=t.tickPixelInterval;!l(t.tickInterval)&&this.len<i&&!this.isRadial&&!this.isLog&&t.startOnTick&&t.endOnTick&&(e=2);!e&&this.alignToOthers()&&(e=vt(this.len/i)+1);if(e<4){this.finalTickAmt=e;e=5}this.tickAmount=e},adjustTickAmount:function(){var t,e,i=this.tickInterval,n=this.tickPositions,a=this.tickAmount,o=this.finalTickAmt,r=n&&n.length;if(r<a){for(;n.length<a;)n.push(M(n[n.length-1]+i));this.transA*=(r-1)/(a-1);this.max=n[n.length-1]}else if(r>a){this.tickInterval*=2;this.setTickPositions()}if(l(o)){t=e=n.length;for(;t--;)(3===o&&t%2==1||o<=2&&t>0&&t<e-1)&&n.splice(t,1);this.finalTickAmt=N}},setScale:function(){var t,e,i=this;i.oldMin=i.min;i.oldMax=i.max;i.oldAxisLength=i.len;i.setAxisSize();e=i.len!==i.oldAxisLength;Jt(i.series,function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(t=!0)});if(e||t||i.isLinked||i.forceRedraw||i.userMin!==i.oldUserMin||i.userMax!==i.oldUserMax||i.alignToOthers()){i.resetStacks&&i.resetStacks();i.forceRedraw=!1;i.getSeriesExtremes();i.setTickInterval();i.oldUserMin=i.userMin;i.oldUserMax=i.userMax;i.isDirty||(i.isDirty=e||i.min!==i.oldMin||i.max!==i.oldMax)}else i.cleanStacks&&i.cleanStacks()},setExtremes:function(t,e,i,n,a){var o=this,r=o.chart;i=ue(i,!0);Jt(o.series,function(t){delete t.kdTree});a=he(a,{min:t,max:e});oe(o,"setExtremes",a,function(){o.userMin=t;o.userMax=e;o.eventArgs=a;i&&r.redraw(n)})},zoom:function(t,e){var i=this.dataMin,n=this.dataMax,a=this.options,o=bt(i,ue(a.min,i)),r=yt(n,ue(a.max,n));if(!this.allowZoomOutside){l(i)&&t<=o&&(t=o);l(n)&&e>=r&&(e=r)}this.displayBtn=t!==N||e!==N;this.setExtremes(t,e,!1,N,{trigger:"zoom"});return!0},setAxisSize:function(){var t=this.chart,e=this.options,i=e.offsetLeft||0,n=e.offsetRight||0,a=this.horiz,o=ue(e.width,t.plotWidth-i+n),r=ue(e.height,t.plotHeight),s=ue(e.top,t.plotTop),l=ue(e.left,t.plotLeft+i),h=/%$/;h.test(r)&&(r=Math.round(parseFloat(r)/100*t.plotHeight));h.test(s)&&(s=Math.round(parseFloat(s)/100*t.plotHeight+t.plotTop));this.left=l;this.top=s;this.width=o;this.height=r;this.bottom=t.chartHeight-r-s;this.right=t.chartWidth-o-l;this.len=yt(a?o:r,0);this.pos=a?l:s},getExtremes:function(){var t=this,e=t.isLog,i=t.lin2log;return{min:e?M(i(t.min)):t.min,max:e?M(i(t.max)):t.max,dataMin:t.dataMin,dataMax:t.dataMax,userMin:t.userMin,userMax:t.userMax}},getThreshold:function(t){var e=this,i=e.isLog,n=e.lin2log,a=i?n(e.min):e.min,o=i?n(e.max):e.max;null===t?t=a:a>t?t=a:o<t&&(t=o);return e.translate(t,0,1,0,1)},autoLabelAlign:function(t){var e,i=(ue(t,0)-90*this.side+720)%360;e=i>15&&i<165?"right":i>195&&i<345?"left":"center";return e},tickSize:function(t){var e=this.options,i=e[t+"Length"],n=ue(e[t+"Width"],"tick"===t&&this.isXAxis?1:0);if(n&&i){"inside"===e[t+"Position"]&&(i=-i);return[i,n]}},labelMetrics:function(){return this.chart.renderer.fontMetrics(this.options.labels.style.fontSize,this.ticks[0]&&this.ticks[0].label)},unsquish:function(){var t,e,i,n=this.options.labels,a=this.horiz,o=this.tickInterval,r=o,s=this.len/(((this.categories?1:0)+this.max-this.min)/o),h=n.rotation,c=this.labelMetrics(),d=Number.MAX_VALUE,u=function(t){var e=t/(s||1);e=e>1?vt(e):1;return e*o};if(a){i=!n.staggerLines&&!n.step&&(l(h)?[h]:s<ue(n.autoRotationLimit,80)&&n.autoRotation);i&&Jt(i,function(i){var n;if(i===h||i&&i>=-90&&i<=90){e=u(xt(c.h/wt(Ct*i)));n=e+xt(i/360);if(n<d){d=n;t=i;r=e}}})}else n.step||(r=u(c.h));this.autoRotation=i;this.labelRotation=ue(t,h);return r},getSlotWidth:function(){var t=this.chart,e=this.horiz,i=this.options.labels,n=Math.max(this.tickPositions.length-(this.categories?0:1),1),a=t.margin[3];return e&&(i.step||0)<2&&!i.rotation&&(this.staggerLines||1)*t.plotWidth/n||!e&&(a&&a-t.spacing[3]||.33*t.chartWidth)},renderUnsquish:function(){var t,e,i,a,r=this.chart,s=r.renderer,l=this.tickPositions,h=this.ticks,c=this.options.labels,d=this.horiz,u=this.getSlotWidth(),p=yt(1,gt(u-2*(c.padding||5))),f={},g=this.labelMetrics(),m=c.style.textOverflow,v=0;o(c.rotation)||(f.rotation=c.rotation||0);if(this.autoRotation){Jt(l,function(t){t=h[t];t&&t.labelLength>v&&(v=t.labelLength)});v>p&&v>g.h?f.rotation=this.labelRotation:this.labelRotation=0}else if(u){t={width:p+Yt};if(!m){t.textOverflow="clip";i=l.length;for(;!d&&i--;){a=l[i];e=h[a].label;if(e){"ellipsis"===e.styles.textOverflow?e.css({textOverflow:"clip"}):h[a].labelLength>u&&e.css({width:u+"px"});e.getBBox().height>this.len/l.length-(g.h-g.f)&&(e.specCss={textOverflow:"ellipsis"})}}}}if(f.rotation){t={width:(v>.5*r.chartHeight?.33*r.chartHeight:r.chartHeight)+Yt};m||(t.textOverflow="ellipsis")}this.labelAlign=c.align||this.autoLabelAlign(this.labelRotation);this.labelAlign&&(f.align=this.labelAlign);Jt(l,function(e){var i=h[e],a=i&&i.label;if(a){a.attr(f);t&&a.css(n(t,a.specCss));delete a.specCss
;i.rotation=f.rotation}});this.tickRotCorr=s.rotCorr(g.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.hasVisibleSeries||l(this.min)&&l(this.max)&&!!this.tickPositions},getOffset:function(){var t,e,i,n,a,o,r,s,h=this,c=h.chart,d=c.renderer,u=h.options,p=h.tickPositions,f=h.ticks,g=h.horiz,m=h.side,v=c.inverted?[1,0,3,2][m]:m,y=0,b=0,x=u.title,k=u.labels,w=0,S=h.opposite,C=c.axisOffset,D=c.clipOffset,T=[-1,1,1,-1][m],M=h.axisParent,A=this.tickSize("tick");t=h.hasData();h.showAxis=e=t||ue(u.showEmpty,!0);h.staggerLines=h.horiz&&k.staggerLines;if(!h.axisGroup){h.gridGroup=d.g("grid").attr({zIndex:u.gridZIndex||1}).add(M);h.axisGroup=d.g("axis").attr({zIndex:u.zIndex||2}).add(M);h.labelGroup=d.g("axis-labels").attr({zIndex:k.zIndex||7}).addClass(Ut+h.coll.toLowerCase()+"-labels").add(M)}if(t||h.isLinked){Jt(p,function(t){f[t]?f[t].addLabel():f[t]=new R(h,t)});h.renderUnsquish();!1===k.reserveSpace||0!==m&&2!==m&&{1:"left",3:"right"}[m]!==h.labelAlign&&"center"!==h.labelAlign||Jt(p,function(t){w=yt(f[t].getLabelSize(),w)});if(h.staggerLines){w*=h.staggerLines;h.labelOffset=w*(h.opposite?-1:1)}}else for(o in f){f[o].destroy();delete f[o]}if(x&&x.text&&!1!==x.enabled){if(!h.axisTitle){r=x.textAlign;r||(r=(g?{low:"left",middle:"center",high:"right"}:{low:S?"right":"left",middle:"center",high:S?"left":"right"})[x.align]);h.axisTitle=d.text(x.text,0,0,x.useHTML).attr({zIndex:7,rotation:x.rotation||0,align:r}).addClass(Ut+this.coll.toLowerCase()+"-title").css(x.style).add(h.axisGroup);h.axisTitle.isNew=!0}if(e){y=h.axisTitle.getBBox()[g?"height":"width"];i=x.offset;b=l(i)?0:ue(x.margin,g?5:10)}h.axisTitle[e?"show":"hide"](!0)}h.offset=T*ue(u.offset,C[m]);h.tickRotCorr=h.tickRotCorr||{x:0,y:0};s=0===m?-h.labelMetrics().h:2===m?h.tickRotCorr.y:0;n=Math.abs(w)+b;if(w){n-=s;n+=T*(g?ue(k.y,h.tickRotCorr.y+8*T):k.x)}h.axisTitleMargin=ue(i,n);C[m]=yt(C[m],h.axisTitleMargin+y+T*h.offset,n,t&&p.length&&A?A[0]:0);a=u.offset?0:2*mt(u.lineWidth/2);D[v]=yt(D[v],a)},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,a=this.horiz,o=this.left+(i?this.width:0)+n,r=e.chartHeight-this.bottom-(i?this.height:0)+n;i&&(t*=-1);return e.renderer.crispLine([Vt,a?this.left:o,a?r:this.top,Gt,a?e.chartWidth-this.right:o,a?r:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,i=this.top,n=this.len,a=this.options.title,o=t?e:i,r=this.opposite,s=this.offset,l=a.x||0,h=a.y||0,c=this.chart.renderer.fontMetrics(a.style.fontSize).f,d={low:o+(t?0:n),middle:o+n/2,high:o+(t?n:0)}[a.align],u=(t?i+this.height:e)+(t?1:-1)*(r?-1:1)*this.axisTitleMargin+(2===this.side?c:0);return{x:t?d+l:u+(r?this.width:0)+s+l,y:t?u+h-(r?this.height:0)+s:d+h}},render:function(){var t,e,i,n=this,a=n.chart,o=a.renderer,r=n.options,s=n.isLog,l=n.lin2log,h=n.isLinked,c=n.tickPositions,u=n.axisTitle,p=n.ticks,f=n.minorTicks,g=n.alternateBands,m=r.stackLabels,v=r.alternateGridColor,y=n.tickmarkOffset,b=r.lineWidth,x=a.hasRendered,k=x&&de(n.oldMin),w=n.showAxis,S=P(o.globalAnimation);n.labelEdge.length=0;n.overlap=!1;Jt([p,f,g],function(t){var e;for(e in t)t[e].isActive=!1});if(n.hasData()||h){n.minorTickInterval&&!n.categories&&Jt(n.getMinorTickPositions(),function(t){f[t]||(f[t]=new R(n,t,"minor"));k&&f[t].isNew&&f[t].render(null,!0);f[t].render(null,!1,1)});if(c.length){Jt(c,function(t,e){if(!h||t>=n.min&&t<=n.max){p[t]||(p[t]=new R(n,t));k&&p[t].isNew&&p[t].render(e,!0,.1);p[t].render(e)}});if(y&&(0===n.min||n.single)){p[-1]||(p[-1]=new R(n,-1,null,!0));p[-1].render(-1)}}v&&Jt(c,function(t,o){i=c[o+1]!==N?c[o+1]+y:n.max-y;if(o%2==0&&t<n.max&&i<=n.max+(a.polar?-y:y)){g[t]||(g[t]=new ut.PlotLineOrBand(n));e=t+y;g[t].options={from:s?l(e):e,to:s?l(i):i,color:v};g[t].render();g[t].isActive=!0}});if(!n._addedPlotLB){Jt((r.plotLines||[]).concat(r.plotBands||[]),function(t){n.addPlotBandOrLine(t)});n._addedPlotLB=!0}}Jt([p,f,g],function(t){var e,i,n=[],o=S.duration,r=function(){i=n.length;for(;i--;)if(t[n[i]]&&!t[n[i]].isActive){t[n[i]].destroy();delete t[n[i]]}};for(e in t)if(!t[e].isActive){t[e].render(e,!1,0);t[e].isActive=!1;n.push(e)}d(r,t!==g&&a.hasRendered&&o?o:0)});if(b){t=n.getLinePath(b);n.axisLine?n.axisLine.animate({d:t}):n.axisLine=o.path(t).attr({stroke:r.lineColor,"stroke-width":b,zIndex:7}).add(n.axisGroup);n.axisLine[w?"show":"hide"](!0)}if(u&&w){u[u.isNew?"attr":"animate"](n.getTitlePosition());u.isNew=!1}m&&m.enabled&&n.renderStackTotals();n.isDirty=!1},redraw:function(){if(this.visible){this.render();Jt(this.plotLinesAndBands,function(t){t.render()})}Jt(this.series,function(t){t.isDirty=!0})},destroy:function(t){var e,i,n=this,a=n.stacks,o=n.plotLinesAndBands;t||ae(n);for(e in a){D(a[e]);a[e]=null}Jt([n.ticks,n.minorTicks,n.alternateBands],function(t){D(t)});i=o.length;for(;i--;)o[i].destroy();Jt(["stackTotalGroup","axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross"],function(t){n[t]&&(n[t]=n[t].destroy())});this._addedPlotLB=this.chart._labelPanes=this.ordinalSlope=void 0},drawCrosshair:function(t,e){var i,n,a,o,r,s=this.crosshair;t||(t=this.cross&&this.cross.e);if(this.crosshair&&!1!==(l(e)||!ue(s.snap,!0))){ue(s.snap,!0)?l(e)&&(n=this.isXAxis?e.plotX:this.len-e.plotY):n=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos;i=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:ue(e.stackY,e.y))||null:this.getPlotLinePath(null,null,null,null,n)||null;if(null===i){this.hideCrosshair();return}o=this.categories&&!this.isRadial;r=ue(s.width,o?this.transA:1);if(this.cross)this.cross.attr({d:i,visibility:"visible","stroke-width":r});else{a={"pointer-events":"none","stroke-width":r,stroke:s.color||(o?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:ue(s.zIndex,2)};s.dashStyle&&(a.dashstyle=s.dashStyle);this.cross=this.chart.renderer.path(i).attr(a).add()}this.cross.e=t}else this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}};he(we.prototype,q);we.prototype.getTimeTicks=function(t,e,i,n){var a,o,r=[],s={},h=X.global.useUTC,c=new j(e-v(e)),d=t.unitRange,u=t.count;if(l(e)){c[ot](d>=G.second?0:u*mt(c.getMilliseconds()/u));d>=G.second&&c[rt](d>=G.minute?0:u*mt(c.getSeconds()/u));d>=G.minute&&c[st](d>=G.hour?0:u*mt(c[J]()/u));d>=G.hour&&c[lt](d>=G.day?0:u*mt(c[tt]()/u));d>=G.day&&c[ht](d>=G.month?1:u*mt(c[it]()/u));if(d>=G.month){c[ct](d>=G.year?0:u*mt(c[nt]()/u));o=c[at]()}if(d>=G.year){o-=o%u;c[dt](o)}d===G.week&&c[ht](c[it]()-c[et]()+ue(n,1));a=1;if(K||Z){c=c.getTime();c=new j(c+v(c))}o=c[at]();for(var p=c.getTime(),f=c[nt](),g=c[it](),m=!h||!!Z,y=(G.day+(h?v(c):60*c.getTimezoneOffset()*1e3))%G.day;p<i;){r.push(p);d===G.year?p=Q(o+a*u,0):d===G.month?p=Q(o,f+a*u):!m||d!==G.day&&d!==G.week?p+=d*u:p=Q(o,f,g+a*u*(d===G.day?1:7));a++}r.push(p);Jt(te(r,function(t){return d<=G.hour&&t%G.day===y}),function(t){s[t]="day"})}r.info=he(t,{higherRanks:s,totalRange:d*u});return r};we.prototype.normalizeTimeTickInterval=function(t,e){var i,n,a=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],o=a[a.length-1],r=G[o[0]],s=o[1];for(n=0;n<a.length;n++){o=a[n];r=G[o[0]];s=o[1];if(a[n+1]){if(t<=(r*s[s.length-1]+G[a[n+1][0]])/2)break}}r===G.year&&t<5*r&&(s=[1,2,5]);i=k(t/r,s,"year"===o[0]?yt(x(t/r),1):1);return{unitRange:r,count:i,unitName:o[0]}};we.prototype.getLogTickPositions=function(t,e,i,n){var a=this,o=a.options,r=a.len,s=a.lin2log,l=a.log2lin,h=[];n||(a._minorAutoInterval=null);if(t>=.5){t=gt(t);h=a.getLinearTickPositions(t,e,i)}else if(t>=.08){var c,d,u,p,f,g,m,v=mt(e);c=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];for(d=v;d<i+1&&!m;d++){p=c.length;for(u=0;u<p&&!m;u++){f=l(s(d)*c[u]);f>e&&(!n||g<=i)&&g!==N&&h.push(g);g>i&&(m=!0);g=f}}}else{var y=s(e),b=s(i),w=o[n?"minorTickInterval":"tickInterval"],S="auto"===w?null:w,C=o.tickPixelInterval/(n?5:1),D=n?r/a.tickPositions.length:r;t=ue(S,a._minorAutoInterval,(b-y)*C/(D||1));t=k(t,null,x(t));h=ie(a.getLinearTickPositions(t,y,b),l);n||(a._minorAutoInterval=t/5)}n||(a.tickInterval=t);return h};we.prototype.log2lin=function(t){return ft.log(t)/ft.LN10};we.prototype.lin2log=function(t){return ft.pow(10,t)};var Se=ut.Tooltip=function(){this.init.apply(this,arguments)};Se.prototype={init:function(t,e){var i=e.borderWidth,n=e.style,o=a(n.padding);this.chart=t;this.options=e;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.label=t.renderer.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:o,fill:e.backgroundColor,"stroke-width":i,r:e.borderRadius,zIndex:8}).css(n).css({padding:0}).add().attr({y:-9e9});$t||this.label.shadow(e.shadow);this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy());clearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout)},move:function(t,e,i,n){var a=this,o=a.now,r=!1!==a.options.animation&&!a.isHidden&&(xt(t-o.x)>1||xt(e-o.y)>1),s=a.followPointer||a.len>1;he(o,{x:r?(2*o.x+t)/3:t,y:r?(o.y+e)/2:e,anchorX:s?N:r?(2*o.anchorX+i)/3:i,anchorY:s?N:r?(o.anchorY+n)/2:n});a.label.attr(o);if(r){clearTimeout(this.tooltipTimeout);this.tooltipTimeout=setTimeout(function(){a&&a.move(t,e,i,n)},32)}},hide:function(t){var e=this;clearTimeout(this.hideTimer);t=ue(t,this.options.hideDelay,500);this.isHidden||(this.hideTimer=d(function(){e.label[t?"fadeOut":"hide"]();e.isHidden=!0},t))},getAnchor:function(t,e){var i,n,a,o=this.chart,r=o.inverted,s=o.plotTop,l=o.plotLeft,h=0,d=0;t=c(t);i=t[0].tooltipPos;if(this.followPointer&&e){e.chartX===N&&(e=o.pointer.normalize(e));i=[e.chartX-o.plotLeft,e.chartY-s]}if(!i){Jt(t,function(t){n=t.series.yAxis;a=t.series.xAxis;h+=t.plotX+(!r&&a?a.left-l:0);d+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!r&&n?n.top-s:0)});h/=t.length;d/=t.length;i=[r?o.plotWidth-d:h,this.shared&&!r&&t.length>1&&e?e.chartY-s:r?o.plotHeight-h:d]}return ie(i,gt)},getPosition:function(t,e,i){var n,a=this.chart,o=this.distance,r={},s=i.h||0,l=["y",a.chartHeight,e,i.plotY+a.plotTop,a.plotTop,a.plotTop+a.plotHeight],h=["x",a.chartWidth,t,i.plotX+a.plotLeft,a.plotLeft,a.plotLeft+a.plotWidth],c=!this.followPointer&&ue(i.ttBelow,!a.inverted==!!i.negative),d=function(t,e,i,n,a,l){var h=i<n-o,d=n+o+i<e,u=n-o-i,p=n+o;if(c&&d)r[t]=p;else if(!c&&h)r[t]=u;else if(h)r[t]=bt(l-i,u-s<0?u:u-s);else{if(!d)return!1;r[t]=yt(a,p+s+i>e?p:p+s)}},u=function(t,e,i,n){var a;n<o||n>e-o?a=!1:r[t]=n<i/2?1:n>e-i/2?e-i-2:n-i/2;return a},p=function(t){var e=l;l=h;h=e;n=t},f=function(){if(!1!==d.apply(0,l)){if(!1===u.apply(0,h)&&!n){p(!0);f()}}else if(n)r.x=r.y=0;else{p(!0);f()}};(a.inverted||this.len>1)&&p();f();return r},defaultFormatter:function(t){var e,i=this.points||c(this);e=[t.tooltipFooterHeaderFormatter(i[0])];e=e.concat(t.bodyFormatter(i));e.push(t.tooltipFooterHeaderFormatter(i[0],!0));return e.join("")},refresh:function(t,e){var i,n,a,o,r,s,l=this,h=l.chart,d=l.label,u=l.options,p={},f=[],g=u.formatter||l.defaultFormatter,m=h.hoverPoints,v=l.shared;clearTimeout(this.hideTimer);l.followPointer=c(t)[0].series.tooltipOptions.followPointer;a=l.getAnchor(t,e);i=a[0];n=a[1];if(!v||t.series&&t.series.noSharedTooltip)p=t.getLabelConfig();else{h.hoverPoints=t;m&&Jt(m,function(t){t.setState()});Jt(t,function(t){t.setState("hover");f.push(t.getLabelConfig())});p={x:t[0].category,y:t[0].y};p.points=f;this.len=f.length;t=t[0]}o=g.call(p,l);s=t.series;this.distance=ue(s.tooltipOptions.distance,16);if(!1===o)this.hide();else{if(l.isHidden){se(d);d.attr("opacity",1).show()}d.attr({text:o});r=u.borderColor||t.color||s.color||"#606060";d.attr({stroke:r});l.updatePosition({plotX:i,plotY:n,negative:t.negative,ttBelow:t.ttBelow,h:a[2]||0});this.isHidden=!1}oe(h,"tooltipRefresh",{text:o,x:i+h.plotLeft,y:n+h.plotTop,borderColor:r})},updatePosition:function(t){var e=this.chart,i=this.label,n=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(gt(n.x),gt(n.y||0),t.plotX+e.plotLeft,t.plotY+e.plotTop)},getXDateFormat:function(t,e,i){var n,a,o,r=e.dateTimeLabelFormats,s=i&&i.closestPointRange,l="01-01 00:00:00.000",h={millisecond:15,second:12,minute:9,hour:6,day:3},c="millisecond";if(s){o=V("%m-%d %H:%M:%S.%L",t.x);for(a in G){if(s===G.week&&+V("%w",t.x)===i.options.startOfWeek&&o.substr(6)===l.substr(6)){a="week";break}if(G[a]>s){a=c;break}if(h[a]&&o.substr(h[a])!==l.substr(h[a]))break;"week"!==a&&(c=a)}a&&(n=r[a])}else n=r.day;return n||r.year},tooltipFooterHeaderFormatter:function(t,e){var i=e?"footer":"header",n=t.series,a=n.tooltipOptions,o=a.xDateFormat,r=n.xAxis,s=r&&"datetime"===r.options.type&&de(t.key),l=a[i+"Format"];s&&!o&&(o=this.getXDateFormat(t,a,r));s&&o&&(l=l.replace("{point.key}","{point.key:"+o+"}"));return b(l,{point:t,series:n})},bodyFormatter:function(t){return ie(t,function(t){var e=t.series.tooltipOptions;return(e.pointFormatter||t.point.tooltipFormatter).call(t.point,e.pointFormat)})}};var Ce;U=pt&&pt.documentElement.ontouchstart!==N;var De=ut.Pointer=function(t,e){this.init(t,e)};De.prototype={init:function(t,e){var i,n,a=e.chart,o=a.events,r=$t?"":a.zoomType,s=t.inverted;this.options=e;this.chart=t;this.zoomX=i=/x/.test(r);this.zoomY=n=/y/.test(r);this.zoomHor=i&&!s||n&&s;this.zoomVert=n&&!s||i&&s;this.hasZoom=i||n;this.runChartClick=o&&!!o.click;this.pinchDown=[];this.lastValidTouch={};if(ut.Tooltip&&e.tooltip.enabled){t.tooltip=new Se(t,e.tooltip);this.followTouchMove=ue(e.tooltip.followTouchMove,!0)}this.setDOMEvents()},normalize:function(e,i){var n,a,o;e=e||t.event;e.target||(e.target=e.srcElement);o=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e;i||(this.chartPosition=i=ee(this.chart.container));if(o.pageX===N){n=yt(e.x,e.clientX-i.left);a=e.y}else{n=o.pageX-i.left;a=o.pageY-i.top}return he(e,{chartX:gt(n),chartY:gt(a)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};Jt(this.chart.axes,function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})});return e},runPointActions:function(t){var e,i,n,a,o,r,s,l=this,h=l.chart,c=h.series,d=h.tooltip,u=!!d&&d.shared,p=h.hoverPoint,f=h.hoverSeries,g=[Number.MAX_VALUE,Number.MAX_VALUE],m=[],v=[];if(!u&&!f)for(i=0;i<c.length;i++)!c[i].directTouch&&c[i].options.stickyTracking||(c=[]);o=f&&(u?f.noSharedTooltip:f.directTouch);if(o&&p)v=[p];else{Jt(c,function(e){a=e.noSharedTooltip&&u;r=!u&&e.directTouch;if(e.visible&&!a&&!r&&ue(e.options.enableMouseTracking,!0)){s=e.searchPoint(t,!a&&1===e.kdDimensions);s&&s.series&&m.push(s)}});Jt(m,function(t){t&&Jt(["dist","distX"],function(e,i){if(de(t[e])){var n=t[e]<g[i],a=t[e]===g[i]&&t.series.group.zIndex>=v[i].series.group.zIndex;if(n||a){g[i]=t[e];v[i]=t}}})})}if(u){i=m.length;for(;i--;)(m[i].clientX!==v[1].clientX||m[i].series.noSharedTooltip)&&m.splice(i,1)}if(v[0]&&(v[0]!==this.prevKDPoint||d&&d.isHidden))if(u&&!v[0].series.noSharedTooltip){m.length&&d&&d.refresh(m,t);Jt(m,function(e){e.onMouseOver(t,e!==(f&&f.directTouch&&p||v[0]))});this.prevKDPoint=v[1]}else{d&&d.refresh(v[0],t);f&&f.directTouch||v[0].onMouseOver(t);this.prevKDPoint=v[0]}else{e=f&&f.tooltipOptions.followPointer;if(d&&e&&!d.isHidden){n=d.getAnchor([{}],t);d.updatePosition({plotX:n[0],plotY:n[1]})}}if(!l._onDocumentMouseMove){l._onDocumentMouseMove=function(t){zt[Ce]&&zt[Ce].pointer.onDocumentMouseMove(t)};ne(pt,"mousemove",l._onDocumentMouseMove)}Jt(u?m:[ue(p,v[1])],function(e){Jt(h.axes,function(i){e&&e.series[i.coll]!==i||i.drawCrosshair(t,e)})})},reset:function(t,e){var i=this,n=i.chart,a=n.hoverSeries,o=n.hoverPoint,r=n.hoverPoints,s=n.tooltip,l=s&&s.shared?r:o;t&&l&&Jt(c(l),function(e){e.series.isCartesian&&void 0===e.plotX&&(t=!1)});if(t){if(s&&l){s.refresh(l);if(o){o.setState(o.state,!0);Jt(n.axes,function(t){t.crosshair&&t.drawCrosshair(null,o)})}}}else{o&&o.onMouseOut();r&&Jt(r,function(t){t.setState()});a&&a.onMouseOut();s&&s.hide(e);if(i._onDocumentMouseMove){ae(pt,"mousemove",i._onDocumentMouseMove);i._onDocumentMouseMove=null}Jt(n.axes,function(t){t.hideCrosshair()});i.hoverX=i.prevKDPoint=n.hoverPoints=n.hoverPoint=null}},scaleGroups:function(t,e){var i,n=this.chart;Jt(n.series,function(a){i=t||a.getPlotBox();if(a.xAxis&&a.xAxis.zoomEnabled){a.group.attr(i);if(a.markerGroup){a.markerGroup.attr(i);a.markerGroup.clip(e?n.clipRect:null)}a.dataLabelsGroup&&a.dataLabelsGroup.attr(i)}});n.clipRect.attr(e||n.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type;e.cancelClick=!1;e.mouseDownX=this.mouseDownX=t.chartX;e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,i,n=this.chart,a=n.options.chart,o=t.chartX,r=t.chartY,s=this.zoomHor,l=this.zoomVert,h=n.plotLeft,c=n.plotTop,d=n.plotWidth,u=n.plotHeight,p=this.selectionMarker,f=this.mouseDownX,g=this.mouseDownY,m=a.panKey&&t[a.panKey+"Key"];if(!p||!p.touch){o<h?o=h:o>h+d&&(o=h+d);r<c?r=c:r>c+u&&(r=c+u);this.hasDragged=Math.sqrt(Math.pow(f-o,2)+Math.pow(g-r,2));if(this.hasDragged>10){e=n.isInsidePlot(f-h,g-c);n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!m&&(p||(this.selectionMarker=p=n.renderer.rect(h,c,s?1:d,l?1:u,0).attr({fill:a.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()));if(p&&s){i=o-f;p.attr({width:xt(i),x:(i>0?0:i)+f})}if(p&&l){i=r-g;p.attr({height:xt(i),y:(i>0?0:i)+g})}e&&!p&&a.panning&&n.pan(t,a.panning)}}},drop:function(t){var e=this,i=this.chart,n=this.hasPinched;if(this.selectionMarker){var a,o={originalEvent:t,xAxis:[],yAxis:[]},r=this.selectionMarker,s=r.attr?r.attr("x"):r.x,h=r.attr?r.attr("y"):r.y,c=r.attr?r.attr("width"):r.width,d=r.attr?r.attr("height"):r.height;if(this.hasDragged||n){Jt(i.axes,function(i){if(i.zoomEnabled&&l(i.min)&&(n||e[{xAxis:"zoomX",yAxis:"zoomY"}[i.coll]])){var r=i.horiz,u="touchend"===t.type?i.minPixelPadding:0,p=i.toValue((r?s:h)+u),f=i.toValue((r?s+c:h+d)-u);o[i.coll].push({axis:i,min:bt(p,f),max:yt(p,f)});a=!0}});a&&oe(i,"selection",o,function(t){i.zoom(he(t,n?{animation:!1}:null))})}this.selectionMarker=this.selectionMarker.destroy();n&&this.scaleGroups()}if(i){u(i.container,{cursor:i._cursor});i.cancelClick=this.hasDragged>10;i.mouseIsDown=this.hasDragged=this.hasPinched=!1;this.pinchDown=[]}},onContainerMouseDown:function(t){t=this.normalize(t);t.preventDefault&&t.preventDefault();this.dragStart(t)},onDocumentMouseUp:function(t){zt[Ce]&&zt[Ce].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition;t=this.normalize(t,i);!i||this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||this.reset()},onContainerMouseLeave:function(t){var e=zt[Ce];if(e&&(t.relatedTarget||t.toElement)){e.pointer.reset();e.pointer.chartPosition=null}},onContainerMouseMove:function(t){var e=this.chart;l(Ce)&&zt[Ce]&&zt[Ce].mouseIsDown||(Ce=e.index);t=this.normalize(t);t.returnValue=!1;"mousedown"===e.mouseIsDown&&this.drag(t);!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||e.openMenu||this.runPointActions(t)},inClass:function(t,e){for(var i;t;){i=h(t,"class");if(i){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf(Ut+"container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,i=t.relatedTarget||t.toElement;!e||!i||e.options.stickyTracking||this.inClass(i,Ut+"tooltip")||this.inClass(i,Ut+"series-"+e.index)||e.onMouseOut()},onContainerClick:function(t){var e=this.chart,i=e.hoverPoint,n=e.plotLeft,a=e.plotTop;t=this.normalize(t);if(!e.cancelClick)if(i&&this.inClass(t.target,Ut+"tracker")){oe(i.series,"click",he(t,{point:i}));e.hoverPoint&&i.firePointEvent("click",t)}else{he(t,this.getCoordinates(t));e.isInsidePlot(t.chartX-n,t.chartY-a)&&oe(e,"click",t)}},setDOMEvents:function(){var t=this,e=t.chart.container;e.onmousedown=function(e){t.onContainerMouseDown(e)};e.onmousemove=function(e){t.onContainerMouseMove(e)};e.onclick=function(e){t.onContainerClick(e)};ne(e,"mouseleave",t.onContainerMouseLeave);1===Ht&&ne(pt,"mouseup",t.onDocumentMouseUp);if(U){e.ontouchstart=function(e){t.onContainerTouchStart(e)};e.ontouchmove=function(e){t.onContainerTouchMove(e)};1===Ht&&ne(pt,"touchend",t.onDocumentTouchEnd)}},destroy:function(){var t;ae(this.chart.container,"mouseleave",this.onContainerMouseLeave);if(!Ht){ae(pt,"mouseup",this.onDocumentMouseUp);ae(pt,"touchend",this.onDocumentTouchEnd)}clearInterval(this.tooltipTimeout);for(t in this)this[t]=null}};he(ut.Pointer.prototype,{pinchTranslate:function(t,e,i,n,a,o){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,t,e,i,n,a,o);(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,t,e,i,n,a,o)},pinchTranslateDirection:function(t,e,i,n,a,o,r,s){var l,h,c,d,u,p,f=this.chart,g=t?"x":"y",m=t?"X":"Y",v="chart"+m,y=t?"width":"height",b=f["plot"+(t?"Left":"Top")],x=s||1,k=f.inverted,w=f.bounds[t?"h":"v"],S=1===e.length,C=e[0][v],D=i[0][v],T=!S&&e[1][v],M=!S&&i[1][v],A=function(){!S&&xt(C-T)>20&&(x=s||xt(D-M)/xt(C-T));c=(b-D)/x+C;l=f["plot"+(t?"Width":"Height")]/x};A();h=c;if(h<w.min){h=w.min;d=!0}else if(h+l>w.max){h=w.max-l;d=!0}if(d){D-=.8*(D-r[g][0]);S||(M-=.8*(M-r[g][1]));A()}else r[g]=[D,M];if(!k){o[g]=c-b;o[y]=l}p=k?t?"scaleY":"scaleX":"scale"+m;u=k?1/x:x;a[y]=l;a[g]=h;n[p]=x;n["translate"+m]=u*b+(D-u*C)},pinch:function(t){var e=this,i=e.chart,n=e.pinchDown,a=t.touches,o=a.length,r=e.lastValidTouch,s=e.hasZoom,l=e.selectionMarker,h={},c=1===o&&(e.inClass(t.target,Ut+"tracker")&&i.runTrackerClick||e.runChartClick),d={};o>1&&(e.initiated=!0);s&&e.initiated&&!c&&t.preventDefault();ie(a,function(t){return e.normalize(t)});if("touchstart"===t.type){Jt(a,function(t,e){n[e]={chartX:t.chartX,chartY:t.chartY}});r.x=[n[0].chartX,n[1]&&n[1].chartX];r.y=[n[0].chartY,n[1]&&n[1].chartY];Jt(i.axes,function(t){if(t.zoomEnabled){var e=i.bounds[t.horiz?"h":"v"],n=t.minPixelPadding,a=t.toPixels(ue(t.options.min,t.dataMin)),o=t.toPixels(ue(t.options.max,t.dataMax)),r=bt(a,o),s=yt(a,o);e.min=bt(t.pos,r-n);e.max=yt(t.pos+t.len,s+n)}});e.res=!0}else if(n.length){l||(e.selectionMarker=l=he({destroy:Bt,touch:!0},i.plotBox));e.pinchTranslate(n,a,h,l,d,r);e.hasPinched=s;e.scaleGroups(h,d);if(!s&&e.followTouchMove&&1===o)this.runPointActions(e.normalize(t));else if(e.res){e.res=!1;this.reset(!1,0)}}},touch:function(t,e){var i,n,a=this.chart;Ce=a.index;if(1===t.touches.length){t=this.normalize(t);if(a.isInsidePlot(t.chartX-a.plotLeft,t.chartY-a.plotTop)&&!a.openMenu){e&&this.runPointActions(t);if("touchmove"===t.type){n=this.pinchDown;i=!!n[0]&&Math.sqrt(Math.pow(n[0].chartX-t.chartX,2)+Math.pow(n[0].chartY-t.chartY,2))>=4}ue(i,!0)&&this.pinch(t)}else e&&this.reset()}else 2===t.touches.length&&this.pinch(t)},onContainerTouchStart:function(t){this.touch(t,!0)},onContainerTouchMove:function(t){this.touch(t)},onDocumentTouchEnd:function(t){zt[Ce]&&zt[Ce].pointer.drop(t)}});if(t.PointerEvent||t.MSPointerEvent){var Te={},Me=!!t.PointerEvent,Ae=function(){var t,e=[];e.item=function(t){return this[t]};for(t in Te)Te.hasOwnProperty(t)&&e.push({pageX:Te[t].pageX,pageY:Te[t].pageY,target:Te[t].target});return e},Pe=function(t,e,i,n){var a;if(("touch"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_TOUCH)&&zt[Ce]){n(t);a=zt[Ce].pointer;a[e]({type:i,target:t.currentTarget,preventDefault:Bt,touches:Ae()})}};he(De.prototype,{onContainerPointerDown:function(t){Pe(t,"onContainerTouchStart","touchstart",function(t){Te[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){Pe(t,"onContainerTouchMove","touchmove",function(t){Te[t.pointerId]={pageX:t.pageX,pageY:t.pageY};Te[t.pointerId].target||(Te[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){Pe(t,"onDocumentTouchEnd","touchend",function(t){delete Te[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,Me?"pointerdown":"MSPointerDown",this.onContainerPointerDown);t(this.chart.container,Me?"pointermove":"MSPointerMove",this.onContainerPointerMove);t(pt,Me?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}});pe(De.prototype,"init",function(t,e,i){t.call(this,e,i);this.hasZoom&&u(e.container,{"-ms-touch-action":Xt,"touch-action":Xt})});pe(De.prototype,"setDOMEvents",function(t){t.apply(this);(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(ne)});pe(De.prototype,"destroy",function(t){this.batchMSEvents(ae);t.call(this)})}var Le=ut.Legend=function(t,e){this.init(t,e)};Le.prototype={init:function(t,e){var i,a=this,o=e.itemStyle,r=e.itemMarginTop||0;this.options=e;if(e.enabled){a.itemStyle=o;a.itemHiddenStyle=n(o,e.itemHiddenStyle);a.itemMarginTop=r;a.padding=i=ue(e.padding,8);a.initialItemX=i;a.initialItemY=i-5;a.maxItemWidth=0;a.chart=t;a.itemHeight=0;a.symbolWidth=ue(e.symbolWidth,16);a.pages=[];a.render();ne(a.chart,"endResize",function(){a.positionCheckboxes()})}},colorizeItem:function(t,e){var i,n,a=this,o=a.options,r=t.legendItem,s=t.legendLine,l=t.legendSymbol,h=a.itemHiddenStyle.color,c=e?o.itemStyle.color:h,d=e?t.legendColor||t.color||"#CCC":h,u=t.options&&t.options.marker,p={fill:d};r&&r.css({fill:c,color:c});s&&s.attr({stroke:d});if(l){if(u&&l.isMarker){p.stroke=d;u=t.convertAttribs(u);for(i in u){n=u[i];n!==N&&(p[i]=n)}}l.attr(p)}},positionItem:function(t){var e=this,i=e.options,n=i.symbolPadding,a=!i.rtl,o=t._legendItemPos,r=o[0],s=o[1],l=t.checkbox,h=t.legendGroup;h&&h.element&&h.translate(a?r:e.legendWidth-r-2*n-4,s);if(l){l.x=r;l.y=s}},destroyItem:function(t){var e=t.checkbox;Jt(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())});e&&T(t.checkbox)},destroy:function(){var t=this,e=t.group,i=t.box;i&&(t.box=i.destroy());e&&(t.group=e.destroy())},positionCheckboxes:function(t){var e,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight,a=this.titleHeight;if(i){e=i.translateY;Jt(this.allItems,function(o){var r,s=o.checkbox;if(s){r=e+a+s.y+(t||0)+3;u(s,{left:i.translateX+o.checkboxOffset+s.x-20+Yt,top:r+Yt,display:r>e-6&&r<e+n-6?"":Xt})}})}},renderTitle:function(){var t,e=this.options,i=this.padding,n=e.title,a=0;if(n.text){this.title||(this.title=this.chart.renderer.label(n.text,i-3,i-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group));t=this.title.getBBox();a=t.height;this.offsetWidth=t.width;this.contentGroup.attr({translateY:a})}this.titleHeight=a},setText:function(t){var e=this.options;t.legendItem.attr({text:e.labelFormat?b(e.labelFormat,t):e.labelFormatter.call(t)})},renderItem:function(t){var e,i,a,o=this,r=o.chart,s=r.renderer,l=o.options,h="horizontal"===l.layout,c=o.symbolWidth,d=l.symbolPadding,u=o.itemStyle,p=o.itemHiddenStyle,f=o.padding,g=h?ue(l.itemDistance,20):0,m=!l.rtl,v=l.width,y=l.itemMarginBottom||0,b=o.itemMarginTop,x=o.initialItemX,k=t.legendItem,w=t.series&&t.series.drawLegendSymbol?t.series:t,S=w.options,C=o.createCheckboxForItem&&S&&S.showCheckbox,D=l.useHTML;if(!k){t.legendGroup=s.g("legend-item").attr({zIndex:1}).add(o.scrollGroup);t.legendItem=k=s.text("",m?c+d:-d,o.baseline||0,D).css(n(t.visible?u:p)).attr({align:m?"left":"right",zIndex:2}).add(t.legendGroup);if(!o.baseline){o.fontMetrics=s.fontMetrics(u.fontSize,k);o.baseline=o.fontMetrics.f+3+b;k.attr("y",o.baseline)}w.drawLegendSymbol(o,t);o.setItemEvents&&o.setItemEvents(t,k,D,u,p);C&&o.createCheckboxForItem(t)}o.colorizeItem(t,t.visible);o.setText(t);i=k.getBBox();a=t.checkboxOffset=l.itemWidth||t.legendItemWidth||c+d+i.width+g+(C?20:0);o.itemHeight=e=gt(t.legendItemHeight||i.height);if(h&&o.itemX-x+a>(v||r.chartWidth-2*f-x-l.x)){o.itemX=x;o.itemY+=b+o.lastLineHeight+y;o.lastLineHeight=0}o.maxItemWidth=yt(o.maxItemWidth,a);o.lastItemY=b+o.itemY+y;o.lastLineHeight=yt(e,o.lastLineHeight);t._legendItemPos=[o.itemX,o.itemY];if(h)o.itemX+=a;else{o.itemY+=b+e+y;o.lastLineHeight=e}o.offsetWidth=v||yt((h?o.itemX-x-g:a)+f,o.offsetWidth)},getAllItems:function(){var t=[];Jt(this.chart.series,function(e){var i=e.options;ue(i.showInLegend,!l(i.linkedTo)&&N,!0)&&(t=t.concat(e.legendItems||("point"===i.legendType?e.data:e)))});return t},adjustMargins:function(t,e){var i=this.chart,n=this.options,a=n.align.charAt(0)+n.verticalAlign.charAt(0)+n.layout.charAt(0);n.floating||Jt([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(o,r){o.test(a)&&!l(t[r])&&(i[jt[r]]=yt(i[jt[r]],i.legend[(r+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][r]*n[r%2?"x":"y"]+ue(n.margin,12)+e[r]))})},render:function(){var t,e,i,n,a=this,o=a.chart,r=o.renderer,s=a.group,l=a.box,h=a.options,c=a.padding,d=h.borderWidth,u=h.backgroundColor;a.itemX=a.initialItemX;a.itemY=a.initialItemY;a.offsetWidth=0;a.lastItemY=0;if(!s){a.group=s=r.g("legend").attr({zIndex:7}).add();a.contentGroup=r.g().attr({zIndex:1}).add(s);a.scrollGroup=r.g().add(a.contentGroup)}a.renderTitle();t=a.getAllItems();w(t,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)});h.reversed&&t.reverse();a.allItems=t;a.display=e=!!t.length;a.lastLineHeight=0;Jt(t,function(t){a.renderItem(t)});i=(h.width||a.offsetWidth)+c;n=a.lastItemY+a.lastLineHeight+a.titleHeight;n=a.handleOverflow(n);n+=c;if(d||u){if(l){if(i>0&&n>0){l[l.isNew?"attr":"animate"](l.crisp({width:i,height:n}));l.isNew=!1}}else{a.box=l=r.rect(0,0,i,n,h.borderRadius,d||0).attr({stroke:h.borderColor,"stroke-width":d||0,fill:u||Xt}).add(s).shadow(h.shadow);l.isNew=!0}l[e?"show":"hide"]()}a.legendWidth=i;a.legendHeight=n;Jt(t,function(t){a.positionItem(t)});e&&s.align(he({width:i,height:n},h),!0,"spacingBox");o.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,i,n=this,a=this.chart,o=a.renderer,r=this.options,s=r.y,l="top"===r.verticalAlign,h=a.spacingBox.height+(l?-s:s)-this.padding,c=r.maxHeight,d=this.clipRect,u=r.navigation,p=ue(u.animation,!0),f=u.arrowSize||12,g=this.nav,m=this.pages,v=this.padding,y=this.allItems,b=function(t){d.attr({height:t});n.contentGroup.div&&(n.contentGroup.div.style.clip="rect("+v+"px,9999px,"+(v+t)+"px,0)")};"horizontal"===r.layout&&(h/=2);c&&(h=bt(h,c));m.length=0;if(t>h&&!1!==u.enabled){this.clipHeight=e=yt(h-20-this.titleHeight-v,0);this.currentPage=ue(this.currentPage,1);this.fullHeight=t;Jt(y,function(t,n){var a=t._legendItemPos[1],o=gt(t.legendItem.getBBox().height),r=m.length;if(!r||a-m[r-1]>e&&(i||a)!==m[r-1]){m.push(i||a);r++}n===y.length-1&&a+o-m[r-1]>e&&m.push(a);a!==i&&(i=a)});if(!d){d=n.clipRect=o.clipRect(0,v,9999,0);n.contentGroup.clip(d)}b(e);if(!g){this.nav=g=o.g().attr({zIndex:1}).add(this.group);this.up=o.symbol("triangle",0,0,f,f).on("click",function(){n.scroll(-1,p)}).add(g);this.pager=o.text("",15,10).css(u.style).add(g);this.down=o.symbol("triangle-down",0,0,f,f).on("click",function(){n.scroll(1,p)}).add(g)}n.scroll(0);t=h}else if(g){b(a.chartHeight);g.hide();this.scrollGroup.attr({translateY:1});this.clipHeight=0}return t},scroll:function(t,e){var i,n=this.pages,a=n.length,o=this.currentPage+t,r=this.clipHeight,s=this.options.navigation,l=s.activeColor,h=s.inactiveColor,c=this.pager,d=this.padding;o>a&&(o=a);if(o>0){e!==N&&A(e,this.chart);this.nav.attr({translateX:d,translateY:r+this.padding+7+this.titleHeight,visibility:"visible"});this.up.attr({fill:1===o?h:l}).css({cursor:1===o?"default":"pointer"});c.attr({text:o+"/"+a});this.down.attr({x:18+this.pager.getBBox().width,fill:o===a?h:l}).css({cursor:o===a?"default":"pointer"});i=-n[o-1]+this.initialItemY;this.scrollGroup.animate({translateY:i});this.currentPage=o;this.positionCheckboxes(i)}}};var Ie=ut.LegendSymbolMixin={drawRectangle:function(t,e){var i=t.options.symbolHeight||t.fontMetrics.f;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-i+1,t.symbolWidth,i,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,i,n,a=this.options,o=a.marker,r=t.symbolWidth,s=this.chart.renderer,l=this.legendGroup,h=t.baseline-gt(.3*t.fontMetrics.b);if(a.lineWidth){n={"stroke-width":a.lineWidth};a.dashStyle&&(n.dashstyle=a.dashStyle);this.legendLine=s.path([Vt,0,h,Gt,r,h]).attr(n).add(l)}if(o&&!1!==o.enabled){e=o.radius;this.legendSymbol=i=s.symbol(this.symbol,r/2-e,h-e,2*e,2*e,o).add(l);i.isMarker=!0}}};(/Trident\/7\.0/.test(Dt)||Lt)&&pe(Le.prototype,"positionItem",function(t,e){var i=this,n=function(){
e._legendItemPos&&t.call(i,e)};n();setTimeout(n)});var Oe=ut.Chart=function(){this.getArgs.apply(this,arguments)};ut.chart=function(t,e,i){return new Oe(t,e,i)};Oe.prototype={callbacks:[],getArgs:function(){var t=[].slice.call(arguments);(o(t[0])||t[0].nodeName)&&(this.renderTo=t.shift());this.init(t[0],t[1])},init:function(t,e){var i,a=t.series;t.series=null;i=n(X,t);i.series=t.series=a;this.userOptions=t;var o=i.chart;this.margin=this.splashArray("margin",o);this.spacing=this.splashArray("spacing",o);var r=o.events;this.bounds={h:{},v:{}};this.callback=e;this.isResizing=0;this.options=i;this.axes=[];this.series=[];this.hasCartesianSeries=o.showAxes;var s,l=this;l.index=zt.length;zt.push(l);Ht++;!1!==o.reflow&&ne(l,"load",function(){l.initReflow()});if(r)for(s in r)ne(l,s,r[s]);l.xAxis=[];l.yAxis=[];l.animation=!$t&&ue(o.animation,!0);l.pointCount=l.colorCounter=l.symbolCounter=0;l.firstRender()},initSeries:function(t){var i,n=this,a=n.options.chart,o=t.type||a.type||a.defaultSeriesType,r=Qt[o];r||e(17,!0);i=new r;i.init(this,t);return i},isInsidePlot:function(t,e,i){var n=i?e:t,a=i?t:e;return n>=0&&n<=this.plotWidth&&a>=0&&a<=this.plotHeight},redraw:function(t){var e,i,n,a=this,o=a.axes,r=a.series,s=a.pointer,l=a.legend,h=a.isDirtyLegend,c=a.hasCartesianSeries,d=a.isDirtyBox,u=r.length,p=u,f=a.renderer,g=f.isHidden(),m=[];A(t,a);g&&a.cloneRenderTo();a.layOutTitles();for(;p--;){n=r[p];if(n.options.stacking){e=!0;if(n.isDirty){i=!0;break}}}if(i){p=u;for(;p--;){n=r[p];n.options.stacking&&(n.isDirty=!0)}}Jt(r,function(t){if(t.isDirty&&"point"===t.options.legendType){t.updateTotals&&t.updateTotals();h=!0}t.isDirtyData&&oe(t,"updatedData")});if(h&&l.options.enabled){l.render();a.isDirtyLegend=!1}e&&a.getStacks();if(c&&!a.isResizing){a.maxTicks=null;Jt(o,function(t){t.setScale()})}a.getMargins();if(c){Jt(o,function(t){t.isDirty&&(d=!0)});Jt(o,function(t){var i=t.min+","+t.max;if(t.extKey!==i){t.extKey=i;m.push(function(){oe(t,"afterSetExtremes",he(t.eventArgs,t.getExtremes()));delete t.eventArgs})}(d||e)&&t.redraw()})}d&&a.drawChartBox();Jt(r,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()});s&&s.reset(!0);f.draw();oe(a,"redraw");g&&a.cloneRenderTo(!0);Jt(m,function(t){t.call()})},get:function(t){var e,i,n,a=this,o=a.axes,r=a.series;for(e=0;e<o.length;e++)if(o[e].options.id===t)return o[e];for(e=0;e<r.length;e++)if(r[e].options.id===t)return r[e];for(e=0;e<r.length;e++){n=r[e].points||[];for(i=0;i<n.length;i++)if(n[i].id===t)return n[i]}return null},getAxes:function(){var t,e=this,i=this.options,n=i.xAxis=c(i.xAxis||{}),a=i.yAxis=c(i.yAxis||{});Jt(n,function(t,e){t.index=e;t.isX=!0});Jt(a,function(t,e){t.index=e});t=n.concat(a);Jt(t,function(t){new we(e,t)})},getSelectedPoints:function(){var t=[];Jt(this.series,function(e){t=t.concat(te(e.points||[],function(t){return t.selected}))});return t},getSelectedSeries:function(){return te(this.series,function(t){return t.selected})},setTitle:function(t,e,i){var a,o,r=this,s=r.options;a=s.title=n(s.title,t);o=s.subtitle=n(s.subtitle,e);Jt([["title",t,a],["subtitle",e,o]],function(t){var e=t[0],i=r[e],n=t[1],a=t[2];i&&n&&(r[e]=i=i.destroy());a&&a.text&&!i&&(r[e]=r.renderer.text(a.text,0,0,a.useHTML).attr({align:a.align,class:Ut+e,zIndex:a.zIndex||4}).css(a.style).add())});r.layOutTitles(i)},layOutTitles:function(t){var e,i=0,n=this.title,a=this.subtitle,o=this.options,r=o.title,s=o.subtitle,l=this.renderer,h=this.spacingBox;if(n){n.css({width:(r.width||h.width+r.widthAdjust)+Yt}).align(he({y:l.fontMetrics(r.style.fontSize,n).b-3},r),!1,h);r.floating||r.verticalAlign||(i=n.getBBox().height)}if(a){a.css({width:(s.width||h.width+s.widthAdjust)+Yt}).align(he({y:i+(r.margin-13)+l.fontMetrics(s.style.fontSize,n).b},s),!1,h);s.floating||s.verticalAlign||(i=vt(i+a.getBBox().height))}e=this.titleOffset!==i;this.titleOffset=i;if(!this.isDirtyBox&&e){this.isDirtyBox=e;this.hasRendered&&ue(t,!0)&&this.isDirtyBox&&this.redraw()}},getChartSize:function(){var t=this,e=t.options.chart,i=e.width,n=e.height,a=t.renderToClone||t.renderTo;l(i)||(t.containerWidth=Kt(a,"width"));l(n)||(t.containerHeight=Kt(a,"height"));t.chartWidth=yt(0,i||t.containerWidth||600);t.chartHeight=yt(0,ue(n,t.containerHeight>19?t.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;if(t){if(e){this.renderTo.appendChild(i);T(e);delete this.renderToClone}}else{i&&i.parentNode===this.renderTo&&this.renderTo.removeChild(i);this.renderToClone=e=this.renderTo.cloneNode(0);u(e,{position:Wt,top:"-9999px",display:"block"});e.style.setProperty&&e.style.setProperty("display","block","important");pt.body.appendChild(e);i&&e.appendChild(i)}},getContainer:function(){var t,i,n,r,s,l=this,c=l.options,d=c.chart,u=l.renderTo,f="highcharts-"+Ft++;u||(l.renderTo=u=d.renderTo);o(u)&&(l.renderTo=u=pt.getElementById(u));u||e(13,!0);r=a(h(u,"data-highcharts-chart"));de(r)&&zt[r]&&zt[r].hasRendered&&zt[r].destroy();h(u,"data-highcharts-chart",l.index);u.innerHTML="";d.skipClone||u.offsetWidth||l.cloneRenderTo();l.getChartSize();i=l.chartWidth;n=l.chartHeight;l.container=t=p(Nt,{className:Ut+"container"+(d.className?" "+d.className:""),id:f},he({position:"relative",overflow:"hidden",width:i+Yt,height:n+Yt,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},d.style),l.renderToClone||u);l._cursor=t.style.cursor;s=ut[d.renderer]||W;l.renderer=new s(t,i,n,d.style,d.forExport,c.exporting&&c.exporting.allowHTML);$t&&l.renderer.create(l,t,i,n);l.renderer.chartIndex=l.index},getMargins:function(t){var e=this,i=e.spacing,n=e.margin,a=e.titleOffset;e.resetMargins();a&&!l(n[0])&&(e.plotTop=yt(e.plotTop,a+e.options.title.margin+i[0]));e.legend.display&&e.legend.adjustMargins(n,i);e.extraBottomMargin&&(e.marginBottom+=e.extraBottomMargin);e.extraTopMargin&&(e.plotTop+=e.extraTopMargin);t||this.getAxisMargins()},getAxisMargins:function(){var t=this,e=t.axisOffset=[0,0,0,0],i=t.margin;t.hasCartesianSeries&&Jt(t.axes,function(t){t.visible&&t.getOffset()});Jt(jt,function(n,a){l(i[a])||(t[n]+=e[a])});t.setChartSize()},reflow:function(e){var i=this,n=i.options.chart,a=i.renderTo,o=l(n.width),r=n.width||Kt(a,"width"),s=n.height||Kt(a,"height"),h=e?e.target:t;if(!o&&!i.isPrinting&&r&&s&&(h===t||h===pt)){if(r!==i.containerWidth||s!==i.containerHeight){clearTimeout(i.reflowTimeout);i.reflowTimeout=d(function(){i.container&&i.setSize(void 0,void 0,!1)},e?100:0)}i.containerWidth=r;i.containerHeight=s}},initReflow:function(){var e=this,i=function(t){e.reflow(t)};ne(t,"resize",i);ne(e,"destroy",function(){ae(t,"resize",i)})},setSize:function(t,e,i){var n,a=this,o=a.renderer;a.isResizing+=1;A(i,a);a.oldChartHeight=a.chartHeight;a.oldChartWidth=a.chartWidth;void 0!==t&&(a.options.chart.width=t);void 0!==e&&(a.options.chart.height=e);a.getChartSize();n=o.globalAnimation;(n?re:u)(a.container,{width:a.chartWidth+Yt,height:a.chartHeight+Yt},n);a.setChartSize(!0);o.setSize(a.chartWidth,a.chartHeight,i);a.maxTicks=null;Jt(a.axes,function(t){t.isDirty=!0;t.setScale()});Jt(a.series,function(t){t.isDirty=!0});a.isDirtyLegend=!0;a.isDirtyBox=!0;a.layOutTitles();a.getMargins();a.redraw(i);a.oldChartHeight=null;oe(a,"resize");d(function(){a&&oe(a,"endResize",null,function(){a.isResizing-=1})},P(n).duration)},setChartSize:function(t){var e,i,n,a,o,r,s,l=this,h=l.inverted,c=l.renderer,d=l.chartWidth,u=l.chartHeight,p=l.options.chart,f=l.spacing,g=l.clipOffset;l.plotLeft=n=gt(l.plotLeft);l.plotTop=a=gt(l.plotTop);l.plotWidth=o=yt(0,gt(d-n-l.marginRight));l.plotHeight=r=yt(0,gt(u-a-l.marginBottom));l.plotSizeX=h?r:o;l.plotSizeY=h?o:r;l.plotBorderWidth=p.plotBorderWidth||0;l.spacingBox=c.spacingBox={x:f[3],y:f[0],width:d-f[3]-f[1],height:u-f[0]-f[2]};l.plotBox=c.plotBox={x:n,y:a,width:o,height:r};s=2*mt(l.plotBorderWidth/2);e=vt(yt(s,g[3])/2);i=vt(yt(s,g[0])/2);l.clipBox={x:e,y:i,width:mt(l.plotSizeX-yt(s,g[1])/2-e),height:yt(0,mt(l.plotSizeY-yt(s,g[2])/2-i))};t||Jt(l.axes,function(t){t.setAxisSize();t.setAxisTranslation()})},resetMargins:function(){var t=this;Jt(jt,function(e,i){t[e]=ue(t.margin[i],t.spacing[i])});t.axisOffset=[0,0,0,0];t.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e,i=this,n=i.options.chart,a=i.renderer,o=i.chartWidth,r=i.chartHeight,s=i.chartBackground,l=i.plotBackground,h=i.plotBorder,c=i.plotBGImage,d=n.borderWidth||0,u=n.backgroundColor,p=n.plotBackgroundColor,f=n.plotBackgroundImage,g=n.plotBorderWidth||0,m=i.plotLeft,v=i.plotTop,y=i.plotWidth,b=i.plotHeight,x=i.plotBox,k=i.clipRect,w=i.clipBox;t=d+(n.shadow?8:0);if(d||u)if(s)s.animate(s.crisp({width:o-t,height:r-t}));else{e={fill:u||Xt};if(d){e.stroke=n.borderColor;e["stroke-width"]=d}i.chartBackground=a.rect(t/2,t/2,o-t,r-t,n.borderRadius,d).attr(e).addClass(Ut+"background").add().shadow(n.shadow)}p&&(l?l.animate(x):i.plotBackground=a.rect(m,v,y,b,0).attr({fill:p}).add().shadow(n.plotShadow));f&&(c?c.animate(x):i.plotBGImage=a.image(f,m,v,y,b).add());k?k.animate({width:w.width,height:w.height}):i.clipRect=a.clipRect(w);if(g)if(h){h.strokeWidth=-g;h.animate(h.crisp({x:m,y:v,width:y,height:b}))}else i.plotBorder=a.rect(m,v,y,b,0,-g).attr({stroke:n.plotBorderColor,"stroke-width":g,fill:Xt,zIndex:1}).add();i.isDirtyBox=!1},propFromSeries:function(){var t,e,i,n=this,a=n.options.chart,o=n.options.series;Jt(["inverted","angular","polar"],function(r){t=Qt[a.type||a.defaultSeriesType];i=n[r]||a[r]||t&&t.prototype[r];e=o&&o.length;for(;!i&&e--;){t=Qt[o[e].type];t&&t.prototype[r]&&(i=!0)}n[r]=i})},linkSeries:function(){var t=this,e=t.series;Jt(e,function(t){t.linkedSeries.length=0});Jt(e,function(e){var i=e.options.linkedTo;if(o(i)){i=":previous"===i?t.series[e.index-1]:t.get(i);if(i){i.linkedSeries.push(e);e.linkedParent=i;e.visible=ue(e.options.visible,i.options.visible,e.visible)}}})},renderSeries:function(){Jt(this.series,function(t){t.translate();t.render()})},renderLabels:function(){var t=this,e=t.options.labels;e.items&&Jt(e.items,function(i){var n=he(e.style,i.style),o=a(n.left)+t.plotLeft,r=a(n.top)+t.plotTop+12;delete n.left;delete n.top;t.renderer.text(i.html,o,r).attr({zIndex:2}).css(n).add()})},render:function(){var t,e,i,n,a=this,o=a.axes,r=a.renderer,s=a.options;a.setTitle();a.legend=new Le(a,s.legend);a.getStacks&&a.getStacks();a.getMargins(!0);a.setChartSize();t=a.plotWidth;e=a.plotHeight=a.plotHeight-21;Jt(o,function(t){t.setScale()});a.getAxisMargins();i=t/a.plotWidth>1.1;n=e/a.plotHeight>1.05;if(i||n){a.maxTicks=null;Jt(o,function(t){(t.horiz&&i||!t.horiz&&n)&&t.setTickInterval(!0)});a.getMargins()}a.drawChartBox();a.hasCartesianSeries&&Jt(o,function(t){t.visible&&t.render()});a.seriesGroup||(a.seriesGroup=r.g("series-group").attr({zIndex:3}).add());a.renderSeries();a.renderLabels();a.showCredits(s.credits);a.hasRendered=!0},showCredits:function(e){e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text,0,0).on("click",function(){e.href&&(t.location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position))},destroy:function(){var t,e=this,i=e.axes,n=e.series,a=e.container,o=a&&a.parentNode;oe(e,"destroy");zt[e.index]=N;Ht--;e.renderTo.removeAttribute("data-highcharts-chart");ae(e);t=i.length;for(;t--;)i[t]=i[t].destroy();t=n.length;for(;t--;)n[t]=n[t].destroy();Jt(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(t){var i=e[t];i&&i.destroy&&(e[t]=i.destroy())});if(a){a.innerHTML="";ae(a);o&&T(a)}for(t in e)delete e[t]},isReadyToRender:function(){var e=this;if(!Et&&t==t.top&&"complete"!==pt.readyState||$t&&!t.canvg){$t?ke.push(function(){e.firstRender()},e.options.global.canvasToolsURL):pt.attachEvent("onreadystatechange",function(){pt.detachEvent("onreadystatechange",e.firstRender);"complete"===pt.readyState&&e.firstRender()});return!1}return!0},firstRender:function(){var t=this,e=t.options;if(t.isReadyToRender()){t.getContainer();oe(t,"init");t.resetMargins();t.setChartSize();t.propFromSeries();t.getAxes();Jt(e.series||[],function(e){t.initSeries(e)});t.linkSeries();oe(t,"beforeRender");ut.Pointer&&(t.pointer=new De(t,e));t.render();t.renderer.draw();!t.renderer.imgCount&&t.onload&&t.onload();t.cloneRenderTo(!0)}},onload:function(){var t=this;Jt([this.callback].concat(this.callbacks),function(e){e&&void 0!==t.index&&e.apply(t,[t])});oe(t,"load");this.onload=null},splashArray:function(t,e){var i=e[t],n=ce(i)?i:[i,i,i,i];return[ue(e[t+"Top"],n[0]),ue(e[t+"Right"],n[1]),ue(e[t+"Bottom"],n[2]),ue(e[t+"Left"],n[3])]}};var Ee=ut.CenteredSeriesMixin={getCenter:function(){var t,e,i,n=this.options,a=this.chart,o=2*(n.slicedOffset||0),r=a.plotWidth-2*o,s=a.plotHeight-2*o,l=n.center,h=[ue(l[0],"50%"),ue(l[1],"50%"),n.size||"100%",n.innerSize||0],c=bt(r,s);for(e=0;e<4;++e){i=h[e];t=e<2||2===e&&/%$/.test(i);h[e]=m(i,[r,s,c,h[2]][e])+(t?o:0)}h[3]>h[2]&&(h[3]=h[2]);return h}},_e=function(){};_e.prototype={init:function(t,e,i){var n,a=this;a.series=t;a.color=t.color;a.applyOptions(e,i);a.pointAttr={};if(t.options.colorByPoint){n=t.options.colors||t.chart.options.colors;a.color=a.color||n[t.colorCounter++];t.colorCounter===n.length&&(t.colorCounter=0)}t.chart.pointCount++;return a},applyOptions:function(t,e){var i=this,n=i.series,a=n.options.pointValKey||n.pointValKey;t=_e.prototype.optionsToObject.call(this,t);he(i,t);i.options=i.options?he(i.options,t):t;a&&(i.y=i[a]);i.isNull=null===i.x||!de(i.y,!0);void 0===i.x&&n&&(i.x=void 0===e?n.autoIncrement(i):e);n.xAxis&&n.xAxis.names&&(n.xAxis.names[i.x]=i.name);return i},optionsToObject:function(t){var e,i={},n=this.series,a=n.options.keys,o=a||n.pointArrayMap||["y"],s=o.length,l=0,h=0;if(de(t)||null===t)i[o[0]]=t;else if(r(t)){if(!a&&t.length>s){e=typeof t[0];"string"===e?i.name=t[0]:"number"===e&&(i.x=t[0]);l++}for(;h<s;){a&&void 0===t[l]||(i[o[h]]=t[l]);l++;h++}}else if("object"==typeof t){i=t;t.dataLabels&&(n._hasPointLabels=!0);t.marker&&(n._hasPointMarkers=!0)}return i},destroy:function(){var t,e=this,i=e.series,n=i.chart,a=n.hoverPoints;n.pointCount--;if(a){e.setState();s(a,e);a.length||(n.hoverPoints=null)}e===n.hoverPoint&&e.onMouseOut();if(e.graphic||e.dataLabel){ae(e);e.destroyElements()}e.legendItem&&n.legend.destroyItem(e);for(t in e)e[t]=null},destroyElements:function(){for(var t,e=this,i=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],n=6;n--;){t=i[n];e[t]&&(e[t]=e[t].destroy())}},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,n=ue(i.valueDecimals,""),a=i.valuePrefix||"",o=i.valueSuffix||"";Jt(e.pointArrayMap||["y"],function(e){e="{point."+e;(a||o)&&(t=t.replace(e+"}",a+e+"}"+o));t=t.replace(e+"}",e+":,."+n+"f}")});return b(t,{point:this,series:this.series})},firePointEvent:function(t,e,i){var n=this,a=this.series,o=a.options;(o.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents();"click"===t&&o.allowPointSelect&&(i=function(t){n.select&&n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)});oe(this,t,e,i)},visible:!0};var $e=ut.Series=function(){};$e.prototype={isCartesian:!0,type:"line",pointClass:_e,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(t,e){var i,n,a=this,o=t.series,r=function(t,e){return ue(t.options.index,t._i)-ue(e.options.index,e._i)};a.chart=t;a.options=e=a.setOptions(e);a.linkedSeries=[];a.bindAxes();he(a,{name:e.name,state:"",pointAttr:{},visible:!1!==e.visible,selected:!0===e.selected});$t&&(e.animation=!1);n=e.events;for(i in n)ne(a,i,n[i]);(n&&n.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect)&&(t.runTrackerClick=!0);a.getColor();a.getSymbol();Jt(a.parallelArrays,function(t){a[t+"Data"]=[]});a.setData(e.data,!1);a.isCartesian&&(t.hasCartesianSeries=!0);o.push(a);a._i=o.length-1;w(o,r);this.yAxis&&w(this.yAxis.series,r);Jt(o,function(t,e){t.index=e;t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,i=this,n=i.options,a=i.chart;Jt(i.axisTypes||[],function(o){Jt(a[o],function(e){t=e.options;if(n[o]===t.index||n[o]!==N&&n[o]===t.id||n[o]===N&&0===t.index){e.series.push(i);i[o]=e;e.isDirty=!0}});i[o]||i.optionalAxis===o||e(18,!0)})},updateParallelArrays:function(t,e){var i=t.series,n=arguments,a=de(e)?function(n){var a="y"===n&&i.toYData?i.toYData(t):t[n];i[n+"Data"][e]=a}:function(t){Array.prototype[e].apply(i[t+"Data"],Array.prototype.slice.call(n,2))};Jt(i.parallelArrays,a)},autoIncrement:function(t){var e,i,n,a,o,s=this.options,l=this.xIncrement,h=s.pointIntervalUnit,c=this.xAxis;l=ue(l,s.pointStart,0);this.pointInterval=i=ue(this.pointInterval,s.pointInterval,1);if(c&&c.categories&&t.name){this.requireSorting=!1;n=r(c.categories);a=n?c.categories:c.names;o=Zt(t.name,a);-1===o?n||(l=a.length):l=o}if(h){e=new j(l);"day"===h?e=+e[ht](e[it]()+i):"month"===h?e=+e[ct](e[nt]()+i):"year"===h&&(e=+e[dt](e[at]()+i));i=e-l}this.xIncrement=l+i;return l},setOptions:function(t){var e,i,a=this.chart,o=a.options,r=o.plotOptions,s=a.userOptions||{},h=s.plotOptions||{},c=r[this.type];this.userOptions=t;e=n(c,r.series,t);this.tooltipOptions=n(X.tooltip,X.plotOptions[this.type].tooltip,s.tooltip,h.series&&h.series.tooltip,h[this.type]&&h[this.type].tooltip,t.tooltip);null===c.marker&&delete e.marker;this.zoneAxis=e.zoneAxis;i=this.zones=(e.zones||[]).slice();!e.negativeColor&&!e.negativeFillColor||e.zones||i.push({value:e[this.zoneAxis+"Threshold"]||e.threshold||0,color:e.negativeColor,fillColor:e.negativeFillColor});i.length&&l(i[i.length-1].value)&&i.push({color:this.color,fillColor:this.fillColor});return e},getCyclic:function(t,e,i){var n,a=this.userOptions,o="_"+t+"Index",r=t+"Counter";if(!e){if(l(a[o]))n=a[o];else{a[o]=n=this.chart[r]%i.length;this.chart[r]+=1}e=i[n]}this[t]=e},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||fe[this.type].color,this.chart.options.colors)},getSymbol:function(){var t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols);/^url/.test(this.symbol)&&(t.radius=0)},drawLegendSymbol:Ie.drawLineMarker,setData:function(t,i,n,a){var s,l,h,c=this,d=c.points,u=d&&d.length||0,p=c.options,f=c.chart,g=null,m=c.xAxis,v=p.turboThreshold,y=this.xData,b=this.yData,x=c.pointArrayMap,k=x&&x.length;t=t||[];s=t.length;i=ue(i,!0);if(!1!==a&&s&&u===s&&!c.cropped&&!c.hasGroupedData&&c.visible)Jt(t,function(t,e){d[e].update&&t!==p.data[e]&&d[e].update(t,!1,null,!1)});else{c.xIncrement=null;c.colorCounter=0;Jt(this.parallelArrays,function(t){c[t+"Data"].length=0});if(v&&s>v){l=0;for(;null===g&&l<s;){g=t[l];l++}if(de(g)){var w=ue(p.pointStart,0),S=ue(p.pointInterval,1);for(l=0;l<s;l++){y[l]=w;b[l]=t[l];w+=S}c.xIncrement=w}else if(r(g))if(k)for(l=0;l<s;l++){h=t[l];y[l]=h[0];b[l]=h.slice(1,k+1)}else for(l=0;l<s;l++){h=t[l];y[l]=h[0];b[l]=h[1]}else e(12)}else for(l=0;l<s;l++)if(t[l]!==N){h={series:c};c.pointClass.prototype.applyOptions.apply(h,[t[l]]);c.updateParallelArrays(h,l)}o(b[0])&&e(14,!0);c.data=[];c.options.data=c.userOptions.data=t;l=u;for(;l--;)d[l]&&d[l].destroy&&d[l].destroy();m&&(m.minRange=m.userMinRange);c.isDirty=c.isDirtyData=f.isDirtyBox=!0;n=!1}if("point"===p.legendType){this.processData();this.generatePoints()}i&&f.redraw(n)},processData:function(t){var i,n,a,o,r,s,l,h,c=this,d=c.xData,u=c.yData,p=d.length,f=0,g=c.xAxis,m=c.options,v=m.cropThreshold,y=c.getExtremesFromAll||m.getExtremesFromAll,b=c.isCartesian,x=g&&g.val2lin,k=g&&g.isLog;if(b&&!c.isDirty&&!g.isDirty&&!c.yAxis.isDirty&&!t)return!1;if(g){s=g.getExtremes();l=s.min;h=s.max}if(b&&c.sorted&&!y&&(!v||p>v||c.forceCrop))if(d[p-1]<l||d[0]>h){d=[];u=[]}else if(d[0]<l||d[p-1]>h){i=this.cropData(c.xData,c.yData,l,h);d=i.xData;u=i.yData;f=i.start;n=!0}r=d.length||1;for(;--r;){a=k?x(d[r])-x(d[r-1]):d[r]-d[r-1];a>0&&(o===N||a<o)?o=a:a<0&&c.requireSorting&&e(15)}c.cropped=n;c.cropStart=f;c.processedXData=d;c.processedYData=u;c.closestPointRange=o},cropData:function(t,e,i,n){var a,o,r=t.length,s=0,l=r,h=ue(this.cropShoulder,1);for(a=0;a<r;a++)if(t[a]>=i){s=yt(0,a-h);break}for(o=a;o<r;o++)if(t[o]>n){l=o+h;break}return{xData:t.slice(s,l),yData:e.slice(s,l),start:s,end:l}},generatePoints:function(){var t,e,i,n,a=this,o=a.options,r=o.data,s=a.data,l=a.processedXData,h=a.processedYData,d=a.pointClass,u=l.length,p=a.cropStart||0,f=a.hasGroupedData,g=[];if(!s&&!f){var m=[];m.length=r.length;s=a.data=m}for(n=0;n<u;n++){e=p+n;if(f){g[n]=(new d).init(a,[l[n]].concat(c(h[n])));g[n].dataGroup=a.groupMap[n]}else{s[e]?i=s[e]:r[e]!==N&&(s[e]=i=(new d).init(a,r[e],l[n]));g[n]=i}g[n].index=e}if(s&&(u!==(t=s.length)||f))for(n=0;n<t;n++){n!==p||f||(n+=u);if(s[n]){s[n].destroyElements();s[n].plotX=N}}a.data=s;a.points=g},getExtremes:function(t){var e,i,n,a,o,r,s,l=this.xAxis,h=this.yAxis,c=this.processedXData,d=[],u=0,p=l.getExtremes(),f=p.min,g=p.max;t=t||this.stackedYData||this.processedYData||[];e=t.length;for(r=0;r<e;r++){a=c[r];o=t[r];i=null!==o&&o!==N&&(!h.isLog||o.length||o>0);n=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(c[r+1]||a)>=f&&(c[r-1]||a)<=g;if(i&&n){s=o.length;if(s)for(;s--;)null!==o[s]&&(d[u++]=o[s]);else d[u++]=o}}this.dataMin=S(d);this.dataMax=C(d)},translate:function(){this.processedXData||this.processData();this.generatePoints();var t,i,n,a,o,r=this,s=r.options,h=s.stacking,c=r.xAxis,d=c.categories,u=r.yAxis,p=r.points,f=p.length,g=!!r.modifyValue,m=s.pointPlacement,v="between"===m||de(m),y=s.threshold,b=s.startFromThreshold?y:0,x=Number.MAX_VALUE;for(t=0;t<f;t++){var k,w,S=p[t],C=S.x,D=S.y,T=S.low,A=h&&u.stacks[(r.negStacks&&D<(b?0:y)?"-":"")+r.stackKey];if(u.isLog&&null!==D&&D<=0){S.y=D=null;e(10)}S.plotX=i=M(bt(yt(-1e5,c.translate(C,0,0,0,1,m,"flags"===this.type)),1e5));if(h&&r.visible&&!S.isNull&&A&&A[C]){o=r.getStackIndicator(o,C,r.index);k=A[C];w=k.points[o.key];T=w[0];D=w[1];T===b&&o.key===A[C].base&&(T=ue(y,u.min));u.isLog&&T<=0&&(T=null);S.total=S.stackTotal=k.total;S.percentage=k.total&&S.y/k.total*100;S.stackY=D;k.setOffset(r.pointXOffset||0,r.barW||0)}S.yBottom=l(T)?u.translate(T,0,1,0,1):null;g&&(D=r.modifyValue(D,S));S.plotY=n="number"==typeof D&&D!==1/0?bt(yt(-1e5,u.translate(D,0,1,0,1)),1e5):N;S.isInside=n!==N&&n>=0&&n<=u.len&&i>=0&&i<=c.len;S.clientX=v?M(c.translate(C,0,0,0,1)):i;S.negative=S.y<(y||0);S.category=d&&d[S.x]!==N?d[S.x]:S.x;if(!S.isNull){void 0!==a&&(x=bt(x,xt(i-a)));a=i}}r.closestPointRangePx=x},getValidPoints:function(t,e){var i=this.chart;return te(t||this.points||[],function(t){return!(e&&!i.isInsidePlot(t.plotX,t.plotY,i.inverted))&&!t.isNull})},setClip:function(t){var e=this.chart,i=this.options,n=e.renderer,a=e.inverted,o=this.clipBox,r=o||e.clipBox,s=this.sharedClipKey||["_sharedClip",t&&t.duration,t&&t.easing,r.height,i.xAxis,i.yAxis].join(","),l=e[s],h=e[s+"m"];if(!l){if(t){r.width=0;e[s+"m"]=h=n.clipRect(-99,a?-e.plotLeft:-e.plotTop,99,a?e.chartWidth:e.chartHeight)}e[s]=l=n.clipRect(r);l.count={length:0}}if(t&&!l.count[this.index]){l.count[this.index]=!0;l.count.length+=1}if(!1!==i.clip){this.group.clip(t||o?l:e.clipRect);this.markerGroup.clip(h);this.sharedClipKey=s}if(!t){if(l.count[this.index]){delete l.count[this.index];l.count.length-=1}if(0===l.count.length&&s&&e[s]){o||(e[s]=e[s].destroy());e[s+"m"]&&(e[s+"m"]=e[s+"m"].destroy())}}},animate:function(t){var e,i,n=this,a=n.chart,o=n.options.animation;o&&!ce(o)&&(o=fe[n.type].animation);if(t)n.setClip(o);else{i=this.sharedClipKey;e=a[i];e&&e.animate({width:a.plotSizeX},o);a[i+"m"]&&a[i+"m"].animate({width:a.plotSizeX+99},o);n.animate=null}},afterAnimate:function(){this.setClip();oe(this,"afterAnimate")},drawPoints:function(){var t,e,i,n,a,o,r,s,l,h,c,d,u,p=this,f=p.points,g=p.chart,m=p.options,v=m.marker,y=p.pointAttr[""],b=p.markerGroup,x=p.xAxis,k=ue(v.enabled,x.isRadial,p.closestPointRangePx>2*v.radius);if(!1!==v.enabled||p._hasPointMarkers){n=f.length;for(;n--;){a=f[n];e=mt(a.plotX);i=a.plotY;l=a.graphic;h=a.marker||{};c=!!a.marker;d=k&&h.enabled===N||h.enabled;u=a.isInside;if(d&&de(i)&&null!==a.y){t=a.pointAttr[a.selected?"select":""]||y;o=t.r;r=ue(h.symbol,p.symbol);s=0===r.indexOf("url");l?l[u?"show":"hide"](!0).attr(t).animate(he({x:e-o,y:i-o},l.symbolName?{width:2*o,height:2*o}:{})):u&&(o>0||s)&&(a.graphic=l=g.renderer.symbol(r,e-o,i-o,2*o,2*o,c?h:v).attr(t).add(b))}else l&&(a.graphic=l.destroy())}}},convertAttribs:function(t,e,i,n){var a,o,r=this.pointAttrToOptions,s={};t=t||{};e=e||{};i=i||{};n=n||{};for(a in r){o=r[a];s[a]=ue(t[o],e[a],i[a],n[a])}return s},getAttribs:function(){var t,e,i,n,a,o,r,s,h,c=this,d=c.options,u=fe[c.type].marker?d.marker:d,p=u.states,f=p.hover,g=c.color,m=c.options.negativeColor,v={stroke:g,fill:g},y=c.points||[],b=[],x=c.pointAttrToOptions,k=c.hasPointSpecificOptions,w=u.lineColor,S=u.fillColor,C=d.turboThreshold,D=c.zones,T=c.zoneAxis||"y";if(d.marker){f.radius=+f.radius||+u.radius+ +f.radiusPlus;f.lineWidth=f.lineWidth||u.lineWidth+f.lineWidthPlus}else{f.color=f.color||E(f.color||g).brighten(f.brightness).get();f.negativeColor=f.negativeColor||E(f.negativeColor||m).brighten(f.brightness).get()}b[""]=c.convertAttribs(u,v);Jt(["hover","select"],function(t){b[t]=c.convertAttribs(p[t],b[""])});c.pointAttr=b;e=y.length;if(!C||e<C||k)for(;e--;){a=y[e];u=a.options&&a.options.marker||a.options;u&&!1===u.enabled&&(u.radius=0);r=null;if(D.length){i=0;n=D[i];for(;a[T]>=n.value;)n=D[++i];a.color=a.fillColor=r=ue(n.color,c.color)}k=d.colorByPoint||a.color;if(a.options)for(h in x)l(u[x[h]])&&(k=!0);if(k){u=u||{};o=[];p=u.states||{};t=p.hover=p.hover||{};d.marker&&(!a.negative||t.fillColor||f.fillColor)||(t[c.pointAttrToOptions.fill]=t.color||!a.options.color&&f[a.negative&&m?"negativeColor":"color"]||E(a.color).brighten(t.brightness||f.brightness).get());s={color:a.color};S||(s.fillColor=a.color);w||(s.lineColor=a.color);u.hasOwnProperty("color")&&!u.color&&delete u.color;r&&!f.fillColor&&(t.fillColor=r);o[""]=c.convertAttribs(he(s,u),b[""]);o.hover=c.convertAttribs(p.hover,b.hover,o[""]);o.select=c.convertAttribs(p.select,b.select,o[""])}else o=b;a.pointAttr=o}},destroy:function(){var t,e,i,n,a,o=this,r=o.chart,l=/AppleWebKit\/533/.test(Dt),h=o.data||[];oe(o,"destroy");ae(o);Jt(o.axisTypes||[],function(t){a=o[t];if(a){s(a.series,o);a.isDirty=a.forceRedraw=!0}});o.legendItem&&o.chart.legend.destroyItem(o);e=h.length;for(;e--;){i=h[e];i&&i.destroy&&i.destroy()}o.points=null;clearTimeout(o.animationTimeout);for(n in o)if(o[n]instanceof _&&!o[n].survive){t=l&&"group"===n?"hide":"destroy";o[n][t]()}r.hoverSeries===o&&(r.hoverSeries=null);s(r.series,o);for(n in o)delete o[n]},getGraphPath:function(t,e,i){var n,a,o=this,r=o.options,s=r.step,h=[],c=[];t=t||o.points;n=t.reversed;n&&t.reverse();s={right:1,center:2}[s]||s&&3;s&&n&&(s=4-s);!r.connectNulls||e||i||(t=this.getValidPoints(t));Jt(t,function(n,d){var u,p=n.plotX,f=n.plotY,g=t[d-1];(n.leftCliff||g&&g.rightCliff)&&!i&&(a=!0);if(n.isNull&&!l(e)&&d>0)a=!r.connectNulls;else if(n.isNull&&!e)a=!0;else{if(0===d||a)u=[Vt,n.plotX,n.plotY];else if(o.getPointSpline)u=o.getPointSpline(t,n,d);else if(s){u=1===s?[Gt,g.plotX,f]:2===s?[Gt,(g.plotX+p)/2,g.plotY,Gt,(g.plotX+p)/2,f]:[Gt,p,g.plotY];u.push(Gt,p,f)}else u=[Gt,p,f];c.push(n.x);s&&c.push(n.x);h.push.apply(h,u);a=!1}});h.xMap=c;o.graphPath=h;return h},drawGraph:function(){var t=this,e=this.options,i=[["graph",e.lineColor||this.color,e.dashStyle]],n=e.lineWidth,a="square"!==e.linecap,o=(this.gappedPath||this.getGraphPath).call(this),r=this.zones;Jt(r,function(n,a){i.push(["zoneGraph"+a,n.color||t.color,n.dashStyle||e.dashStyle])});Jt(i,function(i,r){var s,l=i[0],h=t[l];if(h){h.endX=o.xMap;h.animate({d:o})}else if(n&&o.length){s={stroke:i[1],"stroke-width":n,fill:"none",zIndex:1};i[2]?s.dashstyle=i[2]:a&&(s["stroke-linecap"]=s["stroke-linejoin"]="round");h=t[l]=t.chart.renderer.path(o).attr(s).add(t.group).shadow(r<2&&e.shadow)}if(h){h.startX=o.xMap;h.isArea=o.isArea}})},applyZones:function(){var t,e,i,n,a,o,r,s=this,l=this.chart,h=l.renderer,c=this.zones,d=this.clips||[],u=this.graph,p=this.area,f=yt(l.chartWidth,l.chartHeight),g=this[(this.zoneAxis||"y")+"Axis"],m=g.reversed,v=l.inverted,y=g.horiz,b=!1;if(c.length&&(u||p)&&g.min!==N){u&&u.hide();p&&p.hide();n=g.getExtremes();Jt(c,function(c,x){t=m?y?l.plotWidth:0:y?0:g.toPixels(n.min);t=bt(yt(ue(e,t),0),f);e=bt(yt(gt(g.toPixels(ue(c.value,n.max),!0)),0),f);b&&(t=e=g.toPixels(n.max));a=Math.abs(t-e);o=bt(t,e);r=yt(t,e);if(g.isXAxis){i={x:v?r:o,y:0,width:a,height:f};y||(i.x=l.plotHeight-i.x)}else{i={x:0,y:v?r:o,width:f,height:a};y&&(i.y=l.plotWidth-i.y)}l.inverted&&h.isVML&&(i=g.isXAxis?{x:0,y:m?o:r,height:i.width,width:l.chartWidth}:{x:i.y-l.plotLeft-l.spacingBox.x,y:0,width:i.height,height:l.chartHeight});if(d[x])d[x].animate(i);else{d[x]=h.clipRect(i);u&&s["zoneGraph"+x].clip(d[x]);p&&s["zoneArea"+x].clip(d[x])}b=c.value>n.max});this.clips=d}},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};Jt(["group","markerGroup"],function(i){e[i]&&e[i].attr(t).invert()})}var e=this,i=e.chart;if(e.xAxis){ne(i,"resize",t);ne(e,"destroy",function(){ae(i,"resize",t)});t();e.invertGroups=t}},plotGroup:function(t,e,i,n,a){var o=this[t],r=!o;if(r){this[t]=o=this.chart.renderer.g(e).attr({zIndex:n||.1}).add(a);o.addClass("highcharts-series-"+this.index)}o.attr({visibility:i})[r?"attr":"animate"](this.getPlotBox());return o},getPlotBox:function(){var t=this.chart,e=this.xAxis,i=this.yAxis;if(t.inverted){e=i;i=this.xAxis}return{translateX:e?e.left:t.plotLeft,translateY:i?i.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,i=e.chart,n=e.options,a=!!e.animate&&i.renderer.isSVG&&P(n.animation).duration,o=e.visible?"inherit":"hidden",r=n.zIndex,s=e.hasRendered,l=i.seriesGroup;t=e.plotGroup("group","series",o,r,l);e.markerGroup=e.plotGroup("markerGroup","markers",o,r,l);a&&e.animate(!0);e.getAttribs();t.inverted=!!e.isCartesian&&i.inverted;if(e.drawGraph){e.drawGraph();e.applyZones()}Jt(e.points,function(t){t.redraw&&t.redraw()});e.drawDataLabels&&e.drawDataLabels();e.visible&&e.drawPoints();e.drawTracker&&!1!==e.options.enableMouseTracking&&e.drawTracker();i.inverted&&e.invertGroups();!1===n.clip||e.sharedClipKey||s||t.clip(i.clipRect);a&&e.animate();s||(e.animationTimeout=d(function(){e.afterAnimate()},a));e.isDirty=e.isDirtyData=!1;e.hasRendered=!0},redraw:function(){var t=this,e=t.chart,i=t.isDirty||t.isDirtyData,n=t.group,a=t.xAxis,o=t.yAxis;if(n){e.inverted&&n.attr({width:e.plotWidth,height:e.plotHeight});n.animate({translateX:ue(a&&a.left,e.plotLeft),translateY:ue(o&&o.top,e.plotTop)})}t.translate();t.render();i&&delete this.kdTree},kdDimensions:1,kdAxisArray:["clientX","plotY"],searchPoint:function(t,e){var i=this,n=i.xAxis,a=i.yAxis,o=i.chart.inverted;return this.searchKDTree({clientX:o?n.len-t.chartY+n.pos:t.chartX-n.pos,plotY:o?a.len-t.chartX+a.pos:t.chartY-a.pos},e)},buildKDTree:function(){function t(e,n,a){var o,r,s=e&&e.length;if(s){o=i.kdAxisArray[n%a];e.sort(function(t,e){return t[o]-e[o]});r=Math.floor(s/2);return{point:e[r],left:t(e.slice(0,r),n+1,a),right:t(e.slice(r+1),n+1,a)}}}function e(){i.kdTree=t(i.getValidPoints(null,!i.directTouch),n,n)}var i=this,n=i.kdDimensions;delete i.kdTree;d(e,i.options.kdNow?0:1)},searchKDTree:function(t,e){function i(t,e){var i=l(t[o])&&l(e[o])?Math.pow(t[o]-e[o],2):null,n=l(t[r])&&l(e[r])?Math.pow(t[r]-e[r],2):null,a=(i||0)+(n||0);e.dist=l(a)?Math.sqrt(a):Number.MAX_VALUE;e.distX=l(i)?Math.sqrt(i):Number.MAX_VALUE}function n(t,e,o,r){var l,h,c,d,u,p=e.point,f=a.kdAxisArray[o%r],g=p;i(t,p);l=t[f]-p[f];h=l<0?"left":"right";c=l<0?"right":"left";if(e[h]){d=n(t,e[h],o+1,r);g=d[s]<g[s]?d:p}if(e[c]&&Math.sqrt(l*l)<g[s]){u=n(t,e[c],o+1,r);g=u[s]<g[s]?u:g}return g}
var a=this,o=this.kdAxisArray[0],r=this.kdAxisArray[1],s=e?"distX":"dist";this.kdTree||this.buildKDTree();if(this.kdTree)return n(t,this.kdTree,this.kdDimensions,this.kdDimensions)}};F.prototype={destroy:function(){D(this,this.axis)},render:function(t){var e=this.options,i=e.format,n=i?b(i,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(n,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:"hidden"}).add(t)},setOffset:function(t,e){var i,n=this,a=n.axis,o=a.chart,r=o.inverted,s=a.reversed,l=this.isNegative&&!s||!this.isNegative&&s,h=a.translate(a.usePercentage?100:this.total,0,0,0,1),c=a.translate(0),d=xt(h-c),u=o.xAxis[0].translate(this.x)+t,p=o.plotHeight,f={x:r?l?h:h-d:u,y:r?p-u-e:l?p-h-d:p-h,width:r?d:e,height:r?e:d},g=this.label;if(g){g.align(this.alignOptions,null,f);i=g.alignAttr;g[!1===this.options.crop||o.isInsidePlot(i.x,i.y)?"show":"hide"](!0)}}};Oe.prototype.getStacks=function(){var t=this;Jt(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)});Jt(t.series,function(e){!e.options.stacking||!0!==e.visible&&!1!==t.options.chart.ignoreHiddenSeries||(e.stackKey=e.type+ue(e.options.stack,""))})};we.prototype.buildStacks=function(){var t,e,i=this.series,n=ue(this.options.reversedStacks,!0),a=i.length;if(!this.isXAxis){this.usePercentage=!1;e=a;for(;e--;)i[n?e:a-e-1].setStackedPoints();e=a;for(;e--;){t=i[n?e:a-e-1];t.setStackCliffs&&t.setStackCliffs()}if(this.usePercentage)for(e=0;e<a;e++)i[e].setPercentStacks()}};we.prototype.renderStackTotals=function(){var t,e,i,n=this,a=n.chart,o=a.renderer,r=n.stacks,s=n.stackTotalGroup;s||(n.stackTotalGroup=s=o.g("stack-labels").attr({visibility:"visible",zIndex:6}).add());s.translate(a.plotLeft,a.plotTop);for(t in r){e=r[t];for(i in e)e[i].render(s)}};we.prototype.resetStacks=function(){var t,e,i=this.stacks;if(!this.isXAxis)for(t in i)for(e in i[t])if(i[t][e].touched<this.stacksTouched){i[t][e].destroy();delete i[t][e]}else{i[t][e].total=null;i[t][e].cum=0}};we.prototype.cleanStacks=function(){var t,e,i;if(!this.isXAxis){this.oldStacks&&(t=this.stacks=this.oldStacks);for(e in t)for(i in t[e])t[e][i].cum=t[e][i].total}};$e.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var t,e,i,n,a,o,r,s,h,c=this,d=c.processedXData,u=c.processedYData,p=[],f=u.length,g=c.options,m=g.threshold,v=g.startFromThreshold?m:0,y=g.stack,b=g.stacking,x=c.stackKey,k="-"+x,w=c.negStacks,S=c.yAxis,C=S.stacks,D=S.oldStacks;S.stacksTouched+=1;for(r=0;r<f;r++){s=d[r];h=u[r];t=c.getStackIndicator(t,s,c.index);o=t.key;e=w&&h<(v?0:m);a=e?k:x;C[a]||(C[a]={});if(!C[a][s])if(D[a]&&D[a][s]){C[a][s]=D[a][s];C[a][s].total=null}else C[a][s]=new F(S,S.options.stackLabels,e,s,y);i=C[a][s];if(null!==h){i.points[o]=i.points[c.index]=[ue(i.cum,v)];l(i.cum)||(i.base=o);i.touched=S.stacksTouched;t.index>0&&!1===c.singleStacks&&(i.points[o][0]=i.points[c.index+","+s+",0"][0])}if("percent"===b){n=e?x:k;if(w&&C[n]&&C[n][s]){n=C[n][s];i.total=n.total=yt(n.total,i.total)+xt(h)||0}else i.total=M(i.total+(xt(h)||0))}else i.total=M(i.total+(h||0));i.cum=ue(i.cum,v)+(h||0);if(null!==h){i.points[o].push(i.cum);p[r]=i.cum}}"percent"===b&&(S.usePercentage=!0);this.stackedYData=p;S.oldStacks={}}};$e.prototype.setPercentStacks=function(){var t,e=this,i=e.stackKey,n=e.yAxis.stacks,a=e.processedXData;Jt([i,"-"+i],function(i){for(var o,r,s,l,h=a.length;h--;){o=a[h];t=e.getStackIndicator(t,o,e.index);r=n[i]&&n[i][o];s=r&&r.points[t.key];if(s){l=r.total?100/r.total:0;s[0]=M(s[0]*l);s[1]=M(s[1]*l);e.stackedYData[h]=s[1]}}})};$e.prototype.getStackIndicator=function(t,e,i){l(t)&&t.x===e?t.index++:t={x:e,index:0};t.key=[i,e,t.index].join(",");return t};he(Oe.prototype,{addSeries:function(t,e,i){var n,a=this;if(t){e=ue(e,!0);oe(a,"addSeries",{options:t},function(){n=a.initSeries(t);a.isDirtyLegend=!0;a.linkSeries();e&&a.redraw(i)})}return n},addAxis:function(t,e,i,a){var o=e?"xAxis":"yAxis",r=this.options,s=n(t,{index:this[o].length,isX:e});new we(this,s);r[o]=c(r[o]||{});r[o].push(s);ue(i,!0)&&this.redraw(a)},showLoading:function(t){var e=this,i=e.options,n=e.loadingDiv,a=i.loading,o=function(){n&&u(n,{left:e.plotLeft+Yt,top:e.plotTop+Yt,width:e.plotWidth+Yt,height:e.plotHeight+Yt})};if(!n){e.loadingDiv=n=p(Nt,{className:Ut+"loading"},he(a.style,{zIndex:10,display:Xt}),e.container);e.loadingSpan=p("span",null,a.labelStyle,n);ne(e,"redraw",o)}e.loadingSpan.innerHTML=t||i.lang.loading;if(!e.loadingShown){u(n,{opacity:0,display:""});re(n,{opacity:a.style.opacity},{duration:a.showDuration||0});e.loadingShown=!0}o()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&re(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){u(e,{display:Xt})}});this.loadingShown=!1}});he(_e.prototype,{update:function(t,e,i,n){function a(){r.applyOptions(t);null===r.y&&l&&(r.graphic=l.destroy());ce(t,!0)&&(r.redraw=function(){l&&l.element&&t&&t.marker&&t.marker.symbol&&(r.graphic=l.destroy());t&&t.dataLabels&&r.dataLabel&&(r.dataLabel=r.dataLabel.destroy());r.redraw=null});o=r.index;s.updateParallelArrays(r,o);d&&r.name&&(d[r.x]=r.name);c.data[o]=ce(c.data[o],!0)?r.options:t;s.isDirty=s.isDirtyData=!0;!s.fixedBox&&s.hasCartesianSeries&&(h.isDirtyBox=!0);"point"===c.legendType&&(h.isDirtyLegend=!0);e&&h.redraw(i)}var o,r=this,s=r.series,l=r.graphic,h=s.chart,c=s.options,d=s.xAxis&&s.xAxis.names;e=ue(e,!0);!1===n?a():r.firePointEvent("update",{options:t},a)},remove:function(t,e){this.series.removePoint(Zt(this,this.series.data),t,e)}});he($e.prototype,{addPoint:function(t,e,i,n){var a,o,r,s,l=this,h=l.options,c=l.data,d=l.chart,u=l.xAxis&&l.xAxis.names,p=h.data,f=l.xData;A(n,d);e=ue(e,!0);a={series:l};l.pointClass.prototype.applyOptions.apply(a,[t]);s=a.x;r=f.length;if(l.requireSorting&&s<f[r-1]){o=!0;for(;r&&f[r-1]>s;)r--}l.updateParallelArrays(a,"splice",r,0,0);l.updateParallelArrays(a,r);u&&a.name&&(u[s]=a.name);p.splice(r,0,t);if(o){l.data.splice(r,0,null);l.processData()}"point"===h.legendType&&l.generatePoints();if(i)if(c[0]&&c[0].remove)c[0].remove(!1);else{c.shift();l.updateParallelArrays(a,"shift");p.shift()}l.isDirty=!0;l.isDirtyData=!0;if(e){l.getAttribs();d.redraw()}},removePoint:function(t,e,i){var n=this,a=n.data,o=a[t],r=n.points,s=n.chart,l=function(){r&&r.length===a.length&&r.splice(t,1);a.splice(t,1);n.options.data.splice(t,1);n.updateParallelArrays(o||{series:n},"splice",t,1);o&&o.destroy();n.isDirty=!0;n.isDirtyData=!0;e&&s.redraw()};A(i,s);e=ue(e,!0);o?o.firePointEvent("remove",null,l):l()},remove:function(t,e){var i=this,n=i.chart;oe(i,"remove",null,function(){i.destroy();n.isDirtyLegend=n.isDirtyBox=!0;n.linkSeries();ue(t,!0)&&n.redraw(e)})},update:function(t,e){var i,a=this,o=this.chart,r=this.userOptions,s=this.type,l=Qt[s].prototype,h=["group","markerGroup","dataLabelsGroup"];(t.type&&t.type!==s||void 0!==t.zIndex)&&(h.length=0);Jt(h,function(t){h[t]=a[t];delete a[t]});t=n(r,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},t);this.remove(!1);for(i in l)this[i]=N;he(this,Qt[t.type||s].prototype);Jt(h,function(t){a[t]=h[t]});this.init(o,t);o.linkSeries();ue(e,!0)&&o.redraw(!1)}});he(we.prototype,{update:function(t,e){var i=this.chart;t=i.options[this.coll][this.options.index]=n(this.userOptions,t);this.destroy(!0);this.init(i,he(t,{events:N}));i.isDirtyBox=!0;ue(e,!0)&&i.redraw()},remove:function(t){for(var e=this.chart,i=this.coll,n=this.series,a=n.length;a--;)n[a]&&n[a].remove(!1);s(e.axes,this);s(e[i],this);e.options[i].splice(this.options.index,1);Jt(e[i],function(t,e){t.options.index=e});this.destroy();e.isDirtyBox=!0;ue(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var Re=f($e);Qt.line=Re;fe.area=n(ge,{softThreshold:!1,threshold:0});var Fe=f($e,{type:"area",singleStacks:!1,getStackPoints:function(){var t,e,i,n=this,a=[],o=[],r=this.xAxis,s=this.yAxis,l=s.stacks[this.stackKey],h={},c=this.points,d=n.index,u=s.series,p=u.length,f=ue(s.options.reversedStacks,!0)?1:-1;if(this.options.stacking){for(e=0;e<c.length;e++)h[c[e].x]=c[e];for(i in l)null!==l[i].total&&o.push(i);o.sort(function(t,e){return t-e});t=ie(u,function(){return this.visible});Jt(o,function(i,n){var c,u,g=0;if(h[i]&&!h[i].isNull){a.push(h[i]);Jt([-1,1],function(a){var r=1===a?"rightNull":"leftNull",s=1===a?"rightCliff":"leftCliff",g=0,m=l[o[n+a]];if(m){e=d;for(;e>=0&&e<p;){c=m.points[e];if(!c)if(e===d)h[i][r]=!0;else if(t[e]){u=l[i].points[e];u&&(g-=u[1]-u[0])}e+=f}}h[i][s]=g})}else{e=d;for(;e>=0&&e<p;){c=l[i].points[e];if(c){g=c[1];break}e+=f}g=s.toPixels(g,!0);a.push({isNull:!0,plotX:r.toPixels(i,!0),plotY:g,yBottom:g})}})}return a},getGraphPath:function(t){var e,i,n,a,o,r,s,l,h=$e.prototype.getGraphPath,c=this.options,d=c.stacking,u=this.yAxis,p=[],f=[],g=this.index,m=u.stacks[this.stackKey],v=c.threshold,y=u.getThreshold(c.threshold),b=c.connectNulls||"percent"===d,x=function(e,i,n){var a,o,s=t[e],l=d&&m[s.x].points[g],h=s[n+"Null"]||0,c=s[n+"Cliff"]||0,b=!0;if(c||h){a=(h?l[0]:l[1])+c;o=l[0]+c;b=!!h}else!d&&t[i]&&t[i].isNull&&(a=o=v);if(void 0!==a){f.push({plotX:r,plotY:null===a?y:u.getThreshold(a),isNull:b});p.push({plotX:r,plotY:null===o?y:u.getThreshold(o)})}};t=t||this.points;d&&(t=this.getStackPoints());for(a=0;a<t.length;a++){s=t[a].isNull;r=ue(t[a].rectPlotX,t[a].plotX);l=ue(t[a].yBottom,y);if(!s||b){b||x(a,a-1,"left");if(!s||d||!b){f.push(t[a]);p.push({x:a,plotX:r,plotY:l})}b||x(a,a+1,"right")}}i=h.call(this,f,!0,!0);p.reversed=!0;n=h.call(this,p,!0,!0);n.length&&(n[0]=Gt);o=i.concat(n);e=h.call(this,f,!1,b);o.xMap=i.xMap;this.areaPath=o;return e},drawGraph:function(){this.areaPath=[];$e.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,i=this.options,n=this.zones,a=[["area",this.color,i.fillColor]];Jt(n,function(e,n){a.push(["zoneArea"+n,e.color||t.color,e.fillColor||i.fillColor])});Jt(a,function(n){var a,o=n[0],r=t[o];if(r){r.endX=e.xMap;r.animate({d:e})}else{a={fill:n[2]||n[1],zIndex:0};n[2]||(a["fill-opacity"]=ue(i.fillOpacity,.75));r=t[o]=t.chart.renderer.path(e).attr(a).add(t.group);r.isArea=!0}r.startX=e.xMap;r.shiftUnit=i.step?2:1})},drawLegendSymbol:Ie.drawRectangle});Qt.area=Fe;fe.spline=n(ge);var Be=f($e,{type:"spline",getPointSpline:function(t,e,i){var n,a,o,r,s,l=e.plotX,h=e.plotY,c=t[i-1],d=t[i+1];if(c&&!c.isNull&&d&&!d.isNull){var u=c.plotX,p=c.plotY,f=d.plotX,g=d.plotY,m=0;n=(1.5*l+u)/2.5;a=(1.5*h+p)/2.5;o=(1.5*l+f)/2.5;r=(1.5*h+g)/2.5;o!==n&&(m=(r-a)*(o-l)/(o-n)+h-r);a+=m;r+=m;if(a>p&&a>h){a=yt(p,h);r=2*h-a}else if(a<p&&a<h){a=bt(p,h);r=2*h-a}if(r>g&&r>h){r=yt(g,h);a=2*h-r}else if(r<g&&r<h){r=bt(g,h);a=2*h-r}e.rightContX=o;e.rightContY=r}s=["C",ue(c.rightContX,c.plotX),ue(c.rightContY,c.plotY),ue(n,l),ue(a,h),l,h];c.rightContX=c.rightContY=null;return s}});Qt.spline=Be;fe.areaspline=n(fe.area);var ze=Fe.prototype,He=f(Be,{type:"areaspline",getStackPoints:ze.getStackPoints,getGraphPath:ze.getGraphPath,setStackCliffs:ze.setStackCliffs,drawGraph:ze.drawGraph,drawLegendSymbol:Ie.drawRectangle});Qt.areaspline=He;fe.column=n(ge,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0});var Ne=f($e,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){$e.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&Jt(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e=this,i=e.options,n=e.xAxis,a=e.yAxis,o=n.reversed,r={},s=0;!1===i.grouping?s=1:Jt(e.chart.series,function(i){var n,o=i.options,l=i.yAxis;if(i.type===e.type&&i.visible&&a.len===l.len&&a.pos===l.pos){if(o.stacking){t=i.stackKey;r[t]===N&&(r[t]=s++);n=r[t]}else!1!==o.grouping&&(n=s++);i.columnIndex=n}});var l=bt(xt(n.transA)*(n.ordinalSlope||i.pointRange||n.closestPointRange||n.tickInterval||1),n.len),h=l*i.groupPadding,c=l-2*h,d=c/s,u=bt(i.maxPointWidth||n.len,ue(i.pointWidth,d*(1-2*i.pointPadding))),p=(d-u)/2,f=(e.columnIndex||0)+(o?1:0),g=p+(h+f*d-l/2)*(o?-1:1);e.columnMetrics={width:u,offset:g};return e.columnMetrics},crispCol:function(t,e,i,n){var a,o,r,s=this.chart,l=this.borderWidth,h=-(l%2?.5:0),c=l%2?.5:1;s.inverted&&s.renderer.isVML&&(c+=1);a=Math.round(t+i)+h;t=Math.round(t)+h;i=a-t;o=Math.round(e+n)+c;r=xt(e)<=.5&&o>.5;e=Math.round(e)+c;n=o-e;if(r&&n){e-=1;n+=1}return{x:t,y:e,width:i,height:n}},translate:function(){var t=this,e=t.chart,i=t.options,n=t.borderWidth=ue(i.borderWidth,t.closestPointRange*t.xAxis.transA<2?0:1),a=t.yAxis,o=i.threshold,r=t.translatedThreshold=a.getThreshold(o),s=ue(i.minPointLength,5),l=t.getColumnMetrics(),h=l.width,c=t.barW=yt(h,1+2*n),d=t.pointXOffset=l.offset;e.inverted&&(r-=.5);i.pointPadding&&(c=vt(c));$e.prototype.translate.apply(t);Jt(t.points,function(i){var n,o=bt(ue(i.yBottom,r),9e4),l=999+xt(o),u=bt(yt(-l,i.plotY),a.len+l),p=i.plotX+d,f=c,g=bt(u,o),m=yt(u,o)-g;if(xt(m)<s&&s){m=s;n=!a.reversed&&!i.negative||a.reversed&&i.negative;g=xt(g-r)>s?o-s:r-(n?s:0)}i.barX=p;i.pointWidth=h;i.tooltipPos=e.inverted?[a.len+a.pos-e.plotLeft-u,t.xAxis.len-p-f/2,m]:[p+f/2,u+a.pos-e.plotTop,m];i.shapeType="rect";i.shapeArgs=t.crispCol(p,g,f,m)})},getSymbol:Bt,drawLegendSymbol:Ie.drawRectangle,drawGraph:Bt,drawPoints:function(){var t,e,i=this,a=this.chart,o=i.options,r=a.renderer,s=o.animationLimit||250;Jt(i.points,function(h){var c,d=h.plotY,u=h.graphic;if(de(d)&&null!==h.y){t=h.shapeArgs;c=l(i.borderWidth)?{"stroke-width":i.borderWidth}:{};e=h.pointAttr[h.selected?"select":""]||i.pointAttr[""];if(u){se(u);u.attr(c).attr(e)[a.pointCount<s?"animate":"attr"](n(t))}else h.graphic=u=r[h.shapeType](t).attr(c).attr(e).add(h.group||i.group).shadow(o.shadow,null,o.stacking&&!o.borderRadius)}else u&&(h.graphic=u.destroy())})},animate:function(t){var e,i=this,n=this.yAxis,a=i.options,o=this.chart.inverted,r={};if(Et)if(t){r.scaleY=.001;e=bt(n.pos+n.len,yt(n.pos,n.toPixels(a.threshold)));o?r.translateX=e-n.len:r.translateY=e;i.group.attr(r)}else{r[o?"translateX":"translateY"]=n.pos;i.group.animate(r,he(P(i.options.animation),{step:function(t,e){i.group.attr({scaleY:yt(.001,e.pos)})}}));i.animate=null}},remove:function(){var t=this,e=t.chart;e.hasRendered&&Jt(e.series,function(e){e.type===t.type&&(e.isDirty=!0)});$e.prototype.remove.apply(t,arguments)}});Qt.column=Ne;fe.bar=n(fe.column);var We=f(Ne,{type:"bar",inverted:!0});Qt.bar=We;fe.scatter=n(ge,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">â—</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var Ue=f($e,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,drawGraph:function(){this.options.lineWidth&&$e.prototype.drawGraph.call(this)}});Qt.scatter=Ue;fe.pie=n(ge,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return null===this.y?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var Ye=f(_e,{init:function(){_e.prototype.init.apply(this,arguments);var t,e=this;e.name=ue(e.name,"Slice");t=function(t){e.slice("select"===t.type)};ne(e,"select",t);ne(e,"unselect",t);return e},setVisible:function(t,e){var i=this,n=i.series,a=n.chart,o=n.options.ignoreHiddenPoint;e=ue(e,o);if(t!==i.visible){i.visible=i.options.visible=t=t===N?!i.visible:t;n.options.data[Zt(i,n.data)]=i.options;Jt(["graphic","dataLabel","connector","shadowGroup"],function(e){i[e]&&i[e][t?"show":"hide"](!0)});i.legendItem&&a.legend.colorizeItem(i,t);t||"hover"!==i.state||i.setState("");o&&(n.isDirty=!0);e&&a.redraw()}},slice:function(t,e,i){var n,a=this,o=a.series,r=o.chart;A(i,r);e=ue(e,!0);a.sliced=a.options.sliced=t=l(t)?t:!a.sliced;o.options.data[Zt(a,o.data)]=a.options;n=t?a.slicedTranslation:{translateX:0,translateY:0};a.graphic.animate(n);a.shadowGroup&&a.shadowGroup.animate(n)},haloPath:function(t){var e=this.shapeArgs,i=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(i.plotLeft+e.x,i.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),Xe={type:"pie",isCartesian:!1,pointClass:Ye,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},animate:function(t){var e=this,i=e.points,n=e.startAngleRad;if(!t){Jt(i,function(t){var i=t.graphic,a=t.shapeArgs;if(i){i.attr({r:t.startR||e.center[3]/2,start:n,end:n});i.animate({r:a.r,start:a.start,end:a.end},e.options.animation)}});e.animate=null}},updateTotals:function(){var t,e,i=0,n=this.points,a=n.length,o=this.options.ignoreHiddenPoint;for(t=0;t<a;t++){e=n[t];e.y<0&&(e.y=null);i+=o&&!e.visible?0:e.y}this.total=i;for(t=0;t<a;t++){e=n[t];e.percentage=i>0&&(e.visible||!o)?e.y/i*100:0;e.total=i}},generatePoints:function(){$e.prototype.generatePoints.call(this);this.updateTotals()},translate:function(t){this.generatePoints();var e,i,n,a,o,r,s,l=this,h=0,c=l.options,d=c.slicedOffset,u=d+c.borderWidth,p=c.startAngle||0,f=l.startAngleRad=St/180*(p-90),g=l.endAngleRad=St/180*(ue(c.endAngle,p+360)-90),m=g-f,v=l.points,y=c.dataLabels.distance,b=c.ignoreHiddenPoint,x=v.length;t||(l.center=t=l.getCenter());l.getX=function(e,i){n=ft.asin(bt((e-t[1])/(t[2]/2+y),1));return t[0]+(i?-1:1)*(kt(n)*(t[2]/2+y))};for(r=0;r<x;r++){s=v[r];e=f+h*m;b&&!s.visible||(h+=s.percentage/100);i=f+h*m;s.shapeType="arc";s.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:gt(1e3*e)/1e3,end:gt(1e3*i)/1e3};n=(i+e)/2;n>1.5*St?n-=2*St:n<-St/2&&(n+=2*St);s.slicedTranslation={translateX:gt(kt(n)*d),translateY:gt(wt(n)*d)};a=kt(n)*t[2]/2;o=wt(n)*t[2]/2;s.tooltipPos=[t[0]+.7*a,t[1]+.7*o];s.half=n<-St/2||n>St/2?1:0;s.angle=n;u=bt(u,y/2);s.labelPos=[t[0]+a+kt(n)*y,t[1]+o+wt(n)*y,t[0]+a+kt(n)*u,t[1]+o+wt(n)*u,t[0]+a,t[1]+o,y<0?"center":s.half?"right":"left",n]}},drawGraph:null,drawPoints:function(){var t,e,i,n,a,o,r=this,s=r.chart,l=s.renderer,h=r.options.shadow;h&&!r.shadowGroup&&(r.shadowGroup=l.g("shadow").add(r.group));Jt(r.points,function(s){if(null!==s.y){e=s.graphic;a=s.shapeArgs;i=s.shadowGroup;n=s.pointAttr[s.selected?"select":""];n.stroke||(n.stroke=n.fill);h&&!i&&(i=s.shadowGroup=l.g("shadow").add(r.shadowGroup));t=s.sliced?s.slicedTranslation:{translateX:0,translateY:0};i&&i.attr(t);if(e)e.setRadialReference(r.center).attr(n).animate(he(a,t));else{o={"stroke-linejoin":"round"};s.visible||(o.visibility="hidden");s.graphic=e=l[s.shapeType](a).setRadialReference(r.center).attr(n).attr(o).attr(t).add(r.group).shadow(h,i)}}})},searchPoint:Bt,sortByAngle:function(t,e){t.sort(function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e})},drawLegendSymbol:Ie.drawRectangle,getCenter:Ee.getCenter,getSymbol:Bt};Xe=f($e,Xe);Qt.pie=Xe;$e.prototype.drawDataLabels=function(){var t,e,i,a,o=this,r=o.options,s=r.cursor,h=r.dataLabels,c=o.points,d=o.hasRendered||0,u=ue(h.defer,!0),p=o.chart.renderer;if(h.enabled||o._hasPointLabels){o.dlProcessOptions&&o.dlProcessOptions(h);a=o.plotGroup("dataLabelsGroup","data-labels",u&&!d?"hidden":"visible",h.zIndex||6);if(u){a.attr({opacity:+d});d||ne(o,"afterAnimate",function(){o.visible&&a.show(!0);a[r.animation?"animate":"attr"]({opacity:1},{duration:200})})}e=h;Jt(c,function(c){var d,u,f,g,m,v,y=c.dataLabel,x=c.connector,k=!0,w={};t=c.dlOptions||c.options&&c.options.dataLabels;d=ue(t&&t.enabled,e.enabled)&&null!==c.y;if(y&&!d)c.dataLabel=y.destroy();else if(d){h=n(e,t);v=h.style;m=h.rotation;u=c.getLabelConfig();i=h.format?b(h.format,u):h.formatter.call(u,h);v.color=ue(h.color,v.color,o.color,"black");if(y)if(l(i)){y.attr({text:i});k=!1}else{c.dataLabel=y=y.destroy();x&&(c.connector=x.destroy())}else if(l(i)){f={fill:h.backgroundColor,stroke:h.borderColor,"stroke-width":h.borderWidth,r:h.borderRadius||0,rotation:m,padding:h.padding,zIndex:1};"contrast"===v.color&&(w.color=h.inside||h.distance<0||r.stacking?p.getContrast(c.color||o.color):"#000000");s&&(w.cursor=s);for(g in f)f[g]===N&&delete f[g];y=c.dataLabel=p[m?"text":"label"](i,0,-9999,h.shape,null,null,h.useHTML).attr(f).css(he(v,w)).add(a).shadow(h.shadow)}y&&o.alignDataLabel(c,y,h,null,k)}})}};$e.prototype.alignDataLabel=function(t,e,i,n,a){var o,r,s,l,h=this.chart,c=h.inverted,d=ue(t.plotX,-9999),u=ue(t.plotY,-9999),p=e.getBBox(),f=h.renderer.fontMetrics(i.style.fontSize).b,g=i.rotation,m=i.align,v=this.visible&&(t.series.forceDL||h.isInsidePlot(d,gt(u),c)||n&&h.isInsidePlot(d,c?n.x+1:n.y+n.height-1,c)),y="justify"===ue(i.overflow,"justify");if(v){n=he({x:c?h.plotWidth-u:d,y:gt(c?h.plotHeight-d:u),width:0,height:0},n);he(i,{width:p.width,height:p.height});if(g){y=!1;s=h.renderer.rotCorr(f,g);l={x:n.x+i.x+n.width/2+s.x,y:n.y+i.y+{top:0,middle:.5,bottom:1}[i.verticalAlign]*n.height};e[a?"attr":"animate"](l).attr({align:m});o=(g+720)%360;r=o>180&&o<360;if("left"===m)l.y-=r?p.height:0;else if("center"===m){l.x-=p.width/2;l.y-=p.height/2}else if("right"===m){l.x-=p.width;l.y-=r?0:p.height}}else{e.align(i,null,n);l=e.alignAttr}y?this.justifyDataLabel(e,i,l,p,n,a):ue(i.crop,!0)&&(v=h.isInsidePlot(l.x,l.y)&&h.isInsidePlot(l.x+p.width,l.y+p.height));i.shape&&!g&&e.attr({anchorX:t.plotX,anchorY:t.plotY})}if(!v){se(e);e.attr({y:-9999});e.placed=!1}};$e.prototype.justifyDataLabel=function(t,e,i,n,a,o){var r,s,l=this.chart,h=e.align,c=e.verticalAlign,d=t.box?0:t.padding||0;r=i.x+d;if(r<0){"right"===h?e.align="left":e.x=-r;s=!0}r=i.x+n.width-d;if(r>l.plotWidth){"left"===h?e.align="right":e.x=l.plotWidth-r;s=!0}r=i.y+d;if(r<0){"bottom"===c?e.verticalAlign="top":e.y=-r;s=!0}r=i.y+n.height-d;if(r>l.plotHeight){"top"===c?e.verticalAlign="bottom":e.y=l.plotHeight-r;s=!0}if(s){t.placed=!o;t.align(e,null,a)}};if(Qt.pie){Qt.pie.prototype.drawDataLabels=function(){var t,e,i,n,a,o,r,s,l,h,c,d,u,p=this,f=p.data,g=p.chart,m=p.options.dataLabels,v=ue(m.connectorPadding,10),y=ue(m.connectorWidth,1),b=g.plotWidth,x=g.plotHeight,k=ue(m.softConnector,!0),w=m.distance,S=p.center,D=S[2]/2,T=S[1],M=w>0,A=[[],[]],P=[0,0,0,0],L=function(t,e){return e.y-t.y};if(p.visible&&(m.enabled||p._hasPointLabels)){$e.prototype.drawDataLabels.apply(p);Jt(f,function(t){if(t.dataLabel&&t.visible){A[t.half].push(t);t.dataLabel._pos=null}});d=2;for(;d--;){var I,O,E,_,$=[],R=[],F=A[d],B=F.length;if(B){p.sortByAngle(F,d-.5);u=r=0;for(;!r&&F[u];){r=F[u]&&F[u].dataLabel&&(F[u].dataLabel.getBBox().height||21);u++}if(w>0){E=bt(T+D+w,g.plotHeight);for(O=yt(0,T-D-w);O<=E;O+=r)$.push(O);I=$.length;if(B>I){c=[].concat(F);c.sort(L);u=B;for(;u--;)c[u].rank=u;u=B;for(;u--;)F[u].rank>=I&&F.splice(u,1);B=F.length}for(u=0;u<B;u++){t=F[u];o=t.labelPos;var z,H,N=9999;for(H=0;H<I;H++){z=xt($[H]-o[1]);if(z<N){N=z;_=H}}if(_<u&&null!==$[u])_=u;else if(I<B-u+_&&null!==$[u]){_=I-B+u;for(;null===$[_];)_++}else for(;null===$[_];)_++;R.push({i:_,y:$[_]});$[_]=null}R.sort(L)}for(u=0;u<B;u++){var W,U;t=F[u];o=t.labelPos;n=t.dataLabel;h=!1===t.visible?"hidden":"inherit";U=o[1];if(w>0){W=R.pop();_=W.i;l=W.y;(U>l&&null!==$[_+1]||U<l&&null!==$[_-1])&&(l=bt(yt(0,U),g.plotHeight))}else l=U;s=m.justify?S[0]+(d?-1:1)*(D+w):p.getX(l===T-D-w||l===T+D+w?U:l,d);n._attr={visibility:h,align:o[6]};n._pos={x:s+m.x+({left:v,right:-v}[o[6]]||0),y:l+m.y-10};n.connX=s;n.connY=l;if(null===this.options.size){a=n.width;s-a<v?P[3]=yt(gt(a-s+v),P[3]):s+a>b-v&&(P[1]=yt(gt(s+a-b+v),P[1]));l-r/2<0?P[0]=yt(gt(r/2-l),P[0]):l+r/2>x&&(P[2]=yt(gt(l+r/2-x),P[2]))}}}}if(0===C(P)||this.verifyDataLabelOverflow(P)){this.placeDataLabels();M&&y&&Jt(this.points,function(t){e=t.connector;o=t.labelPos;n=t.dataLabel;if(n&&n._pos&&t.visible){h=n._attr.visibility;s=n.connX;l=n.connY;i=k?[Vt,s+("left"===o[6]?5:-5),l,"C",s,l,2*o[2]-o[4],2*o[3]-o[5],o[2],o[3],Gt,o[4],o[5]]:[Vt,s+("left"===o[6]?5:-5),l,Gt,o[2],o[3],Gt,o[4],o[5]];if(e){e.animate({d:i});e.attr("visibility",h)}else t.connector=e=p.chart.renderer.path(i).attr({"stroke-width":y,stroke:m.connectorColor||t.color||"#606060",visibility:h}).add(p.dataLabelsGroup)}else e&&(t.connector=e.destroy())})}}};Qt.pie.prototype.placeDataLabels=function(){Jt(this.points,function(t){var e,i=t.dataLabel;if(i&&t.visible){e=i._pos;if(e){i.attr(i._attr);i[i.moved?"animate":"attr"](e);i.moved=!0}else i&&i.attr({y:-9999})}})};Qt.pie.prototype.alignDataLabel=Bt;Qt.pie.prototype.verifyDataLabelOverflow=function(t){var e,i=this.center,n=this.options,a=n.center,o=n.minSize||80,r=o;if(null!==a[0])r=yt(i[2]-yt(t[1],t[3]),o);else{r=yt(i[2]-t[1]-t[3],o);i[0]+=(t[3]-t[1])/2}if(null!==a[1])r=yt(bt(r,i[2]-yt(t[0],t[2])),o);else{r=yt(bt(r,i[2]-t[0]-t[2]),o);i[1]+=(t[0]-t[2])/2}if(r<i[2]){i[2]=r;i[3]=Math.min(m(n.innerSize||0,r),r);this.translate(i);this.drawDataLabels&&this.drawDataLabels()}else e=!0;return e}}Qt.column&&(Qt.column.prototype.alignDataLabel=function(t,e,i,a,o){var r,s=this.chart.inverted,l=t.series,h=t.dlBox||t.shapeArgs,c=ue(t.below,t.plotY>ue(this.translatedThreshold,l.yAxis.len)),d=ue(i.inside,!!this.options.stacking);if(h){a=n(h);if(a.y<0){a.height+=a.y;a.y=0}r=a.y+a.height-l.yAxis.len;r>0&&(a.height-=r);s&&(a={x:l.yAxis.len-a.y-a.height,y:l.xAxis.len-a.x-a.width,width:a.height,height:a.width});if(!d)if(s){a.x+=c?0:a.width;a.width=0}else{a.y+=c?a.height:0;a.height=0}}i.align=ue(i.align,!s||d?"center":c?"right":"left");i.verticalAlign=ue(i.verticalAlign,s||d?"middle":c?"top":"bottom");$e.prototype.alignDataLabel.call(this,t,e,i,a,o)});!function(t){var e=t.Chart,i=t.each,n=t.pick,a=t.addEvent;e.prototype.callbacks.push(function(t){function e(){var e=[];i(t.series,function(t){var a=t.options.dataLabels,o=t.dataLabelCollections||["dataLabel"];(a.enabled||t._hasPointLabels)&&!a.allowOverlap&&t.visible&&i(o,function(a){i(t.points,function(t){if(t[a]){t[a].labelrank=n(t.labelrank,t.shapeArgs&&t.shapeArgs.height);e.push(t[a])}})})});t.hideOverlappingLabels(e)}e();a(t,"redraw",e)});e.prototype.hideOverlappingLabels=function(t){var e,n,a,o,r,s,l,h,c,d,u,p=t.length;for(n=0;n<p;n++){e=t[n];if(e){e.oldOpacity=e.opacity;e.newOpacity=1}}t.sort(function(t,e){return(e.labelrank||0)-(t.labelrank||0)});for(n=0;n<p;n++){o=t[n];for(a=n+1;a<p;++a){r=t[a];if(o&&r&&o.placed&&r.placed&&0!==o.newOpacity&&0!==r.newOpacity){l=o.alignAttr;h=r.alignAttr;c=o.parentGroup;d=r.parentGroup;u=2*(o.box?0:o.padding);s=function(t,e,i,n,a,o,r,s){return!(a>t+i||a+r<t||o>e+n||o+s<e)}(l.x+c.translateX,l.y+c.translateY,o.width-u,o.height-u,h.x+d.translateX,h.y+d.translateY,r.width-u,r.height-u);s&&((o.labelrank<r.labelrank?o:r).newOpacity=0)}}}i(t,function(t){var e,i;if(t){i=t.newOpacity;if(t.oldOpacity!==i&&t.placed){i?t.show(!0):e=function(){t.hide()};t.alignAttr.opacity=i;t[t.isOld?"animate":"attr"](t.alignAttr,null,e)}t.isOld=!0}})}}(ut);var Ve=ut.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart,i=e.pointer,n=t.options.cursor,a=n&&{cursor:n},o=function(t){for(var i,n=t.target;n&&!i;){i=n.point;n=n.parentNode}i!==N&&i!==e.hoverPoint&&i.onMouseOver(t)};Jt(t.points,function(t){t.graphic&&(t.graphic.element.point=t);t.dataLabel&&(t.dataLabel.element.point=t)});if(!t._hasTracking){Jt(t.trackerGroups,function(e){if(t[e]){t[e].addClass(Ut+"tracker").on("mouseover",o).on("mouseout",function(t){i.onTrackerMouseOut(t)}).css(a);U&&t[e].on("touchstart",o)}});t._hasTracking=!0}},drawTrackerGraph:function(){var t,e=this,i=e.options,n=i.trackByArea,a=[].concat(n?e.areaPath:e.graphPath),o=a.length,r=e.chart,s=r.pointer,l=r.renderer,h=r.options.tooltip.snap,c=e.tracker,d=i.cursor,u=d&&{cursor:d},p=function(){r.hoverSeries!==e&&e.onMouseOver()},f="rgba(192,192,192,"+(Et?1e-4:.002)+")";if(o&&!n){t=o+1;for(;t--;){a[t]===Vt&&a.splice(t+1,0,a[t+1]-h,a[t+2],Gt);(t&&a[t]===Vt||t===o)&&a.splice(t,0,Gt,a[t-2]+h,a[t-1])}}if(c)c.attr({d:a});else{e.tracker=l.path(a).attr({"stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:f,fill:n?f:Xt,"stroke-width":i.lineWidth+(n?0:2*h),zIndex:2}).add(e.group);Jt([e.tracker,e.markerGroup],function(t){t.addClass(Ut+"tracker").on("mouseover",p).on("mouseout",function(t){s.onTrackerMouseOut(t)}).css(u);U&&t.on("touchstart",p)})}}};Qt.column&&(Ne.prototype.drawTracker=Ve.drawTrackerPoint);Qt.pie&&(Qt.pie.prototype.drawTracker=Ve.drawTrackerPoint);Qt.scatter&&(Ue.prototype.drawTracker=Ve.drawTrackerPoint);he(Le.prototype,{setItemEvents:function(t,e,i,n,a){var o=this;(i?e:t.legendGroup).on("mouseover",function(){t.setState("hover");e.css(o.options.itemHoverStyle)}).on("mouseout",function(){e.css(t.visible?n:a);t.setState()}).on("click",function(e){var i=function(){t.setVisible&&t.setVisible()};e={browserEvent:e};t.firePointEvent?t.firePointEvent("legendItemClick",e,i):oe(t,"legendItemClick",e,i)})},createCheckboxForItem:function(t){var e=this;t.checkbox=p("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},e.options.itemCheckboxStyle,e.chart.container);ne(t.checkbox,"click",function(e){var i=e.target;oe(t.series||t,"checkboxClick",{checked:i.checked,item:t},function(){t.select()})})}});X.legend.itemStyle.cursor="pointer";he(Oe.prototype,{showResetZoom:function(){function t(){e.zoomOut()}var e=this,i=X.lang,n=e.options.chart.resetZoomButton,a=n.theme,o=a.states,r="chart"===n.relativeTo?null:"plotBox";this.resetZoomButton=e.renderer.button(i.resetZoom,null,null,t,a,o&&o.hover).attr({align:n.position.align,title:i.resetZoomTitle}).add().align(n.position,!1,r)},zoomOut:function(){var t=this;oe(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,i,n=this,a=n.pointer,o=!1;!t||t.resetSelection?Jt(n.axes,function(t){e=t.zoom()}):Jt(t.xAxis.concat(t.yAxis),function(t){var i=t.axis,n=i.isXAxis;if(a[n?"zoomX":"zoomY"]||a[n?"pinchX":"pinchY"]){e=i.zoom(t.min,t.max);i.displayBtn&&(o=!0)}});i=n.resetZoomButton;o&&!i?n.showResetZoom():!o&&ce(i)&&(n.resetZoomButton=i.destroy());e&&n.redraw(ue(n.options.chart.animation,t&&t.animation,n.pointCount<100))},pan:function(t,e){var i,n=this,a=n.hoverPoints;a&&Jt(a,function(t){t.setState()});Jt("xy"===e?[1,0]:[1],function(e){var a=n[e?"xAxis":"yAxis"][0],o=a.horiz,r=t[o?"chartX":"chartY"],s=o?"mouseDownX":"mouseDownY",l=n[s],h=(a.pointRange||0)/2,c=a.getExtremes(),d=a.toValue(l-r,!0)+h,u=a.toValue(l+a.len-r,!0)-h,p=l>r;if(a.series.length&&(p||d>bt(c.dataMin,c.min))&&(!p||u<yt(c.dataMax,c.max))){a.setExtremes(d,u,!1,!1,{trigger:"pan"});i=!0}n[s]=r});i&&n.redraw(!1);u(n.container,{cursor:"move"})}});he(_e.prototype,{select:function(t,e){var i=this,n=i.series,a=n.chart;t=ue(t,!i.selected);i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t;n.options.data[Zt(i,n.data)]=i.options;i.setState(t&&"select");e||Jt(a.getSelectedPoints(),function(t){if(t.selected&&t!==i){t.selected=t.options.selected=!1;n.options.data[Zt(t,n.data)]=t.options;t.setState("");t.firePointEvent("unselect")}})})},onMouseOver:function(t,e){var i=this,n=i.series,a=n.chart,o=a.tooltip,r=a.hoverPoint;a.hoverSeries!==n&&n.onMouseOver();r&&r!==i&&r.onMouseOut();if(i.series){i.firePointEvent("mouseOver");!o||o.shared&&!n.noSharedTooltip||o.refresh(i,t);i.setState("hover");e||(a.hoverPoint=i)}},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;this.firePointEvent("mouseOut");if(!e||-1===Zt(this,e)){this.setState();t.hoverPoint=null}},importEvents:function(){if(!this.hasImportedEvents){var t,e=this,i=n(e.series.options.point,e.options),a=i.events;e.events=a;for(t in a)ne(e,t,a[t])
;this.hasImportedEvents=!0}},setState:function(t,e){var i,a,o,r,s=this,l=mt(s.plotX),h=s.plotY,c=s.series,d=c.options.states,u=fe[c.type].marker&&c.options.marker,p=u&&!u.enabled,f=u&&u.states[t],g=f&&!1===f.enabled,m=c.stateMarkerGraphic,v=s.marker||{},y=c.chart,b=c.halo;t=t||"";r=s.pointAttr[t]||c.pointAttr[t];if(!(t===s.state&&!e||s.selected&&"select"!==t||d[t]&&!1===d[t].enabled||t&&(g||p&&!1===f.enabled)||t&&v.states&&v.states[t]&&!1===v.states[t].enabled)){if(s.graphic){i=u&&s.graphic.symbolName&&r.r;s.graphic.attr(n(r,i?{x:l-i,y:h-i,width:2*i,height:2*i}:{}));m&&m.hide()}else{if(t&&f){i=f.radius;o=v.symbol||c.symbol;m&&m.currentSymbol!==o&&(m=m.destroy());if(m)m[e?"animate":"attr"]({x:l-i,y:h-i});else if(o){c.stateMarkerGraphic=m=y.renderer.symbol(o,l-i,h-i,2*i,2*i).attr(r).add(c.markerGroup);m.currentSymbol=o}}if(m){m[t&&y.isInsidePlot(l,h,y.inverted)?"show":"hide"]();m.element.point=s}}a=d[t]&&d[t].halo;if(a&&a.size){b||(c.halo=b=y.renderer.path().add(y.seriesGroup));b.attr(he({fill:s.color||c.color,"fill-opacity":a.opacity,zIndex:-1},a.attributes))[e?"animate":"attr"]({d:s.haloPath(a.size)})}else b&&b.attr({d:[]});s.state=t}},haloPath:function(t){var e=this.series,i=e.chart,n=e.getPlotBox(),a=i.inverted,o=Math.floor(this.plotX);return i.renderer.symbols.circle(n.translateX+(a?e.yAxis.len-this.plotY:o)-t,n.translateY+(a?e.xAxis.len-o:this.plotY)-t,2*t,2*t)}});he($e.prototype,{onMouseOver:function(){var t=this,e=t.chart,i=e.hoverSeries;i&&i!==t&&i.onMouseOut();t.options.events.mouseOver&&oe(t,"mouseOver");t.setState("hover");e.hoverSeries=t},onMouseOut:function(){var t=this,e=t.options,i=t.chart,n=i.tooltip,a=i.hoverPoint;i.hoverSeries=null;a&&a.onMouseOut();t&&e.events.mouseOut&&oe(t,"mouseOut");!n||e.stickyTracking||n.shared&&!t.noSharedTooltip||n.hide();t.setState()},setState:function(t){var e,i=this,n=i.options,a=i.graph,o=n.states,r=n.lineWidth,s=0;t=t||"";if(i.state!==t){i.state=t;if(o[t]&&!1===o[t].enabled)return;t&&(r=o[t].lineWidth||r+(o[t].lineWidthPlus||0));if(a&&!a.dashstyle){e={"stroke-width":r};a.attr(e);for(;i["zoneGraph"+s];){i["zoneGraph"+s].attr(e);s+=1}}}},setVisible:function(t,e){var i,n=this,a=n.chart,o=n.legendItem,r=a.options.chart.ignoreHiddenSeries,s=n.visible;n.visible=t=n.userOptions.visible=t===N?!s:t;i=t?"show":"hide";Jt(["group","dataLabelsGroup","markerGroup","tracker"],function(t){n[t]&&n[t][i]()});a.hoverSeries!==n&&(a.hoverPoint&&a.hoverPoint.series)!==n||n.onMouseOut();o&&a.legend.colorizeItem(n,t);n.isDirty=!0;n.options.stacking&&Jt(a.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)});Jt(n.linkedSeries,function(e){e.setVisible(t,!1)});r&&(a.isDirtyBox=!0);!1!==e&&a.redraw();oe(n,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){var e=this;e.selected=t=t===N?!e.selected:t;e.checkbox&&(e.checkbox.checked=t);oe(e,t?"select":"unselect")},drawTracker:Ve.drawTrackerGraph});pe($e.prototype,"init",function(t){var e,i=this;t.apply(this,Array.prototype.slice.call(arguments,1));e=i.xAxis;e&&e.options.ordinal&&ne(i,"updatedData",function(){delete e.ordinalIndex})});pe(we.prototype,"getTimeTicks",function(t,e,i,n,a,o,r,s){var h,c,d,u,p,f,g=0,m={},v=[],y=-Number.MAX_VALUE,b=this.options.tickPixelInterval;if(!this.options.ordinal&&!this.options.breaks||!o||o.length<3||i===N)return t.call(this,e,i,n,a);p=o.length;for(h=0;h<p;h++){f=h&&o[h-1]>n;o[h]<i&&(g=h);if(h===p-1||o[h+1]-o[h]>5*r||f){if(o[h]>y){c=t.call(this,e,o[g],o[h],a);for(;c.length&&c[0]<=y;)c.shift();c.length&&(y=c[c.length-1]);v=v.concat(c)}g=h+1}if(f)break}u=c.info;if(s&&u.unitRange<=G.hour){h=v.length-1;for(g=1;g<h;g++)if(V("%d",v[g])!==V("%d",v[g-1])){m[v[g]]="day";d=!0}d&&(m[v[0]]="day");u.higherRanks=m}v.info=u;if(s&&l(b)){for(var x,k,w,S,C,D=v.length,T=D,M=[],A=[];T--;){k=this.translate(v[T]);w&&(A[T]=w-k);M[T]=w=k}A.sort();S=A[mt(A.length/2)];S<.6*b&&(S=null);T=v[D-1]>n?D-1:D;w=void 0;for(;T--;){k=M[T];C=w-k;if(w&&C<.8*b&&(null===S||C<.8*S)){if(m[v[T]]&&!m[v[T+1]]){x=T+1;w=k}else x=T;v.splice(x,1)}else w=k}}return v});he(we.prototype,{beforeSetTickPositions:function(){var t,e,i,n,a,o,r=this,s=[],l=!1,h=r.getExtremes(),c=h.min,d=h.max,u=r.isXAxis&&!!r.options.breaks,p=r.options.ordinal;if(p||u){Jt(r.series,function(e,i){if(!1!==e.visible&&(!1!==e.takeOrdinalPosition||u)){s=s.concat(e.processedXData);t=s.length;s.sort(function(t,e){return t-e});if(t){i=t-1;for(;i--;)s[i]===s[i+1]&&s.splice(i,1)}}});t=s.length;if(t>2){e=s[1]-s[0];o=t-1;for(;o--&&!l;)s[o+1]-s[o]!==e&&(l=!0);!r.options.keepOrdinalPadding&&(s[0]-c>e||d-s[s.length-1]>e)&&(l=!0)}if(l){r.ordinalPositions=s;i=r.val2lin(yt(c,s[0]),!0);n=yt(r.val2lin(bt(d,s[s.length-1]),!0),1);r.ordinalSlope=a=(d-c)/(n-i);r.ordinalOffset=c-i*a}else r.ordinalPositions=r.ordinalSlope=r.ordinalOffset=N}r.isOrdinal=p&&l;r.groupIntervalFactor=null},val2lin:function(t,e){var i,n=this,a=n.ordinalPositions;if(a){var o,r,s,l=a.length;o=l;for(;o--;)if(a[o]===t){s=o;break}o=l-1;for(;o--;)if(t>a[o]||0===o){r=(t-a[o])/(a[o+1]-a[o]);s=o+r;break}i=e?s:n.ordinalSlope*(s||0)+n.ordinalOffset}else i=t;return i},lin2val:function(t,e){var i,n=this,a=n.ordinalPositions;if(a){var o,r,s,l=n.ordinalSlope,h=n.ordinalOffset,c=a.length-1;if(e)if(t<0)t=a[0];else if(t>c)t=a[c];else{c=mt(t);s=t-c}else for(;c--;){o=l*c+h;if(t>=o){r=l*(c+1)+h;s=(t-o)/(r-o);break}}i=s!==N&&a[c]!==N?a[c]+(s?s*(a[c+1]-a[c]):0):t}else i=t;return i},getExtendedPositions:function(){var t,e,i=this,n=i.chart,a=i.series[0].currentDataGrouping,o=i.ordinalIndex,r=a?a.count+a.unitName:"raw",s=i.getExtremes();o||(o=i.ordinalIndex={});if(!o[r]){t={series:[],getExtremes:function(){return{min:s.dataMin,max:s.dataMax}},options:{ordinal:!0},val2lin:we.prototype.val2lin};Jt(i.series,function(i){e={xAxis:t,xData:i.xData,chart:n,destroyGroupedData:Bt};e.options={dataGrouping:a?{enabled:!0,forced:!0,approximation:"open",units:[[a.unitName,[a.count]]]}:{enabled:!1}};i.processData.apply(e);t.series.push(e)});i.beforeSetTickPositions.apply(t);o[r]=t.ordinalPositions}return o[r]},getGroupIntervalFactor:function(t,e,i){var n,a,o=i.processedXData,r=o.length,s=[],l=this.groupIntervalFactor;if(!l){for(n=0;n<r-1;n++)s[n]=o[n+1]-o[n];s.sort(function(t,e){return t-e});a=s[mt(r/2)];t=yt(t,o[0]);e=bt(e,o[r-1]);this.groupIntervalFactor=l=r*a/(e-t)}return l},postProcessTickInterval:function(t){var e,i=this.ordinalSlope;e=i?this.options.breaks?this.closestPointRange:t/(i/this.closestPointRange):t;return e}});pe(Oe.prototype,"pan",function(t,e){var i=this,n=i.xAxis[0],a=e.chartX,o=!1;if(n.options.ordinal&&n.series.length){var r,s,l,h,c=i.mouseDownX,d=n.getExtremes(),p=d.dataMax,f=d.min,g=d.max,m=i.hoverPoints,v=n.closestPointRange,y=n.translationSlope*(n.ordinalSlope||v),b=(c-a)/y,x={ordinalPositions:n.getExtendedPositions()},k=n.lin2val,w=n.val2lin;if(x.ordinalPositions){if(xt(b)>1){m&&Jt(m,function(t){t.setState()});if(b<0){l=x;h=n.ordinalPositions?n:x}else{l=n.ordinalPositions?n:x;h=x}s=h.ordinalPositions;p>s[s.length-1]&&s.push(p);i.fixedRange=g-f;r=n.toFixedRange(null,null,k.apply(l,[w.apply(l,[f,!0])+b,!0]),k.apply(h,[w.apply(h,[g,!0])+b,!0]));r.min>=bt(d.dataMin,f)&&r.max<=yt(p,g)&&n.setExtremes(r.min,r.max,!0,!1,{trigger:"pan"});i.mouseDownX=a;u(i.container,{cursor:"move"})}}else o=!0}else o=!0;o&&t.apply(this,Array.prototype.slice.call(arguments,1))});$e.prototype.gappedPath=function(){var t=this.options.gapSize,e=this.points.slice(),i=e.length-1;if(t&&i>0)for(;i--;)e[i+1].x-e[i].x>this.closestPointRange*t&&e.splice(i+1,0,{isNull:!0});return this.getGraphPath(e)};!function(t){!function(t){"use strict";function e(){return Array.prototype.slice.call(arguments,1)}function i(t){t.apply(this);this.drawBreaks(this.xAxis,["x"]);this.drawBreaks(this.yAxis,n(this.pointArrayMap,["y"]))}var n=t.pick,a=t.wrap,o=t.each,r=t.extend,s=t.fireEvent,l=t.Axis,h=t.Series;r(l.prototype,{isInBreak:function(t,e){var i,n=t.repeat||1/0,a=t.from,o=t.to-t.from,r=e>=a?(e-a)%n:n-(a-e)%n;i=t.inclusive?r<=o:r<o&&0!==r;return i},isInAnyBreak:function(t,e){var i,a,o,r=this.options.breaks,s=r&&r.length;if(s){for(;s--;)if(this.isInBreak(r[s],t)){i=!0;a||(a=n(r[s].showPoints,!this.isXAxis))}o=i&&e?i&&!a:i}return o}});a(l.prototype,"setTickPositions",function(t){t.apply(this,Array.prototype.slice.call(arguments,1));if(this.options.breaks){var e,i=this,n=this.tickPositions,a=this.tickPositions.info,o=[];for(e=0;e<n.length;e++)i.isInAnyBreak(n[e])||o.push(n[e]);this.tickPositions=o;this.tickPositions.info=a}});a(l.prototype,"init",function(t,e,i){i.breaks&&i.breaks.length&&(i.ordinal=!1);t.call(this,e,i);if(this.options.breaks){var n=this;n.isBroken=!0;this.val2lin=function(t){var e,i,a=t;for(i=0;i<n.breakArray.length;i++){e=n.breakArray[i];if(e.to<=t)a-=e.len;else{if(e.from>=t)break;if(n.isInBreak(e,t)){a-=t-e.from;break}}}return a};this.lin2val=function(t){var e,i,a=t;for(i=0;i<n.breakArray.length;i++){e=n.breakArray[i];if(e.from>=a)break;e.to<a?a+=e.len:n.isInBreak(e,a)&&(a+=e.len)}return a};this.setExtremes=function(t,e,i,n,a){for(;this.isInAnyBreak(t);)t-=this.closestPointRange;for(;this.isInAnyBreak(e);)e-=this.closestPointRange;l.prototype.setExtremes.call(this,t,e,i,n,a)};this.setAxisTranslation=function(t){l.prototype.setAxisTranslation.call(this,t);var e,i,a,o,r,h,c=n.options.breaks,d=[],u=[],p=0,f=n.userMin||n.min,g=n.userMax||n.max;for(r in c){a=c[r];i=a.repeat||1/0;n.isInBreak(a,f)&&(f+=a.to%i-f%i);n.isInBreak(a,g)&&(g-=g%i-a.from%i)}for(r in c){a=c[r];o=a.from;i=a.repeat||1/0;for(;o-i>f;)o-=i;for(;o<f;)o+=i;for(h=o;h<g;h+=i){d.push({value:h,move:"in"});d.push({value:h+(a.to-a.from),move:"out",size:a.breakSize})}}d.sort(function(t,e){var i;i=t.value===e.value?("in"===t.move?0:1)-("in"===e.move?0:1):t.value-e.value;return i});e=0;o=f;for(r in d){a=d[r];e+="in"===a.move?1:-1;1===e&&"in"===a.move&&(o=a.value);if(0===e){u.push({from:o,to:a.value,len:a.value-o-(a.size||0)});p+=a.value-o-(a.size||0)}}n.breakArray=u;s(n,"afterBreaks");n.transA*=(g-n.min)/(g-f-p);n.min=f;n.max=g}}});a(h.prototype,"generatePoints",function(t){t.apply(this,e(arguments));var i,n,a=this,o=a.xAxis,r=a.yAxis,s=a.points,l=s.length,h=a.options.connectNulls;if(o&&r&&(o.options.breaks||r.options.breaks))for(;l--;){i=s[l];n=null===i.y&&!1===h;if(!n&&(o.isInAnyBreak(i.x,!0)||r.isInAnyBreak(i.y,!0))){s.splice(l,1);this.data[l]&&this.data[l].destroyElements()}}});t.Series.prototype.drawBreaks=function(t,e){var i,a,r,l,h=this,c=h.points;o(e,function(e){i=t.breakArray||[];a=t.isXAxis?t.min:n(h.options.threshold,t.min);o(c,function(h){l=n(h["stack"+e.toUpperCase()],h[e]);o(i,function(e){r=!1;a<e.from&&l>e.to||a>e.from&&l<e.from?r="pointBreak":(a<e.from&&l>e.from&&l<e.to||a>e.from&&l>e.to&&l<e.from)&&(r="pointInBreak");r&&s(t,r,{point:h,brk:e})})})})};a(t.seriesTypes.column.prototype,"drawPoints",i);a(t.Series.prototype,"drawPoints",i)}(ut)}();var Ge=$e.prototype,qe=Ge.processData,je=Ge.generatePoints,Qe=Ge.destroy,Ke={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},Ze={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},Je=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],ti={sum:function(t){var e,i=t.length;if(!i&&t.hasNulls)e=null;else if(i){e=0;for(;i--;)e+=t[i]}return e},average:function(t){var e=t.length,i=ti.sum(t);de(i)&&e&&(i/=e);return i},open:function(t){return t.length?t[0]:t.hasNulls?null:N},high:function(t){return t.length?C(t):t.hasNulls?null:N},low:function(t){return t.length?S(t):t.hasNulls?null:N},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:N},ohlc:function(t,e,i,n){t=ti.open(t);e=ti.high(e);i=ti.low(i);n=ti.close(n);if(de(t)||de(e)||de(i)||de(n))return[t,e,i,n]},range:function(t,e){t=ti.low(t);e=ti.high(e);if(de(t)||de(e))return[t,e]}};Ge.groupData=function(t,e,i,n){var a,o,r,s,l=this,h=l.data,c=l.options.data,d=[],u=[],p=[],f=t.length,g=!!e,m=[[],[],[],[]],v="function"==typeof n?n:ti[n],y=l.pointArrayMap,b=y&&y.length,x=0,k=0;for(s=0;s<=f&&!(t[s]>=i[0]);s++);for(s;s<=f;s++){for(;void 0!==i[x+1]&&t[s]>=i[x+1]||s===f;){a=i[x];r=v.apply(0,m);if(r!==N){d.push(a);u.push(r);p.push({start:k,length:m[0].length})}k=s;m[0]=[];m[1]=[];m[2]=[];m[3]=[];x+=1;if(s===f)break}if(s===f)break;if(y){var w,S,C=l.cropStart+s,D=h&&h[C]||l.pointClass.prototype.applyOptions.apply({series:l},[c[C]]);for(w=0;w<b;w++){S=D[y[w]];de(S)?m[w].push(S):null===S&&(m[w].hasNulls=!0)}}else{o=g?e[s]:null;de(o)?m[0].push(o):null===o&&(m[0].hasNulls=!0)}}return[d,u,p]};Ge.processData=function(){var t,e,i=this,n=i.chart,a=i.options,o=a.dataGrouping,r=!1!==i.allowDG&&o&&ue(o.enabled,n.options._stock);i.forceCrop=r;i.groupPixelWidth=null;i.hasProcessed=!0;e=!1===qe.apply(i,arguments)||!r;if(!e){i.destroyGroupedData();var s,h=i.processedXData,c=i.processedYData,d=n.plotSizeX,u=i.xAxis,p=u.options.ordinal,f=i.groupPixelWidth=u.getGroupPixelWidth&&u.getGroupPixelWidth();if(f){t=!0;i.points=null;var g=u.getExtremes(),m=g.min,v=g.max,y=p&&u.getGroupIntervalFactor(m,v,i)||1,b=f*(v-m)/d*y,x=u.getTimeTicks(u.normalizeTimeTickInterval(b,o.units||Je),Math.min(m,h[0]),Math.max(v,h[h.length-1]),u.options.startOfWeek,h,i.closestPointRange),k=Ge.groupData.apply(i,[h,c,x,o.approximation]),w=k[0],S=k[1];if(o.smoothed){s=w.length-1;w[s]=Math.min(w[s],v);for(;s--&&s>0;)w[s]+=b/2;w[0]=Math.max(w[0],m)}i.currentDataGrouping=x.info;i.closestPointRange=x.info.totalRange;i.groupMap=k[2];if(l(w[0])&&w[0]<u.dataMin){u.min===u.dataMin&&(u.min=w[0]);u.dataMin=w[0]}i.processedXData=w;i.processedYData=S}else i.currentDataGrouping=i.groupMap=null;i.hasGroupedData=t}};Ge.destroyGroupedData=function(){var t=this.groupedData;Jt(t||[],function(e,i){e&&(t[i]=e.destroy?e.destroy():null)});this.groupedData=null};Ge.generatePoints=function(){je.apply(this);this.destroyGroupedData();this.groupedData=this.hasGroupedData?this.points:null};pe(Se.prototype,"tooltipFooterHeaderFormatter",function(t,e,i){var n,a,o,r,s,l=this,h=e.series,c=h.options,d=h.tooltipOptions,u=c.dataGrouping,p=d.xDateFormat,f=h.xAxis;if(f&&"datetime"===f.options.type&&u&&de(e.key)){a=h.currentDataGrouping;o=u.dateTimeLabelFormats;if(a){r=o[a.unitName];if(1===a.count)p=r[0];else{p=r[1];n=r[2]}}else!p&&o&&(p=l.getXDateFormat(e,d,f));s=V(p,e.key);n&&(s+=V(n,e.key+a.totalRange-1));return b(d[(i?"footer":"header")+"Format"],{point:he(e.point,{key:s}),series:h})}return t.call(l,e,i)});Ge.destroy=function(){for(var t=this,e=t.groupedData||[],i=e.length;i--;)e[i]&&e[i].destroy();Qe.apply(t)};pe(Ge,"setOptions",function(t,e){var i=t.call(this,e),a=this.type,o=this.chart.options.plotOptions,r=fe[a].dataGrouping;if(Ze[a]){r||(r=n(Ke,Ze[a]));i.dataGrouping=n(r,o.series&&o.series.dataGrouping,o[a].dataGrouping,e.dataGrouping)}this.chart.options._stock&&(this.requireSorting=!0);return i});pe(we.prototype,"setScale",function(t){t.call(this);Jt(this.series,function(t){t.hasProcessed=!1})});we.prototype.getGroupPixelWidth=function(){var t,e,i,n=this.series,a=n.length,o=0,r=!1;t=a;for(;t--;){i=n[t].options.dataGrouping;i&&(o=yt(o,i.groupPixelWidth))}t=a;for(;t--;){i=n[t].options.dataGrouping;if(i&&n[t].hasProcessed){e=(n[t].processedXData||n[t].data).length;(n[t].groupPixelWidth||e>this.chart.plotSizeX/o||e&&i.forced)&&(r=!0)}}return r?o:0};we.prototype.setDataGrouping=function(t,e){var i;e=ue(e,!0);t||(t={forced:!1,units:null});if(this instanceof we){i=this.series.length;for(;i--;)this.series[i].update({dataGrouping:t},!1)}else Jt(this.chart.options.series,function(e){e.dataGrouping=t},!1);e&&this.chart.redraw()};fe.ohlc=n(fe.column,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">â—</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null});var ei=f(Qt.column,{type:"ohlc",pointArrayMap:["open","high","low","close"],toYData:function(t){return[t.open,t.high,t.low,t.close]},pointValKey:"high",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},upColorProp:"stroke",getAttribs:function(){Qt.column.prototype.getAttribs.apply(this,arguments);var t=this,e=t.options,i=e.states,a=e.upColor||t.color,o=n(t.pointAttr),r=t.upColorProp;o[""][r]=a;o.hover[r]=i.hover.upColor||a;o.select[r]=i.select.upColor||a;Jt(t.points,function(t){t.open<t.close&&!t.options.color&&(t.pointAttr=o)})},translate:function(){var t=this,e=t.yAxis;Qt.column.prototype.translate.apply(t);Jt(t.points,function(t){null!==t.open&&(t.plotOpen=e.translate(t.open,0,1,0,1));null!==t.close&&(t.plotClose=e.translate(t.close,0,1,0,1))})},drawPoints:function(){var t,e,i,n,a,o,r,s,l=this,h=l.points,c=l.chart;Jt(h,function(h){if(h.plotY!==N){r=h.graphic;t=h.pointAttr[h.selected?"selected":""]||l.pointAttr[""];n=t["stroke-width"]%2/2;s=gt(h.plotX)-n;a=gt(h.shapeArgs.width/2);o=["M",s,gt(h.yBottom),"L",s,gt(h.plotY)];if(null!==h.open){e=gt(h.plotOpen)+n;o.push("M",s,e,"L",s-a,e)}if(null!==h.close){i=gt(h.plotClose)+n;o.push("M",s,i,"L",s+a,i)}r?r.attr(t).animate({d:o}):h.graphic=c.renderer.path(o).attr(t).add(l.group)}})},animate:null});Qt.ohlc=ei;fe.candlestick=n(fe.column,{lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:fe.ohlc.tooltip,threshold:null,upColor:"white"});var ii=f(ei,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},upColorProp:"fill",getAttribs:function(){Qt.ohlc.prototype.getAttribs.apply(this,arguments);var t=this,e=t.options,i=e.states,a=e.upLineColor||e.lineColor,o=i.hover.upLineColor||a,r=i.select.upLineColor||a;Jt(t.points,function(t){if(t.open<t.close){if(t.lineColor){t.pointAttr=n(t.pointAttr);a=t.lineColor}t.pointAttr[""].stroke=a;t.pointAttr.hover.stroke=o;t.pointAttr.select.stroke=r}})},drawPoints:function(){var t,e,i,n,a,o,r,s,l,h,c,d,u=this,p=u.points,f=u.chart,g=u.pointAttr[""];Jt(p,function(p){h=p.graphic;if(p.plotY!==N){t=p.pointAttr[p.selected?"selected":""]||g;s=t["stroke-width"]%2/2;l=gt(p.plotX)-s;e=p.plotOpen;i=p.plotClose;n=ft.min(e,i);a=ft.max(e,i);d=gt(p.shapeArgs.width/2);o=gt(n)!==gt(p.plotY);r=a!==p.yBottom;n=gt(n)+s;a=gt(a)+s;c=[];c.push("M",l-d,a,"L",l-d,n,"L",l+d,n,"L",l+d,a,"Z","M",l,n,"L",l,o?gt(p.plotY):n,"M",l,a,"L",l,r?gt(p.yBottom):a);h?h.attr(t).animate({d:c}):p.graphic=f.renderer.path(c).attr(t).add(u.group).shadow(u.options.shadow)}})}});Qt.candlestick=ii;var ni=me.prototype.symbols;fe.flags=n(fe.column,{fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:12,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30});Qt.flags=f(Qt.column,{type:"flags",sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:$e.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){Qt.column.prototype.translate.apply(this);var t,e,i,n,a,o,r=this,s=r.options,l=r.chart,h=r.points,c=h.length-1,d=s.onSeries,u=d&&l.get(d),p=s.onKey||"y",f=u&&u.options.step,g=u&&u.points,m=g&&g.length,v=r.xAxis,y=v.getExtremes();if(u&&u.visible&&m){o=u.currentDataGrouping;n=g[m-1].x+(o?o.totalRange:0);h.sort(function(t,e){return t.x-e.x});p="plot"+p[0].toUpperCase()+p.substr(1);for(;m--&&h[c];){t=h[c];i=g[m];if(i.x<=t.x&&void 0!==i[p]){if(t.x<=n){t.plotY=i[p];if(i.x<t.x&&!f){a=g[m+1];a&&a[p]!==N&&(t.plotY+=(t.x-i.x)/(a.x-i.x)*(a[p]-i[p]))}}c--;m++;if(c<0)break}}}Jt(h,function(t,i){var n;t.plotY===N&&(t.x>=y.min&&t.x<=y.max?t.plotY=l.chartHeight-v.bottom-(v.opposite?v.height:0)+v.offset-l.plotTop:t.shapeArgs={});e=h[i-1];if(e&&e.plotX===t.plotX){e.stackIndex===N&&(e.stackIndex=0);n=e.stackIndex+1}t.stackIndex=n})},drawPoints:function(){var t,e,i,a,o,r,s,l,h,c,d,u,p=this,f=p.pointAttr[""],g=p.points,m=p.chart,v=m.renderer,y=p.options,b=y.y,x=p.yAxis;o=g.length;for(;o--;){r=g[o];d=r.plotX>p.xAxis.len;e=r.plotX;e>0&&(e-=ue(r.lineWidth,y.lineWidth)%2);l=r.stackIndex;a=r.options.shape||y.shape;i=r.plotY;i!==N&&(i=r.plotY+b-(l!==N&&l*y.stackDistance));h=l?N:r.plotX;c=l?N:r.plotY;s=r.graphic;if(i!==N&&e>=0&&!d){t=r.pointAttr[r.selected?"select":""]||f;u=ue(r.options.title,y.title,"A");s?s.attr({text:u}).attr({x:e,y:i,r:t.r,anchorX:h,anchorY:c}):s=r.graphic=v.label(u,e,i,a,h,c,y.useHTML).css(n(y.style,r.style)).attr(t).attr({align:"flag"===a?"left":"center",width:y.width,height:y.height}).add(p.markerGroup).shadow(y.shadow);r.tooltipPos=m.inverted?[x.len+x.pos-m.plotLeft-i,p.xAxis.len-e]:[e,i]}else s&&(r.graphic=s.destroy())}},drawTracker:function(){var t=this,e=t.points;Ve.drawTrackerPoint.apply(this);Jt(e,function(t){var i=t.graphic;i&&ne(i.element,"mouseover",function(){if(t.stackIndex>0&&!t.raised){t._y=i.y;i.attr({y:t._y-8});t.raised=!0}Jt(e,function(e){if(e!==t&&e.raised&&e.graphic){e.graphic.attr({y:e._y});e.raised=!1}})})})},animate:Bt,buildKDTree:Bt,setClip:Bt});ni.flag=function(t,e,i,n,a){return["M",a&&a.anchorX||t,a&&a.anchorY||e,"L",t,e+n,t,e,t+i,e,t+i,e+n,t,e+n,"Z"]};Jt(["circle","square"],function(t){ni[t+"pin"]=function(e,i,n,a,o){var r,s,l=o&&o.anchorX,h=o&&o.anchorY;if("circle"===t&&a>n){e-=gt((a-n)/2);n=a}r=ni[t](e,i,n,a);if(l&&h){s=i>h?i:i+a;r.push("M",l,s,"L",l,h)}return r}});W===ut.VMLRenderer&&Jt(["flag","circlepin","squarepin"],function(t){ve.prototype.symbols[t]=ni[t]});var ai={height:It?20:14,barBackgroundColor:"#bfc8d1",barBorderRadius:0,barBorderWidth:1,barBorderColor:"#bfc8d1",buttonArrowColor:"#666",buttonBackgroundColor:"#ebe7e8",buttonBorderColor:"#bbb",buttonBorderRadius:0,buttonBorderWidth:1,margin:10,minWidth:6,rifleColor:"#666",zIndex:3,step:.2,trackBackgroundColor:"#eeeeee",trackBorderColor:"#eeeeee",trackBorderWidth:1,liveRedraw:Et&&!It};X.scrollbar=n(!0,ai,X.scrollbar);B.prototype={render:function(){var t,e=this,i=e.renderer,n=e.options,a=n.trackBorderWidth,o=n.barBorderWidth,r=e.size;e.group=t=i.g(Ut+"scrollbar").attr({zIndex:n.zIndex,translateY:-99999}).add();e.track=i.rect().attr({height:r,width:r,y:-a%2/2,x:-a%2/2,"stroke-width":a,fill:n.trackBackgroundColor,stroke:n.trackBorderColor,r:n.trackBorderRadius||0}).add(t);e.scrollbarGroup=i.g().add(t);e.scrollbar=i.rect().attr({height:r,width:r,y:-o%2/2,x:-o%2/2,"stroke-width":o,fill:n.barBackgroundColor,stroke:n.barBorderColor,r:n.barBorderRadius||0}).add(e.scrollbarGroup);e.scrollbarRifles=i.path(e.swapXY([Vt,-3,r/4,Gt,-3,2*r/3,Vt,0,r/4,Gt,0,2*r/3,Vt,3,r/4,Gt,3,2*r/3],n.vertical)).attr({stroke:n.rifleColor,"stroke-width":1}).add(e.scrollbarGroup);e.drawScrollbarButton(0);e.drawScrollbarButton(1)},position:function(t,e,i,n){var a=this,o=a.options,r=o.vertical,s=n,l=0,h=a.rendered?"animate":"attr";a.x=t;a.y=e+o.trackBorderWidth;a.width=i;a.height=n;a.xOffset=s;a.yOffset=l;if(r){a.width=a.yOffset=i=l=a.size;a.xOffset=s=0;a.barWidth=n-2*i;a.x=t+=a.options.margin}else{a.height=a.xOffset=n=s=a.size;a.barWidth=i-2*n;a.y=a.y+a.options.margin}a.group[h]({translateX:t,translateY:a.y});a.track[h]({width:i,height:n});a.scrollbarButtons[1].attr({translateX:r?0:i-s,translateY:r?n-l:0})},drawScrollbarButton:function(t){var e,i=this,n=i.renderer,a=i.scrollbarButtons,o=i.options,r=i.size;e=n.g().add(i.group);a.push(e);n.rect(-.5,-.5,r+1,r+1,o.buttonBorderRadius,o.buttonBorderWidth).attr({stroke:o.buttonBorderColor,"stroke-width":o.buttonBorderWidth,fill:o.buttonBackgroundColor}).add(e);n.path(i.swapXY(["M",r/2+(t?-1:1),r/2-3,"L",r/2+(t?-1:1),r/2+3,"L",r/2+(t?2:-2),r/2],o.vertical)).attr({fill:o.buttonArrowColor}).add(e)},swapXY:function(t,e){var i,n,a=t.length;if(e)for(i=0;i<a;i+=3){n=t[i+1];t[i+1]=t[i+2];t[i+2]=n}return t},setRange:function(t,e){var i,n,a,o,r,s=this,h=s.options,c=h.vertical,d=this.rendered&&!this.hasDragged?"animate":"attr";if(l(s.barWidth)){i=s.barWidth*Math.max(t,0);n=s.barWidth*Math.min(e,1);o=Math.max(M(n-i),h.minWidth);a=Math.floor(i+s.xOffset+s.yOffset);r=o/2-.5;s.from=t;s.to=e;if(c){s.scrollbarGroup[d]({translateY:a});s.scrollbar[d]({height:o});s.scrollbarRifles[d]({translateY:r});s.scrollbarTop=a;s.scrollbarLeft=0}else{s.scrollbarGroup[d]({translateX:a});s.scrollbar[d]({width:o});s.scrollbarRifles[d]({translateX:r});s.scrollbarLeft=a;s.scrollbarTop=0}o<=12?s.scrollbarRifles.hide():s.scrollbarRifles.show(!0);!1===h.showFull&&(t<=0&&e>=1?s.group.hide():s.group.show());s.rendered=!0}},initEvents:function(){var t=this;t.mouseMoveHandler=function(e){var i,n,a,o=t.chart.pointer.normalize(e),r=t.options,s=r.vertical?"chartY":"chartX",l=t.initPositions;if(t.grabbedCenter&&(!e.touches||0!==e.touches[0][s])){n={chartX:(o.chartX-t.x-t.xOffset)/t.barWidth,chartY:(o.chartY-t.y-t.yOffset)/t.barWidth}[s];i=t[s];a=n-i;t.hasDragged=!0;t.updatePosition(l[0]+a,l[1]+a);t.hasDragged&&oe(t,"changed",{from:t.from,to:t.to,trigger:"scrollbar",DOMType:e.type,DOMEvent:e})}};t.mouseUpHandler=function(e){t.hasDragged&&oe(t,"changed",{from:t.from,to:t.to,trigger:"scrollbar",DOMType:e.type,DOMEvent:e});t.grabbedCenter=t.hasDragged=t.chartX=t.chartY=null};t.mouseDownHandler=function(e){var i=t.chart.pointer.normalize(e);t.chartX=(i.chartX-t.x-t.xOffset)/t.barWidth;t.chartY=(i.chartY-t.y-t.yOffset)/t.barWidth;t.initPositions=[t.from,t.to];t.grabbedCenter=!0};t.buttonToMinClick=function(e){var i=M(t.to-t.from)*t.options.step;t.updatePosition(M(t.from-i),M(t.to-i));oe(t,"changed",{from:t.from,to:t.to,trigger:"scrollbar",DOMEvent:e})};t.buttonToMaxClick=function(e){var i=(t.to-t.from)*t.options.step;t.updatePosition(t.from+i,t.to+i);oe(t,"changed",{from:t.from,to:t.to,trigger:"scrollbar",DOMEvent:e})};t.trackClick=function(e){var i=t.chart.pointer.normalize(e),n=t.to-t.from,a=t.y+t.scrollbarTop,o=t.x+t.scrollbarLeft;t.options.vertical&&i.chartY>a||!t.options.vertical&&i.chartX>o?t.updatePosition(t.from+n,t.to+n):t.updatePosition(t.from-n,t.to-n);oe(t,"changed",{from:t.from,to:t.to,trigger:"scrollbar",DOMEvent:e})}},updatePosition:function(t,e){if(e>1){t=M(1-M(e-t));e=1}if(t<0){e=M(e-t);t=0}this.from=t;this.to=e},addEvents:function(){var t,e=this.options.inverted?[1,0]:[0,1],i=this.scrollbarButtons,n=this.scrollbarGroup.element,a=this.track.element,o=this.mouseDownHandler,r=this.mouseMoveHandler,s=this.mouseUpHandler;t=[[i[e[0]].element,"click",this.buttonToMinClick],[i[e[1]].element,"click",this.buttonToMaxClick],[a,"click",this.trackClick],[n,"mousedown",o],[pt,"mousemove",r],[pt,"mouseup",s]];U&&t.push([n,"touchstart",o],[pt,"touchmove",r],[pt,"touchend",s]);Jt(t,function(t){ne.apply(null,t)});this._events=t},removeEvents:function(){Jt(this._events,function(t){ae.apply(null,t)});this._events=N},destroy:function(){var t=this;t.removeEvents();Jt([t.track,t.scrollbarRifles,t.scrollbar,t.scrollbarGroup,t.group],function(t){t&&t.destroy&&(t=t.destroy())});D(t.scrollbarButtons)}};pe(we.prototype,"init",function(t){var e=this;t.apply(e,[].slice.call(arguments,1));if(e.options.scrollbar&&e.options.scrollbar.enabled){e.options.scrollbar.vertical=!e.horiz;e.options.startOnTick=e.options.endOnTick=!1;e.scrollbar=new B(e.chart.renderer,e.options.scrollbar,e.chart);ne(e.scrollbar,"changed",function(t){var i,n,a=Math.min(ue(e.options.min,e.min),e.min,e.dataMin),o=Math.max(ue(e.options.max,e.max),e.max,e.dataMax),r=o-a;if(e.horiz&&!e.reversed||!e.horiz&&e.reversed){i=a+r*this.to;n=a+r*this.from}else{i=a+r*(1-this.from);n=a+r*(1-this.to)}e.setExtremes(n,i,!0,!1,t)})}});pe(we.prototype,"render",function(t){var e,i,n=this,a=Math.min(ue(n.options.min,n.min),n.min,n.dataMin),o=Math.max(ue(n.options.max,n.max),n.max,n.dataMax),r=n.scrollbar;t.apply(n,[].slice.call(arguments,1));if(r){n.horiz?r.position(n.left,n.top+n.height+n.offset+2+(n.opposite?0:n.axisTitleMargin),n.width,n.height):r.position(n.left+n.width+2+n.offset+(n.opposite?n.axisTitleMargin:0),n.top,n.width,n.height);if(isNaN(a)||isNaN(o)||!l(n.min)||!l(n.max))r.setRange(0,0);else{e=(n.min-a)/(o-a);i=(n.max-a)/(o-a);n.horiz&&!n.reversed||!n.horiz&&n.reversed?r.setRange(e,i):r.setRange(1-i,1-e)}}});pe(we.prototype,"getOffset",function(t){var e=this,i=e.horiz?2:1,n=e.scrollbar;t.apply(e,[].slice.call(arguments,1));n&&(e.chart.axisOffset[i]+=n.size+n.options.margin)});pe(we.prototype,"destroy",function(t){this.scrollbar&&(this.scrollbar=this.scrollbar.destroy());t.apply(this,[].slice.call(arguments,1))});ut.Scrollbar=B;var oi,ri=[].concat(Je),si=function(t){var e=te(arguments,de);if(e.length)return Math[t].apply(0,e)};ri[4]=["day",[1,2,3,4]];ri[5]=["week",[1,2,3]];oi=Qt.areaspline===N?"line":"areaspline";he(X,{navigator:{handles:{backgroundColor:"#ebe7e8",borderColor:"#b2b1b6"},height:40,margin:25,maskFill:"rgba(128,179,236,0.3)",maskInside:!0,outlineColor:"#b2b1b6",outlineWidth:1,series:{type:oi,color:"#4572A7",compare:null,fillOpacity:.05,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:ri},dataLabels:{enabled:!1,zIndex:2},id:Ut+"navigator-series",lineColor:null,lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineColor:"#EEE",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#888"},x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}}});z.prototype={drawHandle:function(t,e){var i,n=this,a=n.chart,o=a.renderer,r=n.elementsToDestroy,s=n.handles,l=n.navigatorOptions.handles,h={fill:l.backgroundColor,stroke:l.borderColor,"stroke-width":1};if(!n.rendered){s[e]=o.g("navigator-handle-"+["left","right"][e]).css({cursor:"ew-resize"}).attr({zIndex:10-e}).add();i=o.rect(-4.5,0,9,16,0,1).attr(h).add(s[e]);r.push(i);i=o.path(["M",-1.5,4,"L",-1.5,12,"M",.5,4,"L",.5,12]).attr(h).add(s[e]);r.push(i)}s[e][n.rendered&&!n.hasDragged?"animate":"attr"]({translateX:n.scrollerLeft+n.scrollbarHeight+parseInt(t,10),translateY:n.top+n.height/2-8})},render:function(t,e,i,n){var a,o,r,s,h,c,d,u=this,p=u.chart,f=p.renderer,g=u.navigatorGroup,m=u.scrollbarHeight,v=u.xAxis,y=u.navigatorOptions,b=u.height,x=u.top,k=u.navigatorEnabled,w=y.outlineWidth,S=w/2,C=u.outlineHeight,D=x+S,T=u.rendered;if(de(t)&&de(e)&&(!u.hasDragged||l(i))){u.navigatorLeft=a=ue(v.left,p.plotLeft+m);u.navigatorWidth=o=ue(v.len,p.plotWidth-2*m);u.scrollerLeft=r=a-m;u.scrollerWidth=s=s=o+2*m;i=ue(i,v.translate(t));n=ue(n,v.translate(e));if(!de(i)||xt(i)===1/0){i=0;n=s}if(!(v.translate(n,!0)-v.translate(i,!0)<p.xAxis[0].minRange)){u.zoomedMax=bt(yt(i,n,0),o);u.zoomedMin=bt(yt(u.fixedWidth?u.zoomedMax-u.fixedWidth:bt(i,n),0),o);u.range=u.zoomedMax-u.zoomedMin;c=gt(u.zoomedMax);h=gt(u.zoomedMin);if(!T&&k){u.navigatorGroup=g=f.g("navigator").attr({zIndex:3}).add();u.leftShade=f.rect().attr({fill:y.maskFill}).add(g);y.maskInside?u.leftShade.css({cursor:"ew-resize"}):u.rightShade=f.rect().attr({fill:y.maskFill}).add(g);u.outline=f.path().attr({"stroke-width":w,stroke:y.outlineColor}).add(g)}d=T&&!u.hasDragged?"animate":"attr";if(k){u.leftShade[d](y.maskInside?{x:a+h,y:x,width:c-h,height:b}:{x:a,y:x,width:h,height:b});u.rightShade&&u.rightShade[d]({x:a+c,y:x,width:o-c,height:b});u.outline[d]({d:[Vt,r,D,Gt,a+h-S,D,a+h-S,D+C,Gt,a+c-S,D+C,Gt,a+c-S,D,r+s,D].concat(y.maskInside?[Vt,a+h+S,D,Gt,a+c-S,D]:[])});u.drawHandle(h+S,0);u.drawHandle(c+S,1)}if(u.scrollbar){u.scrollbar.hasDragged=u.hasDragged;u.scrollbar.position(u.scrollerLeft,u.top+(k?u.height:-u.scrollbarHeight),u.scrollerWidth,u.scrollbarHeight)
;u.scrollbar.setRange(h/o,c/o)}u.rendered=!0}}},addEvents:function(){var t,e=this.chart,i=e.container,n=this.mouseDownHandler,a=this.mouseMoveHandler,o=this.mouseUpHandler;t=[[i,"mousedown",n],[i,"mousemove",a],[pt,"mouseup",o]];U&&t.push([i,"touchstart",n],[i,"touchmove",a],[pt,"touchend",o]);Jt(t,function(t){ne.apply(null,t)});this._events=t;this.series&&ne(this.series.xAxis,"foundExtremes",function(){e.scroller.modifyNavigatorAxisExtremes()});ne(e,"redraw",function(){var t=this.scroller,e=t&&t.baseSeries&&t.baseSeries.xAxis;e&&t.render(e.min,e.max)})},removeEvents:function(){Jt(this._events,function(t){ae.apply(null,t)});this._events=N;this.removeBaseSeriesEvents()},removeBaseSeriesEvents:function(){if(this.navigatorEnabled&&this.baseSeries&&this.baseSeries.xAxis&&!1!==this.navigatorOptions.adaptToUpdatedData){ae(this.baseSeries,"updatedData",this.updatedDataHandler);ae(this.baseSeries.xAxis,"foundExtremes",this.modifyBaseAxisExtremes)}},init:function(){var t,e,i,a=this,o=a.chart,r=a.scrollbarHeight,s=a.navigatorOptions,h=a.height,c=a.top,d=a.baseSeries;a.mouseDownHandler=function(e){e=o.pointer.normalize(e);var n,r,s,l=a.zoomedMin,c=a.zoomedMax,d=a.top,u=a.scrollerLeft,p=a.scrollerWidth,f=a.navigatorLeft,g=a.navigatorWidth,m=a.scrollbarPad||0,v=a.range,y=e.chartX,b=e.chartY,x=o.xAxis[0],k=It?10:7;if(b>d&&b<d+h)if(ft.abs(y-l-f)<k){a.grabbedLeft=!0;a.otherHandlePos=c;a.fixedExtreme=x.max;o.fixedRange=null}else if(ft.abs(y-c-f)<k){a.grabbedRight=!0;a.otherHandlePos=l;a.fixedExtreme=x.min;o.fixedRange=null}else if(y>f+l-m&&y<f+c+m){a.grabbedCenter=y;a.fixedWidth=v;i=y-l}else if(y>u&&y<u+p){s=y-f-v/2;if(s<0)s=0;else if(s+v>=g){s=g-v;n=a.getUnionExtremes().dataMax}if(s!==l){a.fixedWidth=v;r=t.toFixedRange(s,s+v,null,n);x.setExtremes(r.min,r.max,!0,null,{trigger:"navigator"})}}};a.mouseMoveHandler=function(t){var e,n=a.scrollbarHeight,r=a.navigatorLeft,s=a.navigatorWidth,l=a.scrollerLeft,h=a.scrollerWidth,c=a.range;if(!t.touches||0!==t.touches[0].pageX){t=o.pointer.normalize(t);e=t.chartX;e<r?e=r:e>l+h-n&&(e=l+h-n);if(a.grabbedLeft){a.hasDragged=!0;a.render(0,0,e-r,a.otherHandlePos)}else if(a.grabbedRight){a.hasDragged=!0;a.render(0,0,a.otherHandlePos,e-r)}else if(a.grabbedCenter){a.hasDragged=!0;e<i?e=i:e>s+i-c&&(e=s+i-c);a.render(0,0,e-i,e-i+c)}if(a.hasDragged&&a.scrollbar&&a.scrollbar.options.liveRedraw){t.DOMType=t.type;setTimeout(function(){a.mouseUpHandler(t)},0)}}};a.mouseUpHandler=function(e){var n,r,s,h=e.DOMEvent||e;if(a.hasDragged||"scrollbar"===e.trigger){a.zoomedMin===a.otherHandlePos?r=a.fixedExtreme:a.zoomedMax===a.otherHandlePos&&(s=a.fixedExtreme);a.zoomedMax===a.navigatorWidth&&(s=a.getUnionExtremes().dataMax);n=t.toFixedRange(a.zoomedMin,a.zoomedMax,r,s);l(n.min)&&o.xAxis[0].setExtremes(n.min,n.max,!0,!a.hasDragged&&null,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:h})}"mousemove"!==e.DOMType&&(a.grabbedLeft=a.grabbedRight=a.grabbedCenter=a.fixedWidth=a.fixedExtreme=a.otherHandlePos=a.hasDragged=i=null)};var u=o.xAxis.length,p=o.yAxis.length;o.extraBottomMargin=a.outlineHeight+s.margin;if(a.navigatorEnabled){a.xAxis=t=new we(o,n({breaks:d&&d.xAxis.options.breaks,ordinal:d&&d.xAxis.options.ordinal},s.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:u,height:h,offset:0,offsetLeft:r,offsetRight:-r,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1}));a.yAxis=e=new we(o,n(s.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:h,offset:0,index:p,zoomEnabled:!1}));d||s.series.data?a.addBaseSeries():0===o.series.length&&pe(o,"redraw",function(t,e){if(o.series.length>0&&!a.series){a.setBaseSeries();o.redraw=t}t.call(o,e)})}else a.xAxis=t={translate:function(t,e){var i=o.xAxis[0],n=i.getExtremes(),a=o.plotWidth-2*r,s=si("min",i.options.min,n.dataMin),l=si("max",i.options.max,n.dataMax)-s;return e?t*l/a+s:a*(t-s)/l},toFixedRange:we.prototype.toFixedRange};if(o.options.scrollbar.enabled){a.scrollbar=new B(o.renderer,n(o.options.scrollbar,{margin:a.navigatorEnabled?0:10}),o);ne(a.scrollbar,"changed",function(t){var e=a.navigatorWidth,i=e*this.to,n=e*this.from;a.hasDragged=a.scrollbar.hasDragged;a.render(0,0,n,i);(o.options.scrollbar.liveRedraw||"mousemove"!==t.DOMType)&&setTimeout(function(){a.mouseUpHandler(t)})})}a.addBaseSeriesEvents();pe(o,"getMargins",function(i){var n=this.legend,o=n.options;i.apply(this,[].slice.call(arguments,1));a.top=c=a.navigatorOptions.top||this.chartHeight-a.height-a.scrollbarHeight-this.spacing[2]-("bottom"===o.verticalAlign&&o.enabled&&!o.floating?n.legendHeight+ue(o.margin,10):0);if(t&&e){t.options.top=e.options.top=c;t.setAxisSize();e.setAxisSize()}});a.addEvents()},getUnionExtremes:function(t){var e,i=this.chart.xAxis[0],n=this.xAxis,a=n.options,o=i.options;t&&null===i.dataMin||(e={dataMin:ue(a&&a.min,si("min",o.min,i.dataMin,n.dataMin,n.min)),dataMax:ue(a&&a.max,si("max",o.max,i.dataMax,n.dataMax,n.max))});return e},setBaseSeries:function(t){var e=this.chart;t=t||e.options.navigator.baseSeries;if(this.series){this.removeBaseSeriesEvents();this.series.remove()}this.baseSeries=e.series[t]||"string"==typeof t&&e.get(t)||e.series[0];this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var t,e,i=this.baseSeries,a=i?i.options:{},o=a.data,r=this.navigatorOptions.series;e=r.data;this.hasNavigatorData=!!e;t=n(a,r,{enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,stacking:!1,isInternal:!0,visible:!0});t.data=e||o.slice(0);this.series=this.chart.initSeries(t);this.addBaseSeriesEvents()},addBaseSeriesEvents:function(){var t=this.baseSeries;if(t&&t.xAxis&&!1!==this.navigatorOptions.adaptToUpdatedData){ne(t,"updatedData",this.updatedDataHandler);ne(t.xAxis,"foundExtremes",this.modifyBaseAxisExtremes);t.userOptions.events=he(t.userOptions.event,{updatedData:this.updatedDataHandler})}},modifyNavigatorAxisExtremes:function(){var t,e=this.xAxis;if(e.getExtremes){t=this.getUnionExtremes(!0);if(t&&(t.dataMin!==e.min||t.dataMax!==e.max)){e.min=t.dataMin;e.max=t.dataMax}}},modifyBaseAxisExtremes:function(){if(this.chart.scroller.baseSeries&&this.chart.scroller.baseSeries.xAxis){var t,e,i=this,n=i.chart.scroller,a=i.getExtremes(),o=a.min,r=a.max,s=a.dataMin,l=a.dataMax,h=r-o,c=n.stickToMin,d=n.stickToMax,u=n.series,p=!!i.setExtremes;if(!(i.eventArgs&&"rangeSelectorButton"===i.eventArgs.trigger)){if(c){e=s;t=e+h}if(d){t=l;c||(e=yt(t-h,u&&u.xData?u.xData[0]:-Number.MAX_VALUE))}if(p&&(c||d)&&de(e)){i.min=i.userMin=e;i.max=i.userMax=t}}n.stickToMin=n.stickToMax=null}},updatedDataHandler:function(){var t=this.chart.scroller,e=t.baseSeries,i=t.series;t.stickToMin=de(e.xAxis.min)&&e.xAxis.min<=e.xData[0];t.stickToMax=Math.round(t.zoomedMax)>=Math.round(t.navigatorWidth);if(i&&!t.hasNavigatorData){i.options.pointStart=e.xData[0];i.setData(e.options.data,!1,null,!1)}},destroy:function(){var t=this;t.removeEvents();Jt([t.scrollbar,t.xAxis,t.yAxis,t.leftShade,t.rightShade,t.outline],function(t){t&&t.destroy&&t.destroy()});t.xAxis=t.yAxis=t.leftShade=t.rightShade=t.outline=null;Jt([t.handles,t.elementsToDestroy],function(t){D(t)})}};ut.Navigator=z;pe(we.prototype,"zoom",function(t,e,i){var n,a,o=this.chart,r=o.options,s=r.chart.zoomType,h=r.navigator,c=r.rangeSelector;if(this.isXAxis&&(h&&h.enabled||c&&c.enabled))if("x"===s)o.resetZoomButton="blocked";else if("y"===s)a=!1;else if("xy"===s){n=this.previousZoom;if(l(e))this.previousZoom=[this.min,this.max];else if(n){e=n[0];i=n[1];delete this.previousZoom}}return a!==N?a:t.call(this,e,i)});pe(Oe.prototype,"init",function(t,e,i){ne(this,"beforeRender",function(){var t=this.options;(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=new z(this))});t.call(this,e,i)});pe($e.prototype,"addPoint",function(t,i,n,a,o){var r=this.options.turboThreshold;r&&this.xData.length>r&&ce(i,!0)&&this.chart.scroller&&e(20,!0);t.call(this,i,n,a,o)});he(X,{rangeSelector:{buttonTheme:{width:28,height:18,fill:"#f7f7f7",padding:2,r:0,"stroke-width":0,style:{color:"#444",cursor:"pointer",fontWeight:"normal"},zIndex:7,states:{hover:{fill:"#e7e7e7"},select:{fill:"#e7f0f9",style:{color:"black",fontWeight:"bold"}}}},height:35,inputPosition:{align:"right"},labelStyle:{color:"#666"}}});X.lang=n(X.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"});H.prototype={clickButton:function(t,e){var i,n,a,o,r,s,l,h,d=this,u=d.selected,p=d.chart,f=d.buttons,g=d.buttonOptions[t],m=p.xAxis[0],v=p.scroller&&p.scroller.getUnionExtremes()||m||{},y=v.dataMin,b=v.dataMax,x=m&&gt(bt(m.max,ue(b,m.max))),k=g.type,w=g._range,S=g.dataGrouping;if(null!==y&&null!==b&&t!==d.selected){p.fixedRange=w;if(S){this.forcedDataGrouping=!0;we.prototype.setDataGrouping.call(m||{chart:this.chart},S,!1)}if("month"===k||"year"===k)if(m){h={range:g,max:x,dataMin:y,dataMax:b};i=m.minFromRange.call(h);de(h.newMax)&&(x=h.newMax)}else w=g;else if(w){i=yt(x-w,y);x=bt(i+w,b)}else if("ytd"===k){if(!m){ne(p,"beforeRender",function(){d.clickButton(t)});return}if(b===N){y=Number.MAX_VALUE;b=Number.MIN_VALUE;Jt(p.series,function(t){var e=t.xData;y=bt(e[0],y);b=yt(e[e.length-1],b)});e=!1}n=new j(b);r=n.getFullYear();i=o=yt(y||0,j.UTC(r,0,1));n=n.getTime();x=bt(b||n,n)}else if("all"===k&&m){i=y;x=b}f[u]&&f[u].setState(0);if(f[t]){f[t].setState(2);d.lastSelected=t}if(m){m.setExtremes(i,x,ue(e,1),null,{trigger:"rangeSelectorButton",rangeSelectorButton:g});d.setSelected(t)}else{a=c(p.options.xAxis)[0];l=a.range;a.range=w;s=a.min;a.min=o;d.setSelected(t);ne(p,"load",function(){a.range=l;a.min=s})}}},setSelected:function(t){this.selected=this.options.selected=t},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(t){var e=this,i=t.options.rangeSelector,n=i.buttons||[].concat(e.defaultButtons),a=i.selected,o=e.blurInputs=function(){var t=e.minInput,i=e.maxInput;t&&t.blur&&oe(t,"blur");i&&i.blur&&oe(i,"blur")};e.chart=t;e.options=i;e.buttons=[];t.extraTopMargin=i.height;e.buttonOptions=n;ne(t.container,"mousedown",o);ne(t,"resize",o);Jt(n,e.computeButtonRange);a!==N&&n[a]&&this.clickButton(a,!1);ne(t,"load",function(){ne(t.xAxis[0],"setExtremes",function(i){this.max-this.min!==t.fixedRange&&"rangeSelectorButton"!==i.trigger&&"updatedData"!==i.trigger&&e.forcedDataGrouping&&this.setDataGrouping(!1,!1)});ne(t.xAxis[0],"afterSetExtremes",function(){e.updateButtonStates(!0)})})},updateButtonStates:function(t){var e=this,i=this.chart,n=i.xAxis[0],a=i.scroller&&i.scroller.getUnionExtremes()||n,o=a.dataMin,r=a.dataMax,s=e.selected,l=e.options.allButtonsEnabled,h=e.buttons;if(t&&i.fixedRange!==gt(n.max-n.min)){h[s]&&h[s].setState(0);e.setSelected(null)}Jt(e.buttonOptions,function(t,a){var c=gt(n.max-n.min),d=t._range,u=t.type,p=t.count||1,f=d>r-o,g=d<n.minRange,m="all"===t.type&&n.max-n.min>=r-o&&2!==h[a].state,v="ytd"===t.type&&V("%Y",o)===V("%Y",r),y=i.renderer.forExport&&a===s,b=d===c,x=!n.hasVisibleSeries;("month"===u||"year"===u)&&c>=24*{month:28,year:365}[u]*36e5*p&&c<=24*{month:31,year:366}[u]*36e5*p&&(b=!0);if(y||b&&a!==s&&a===e.lastSelected){e.setSelected(a);h[a].setState(2)}else!l&&(f||g||m||v||x)?h[a].setState(3):3===h[a].state&&h[a].setState(0)})},computeButtonRange:function(t){var e=t.type,i=t.count||1,n={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};n[e]?t._range=n[e]*i:"month"!==e&&"year"!==e||(t._range=24*{month:30,year:365}[e]*36e5*i)},setInputValue:function(t,e){var i=this.chart.options.rangeSelector;l(e)&&(this[t+"Input"].HCTime=e);this[t+"Input"].value=V(i.inputEditDateFormat||"%Y-%m-%d",this[t+"Input"].HCTime);this[t+"DateBox"].attr({text:V(i.inputDateFormat||"%b %e, %Y",this[t+"Input"].HCTime)})},showInput:function(t){var e=this.inputGroup,i=this[t+"DateBox"];u(this[t+"Input"],{left:e.translateX+i.x+Yt,top:e.translateY+Yt,width:i.width-2+Yt,height:i.height-2+Yt,border:"2px solid silver"})},hideInput:function(t){u(this[t+"Input"],{border:0,width:"1px",height:"1px"});this.setInputValue(t)},drawInput:function(t){function e(){var t=i.value,e=(d.inputDateParser||j.parse)(t),n=l.xAxis[0],o=n.dataMin,r=n.dataMax;if(e!==i.previousValue){i.previousValue=e;if(!de(e)){e=t.split("-");e=j.UTC(a(e[0]),a(e[1])-1,a(e[2]))}if(de(e)){X.global.useUTC||(e+=60*(new j).getTimezoneOffset()*1e3);g?e>s.maxInput.HCTime?e=N:e<o&&(e=o):e<s.minInput.HCTime?e=N:e>r&&(e=r);e!==N&&l.xAxis[0].setExtremes(g?e:n.min,g?n.max:e,N,N,{trigger:"rangeSelectorInput"})}}}var i,o,r,s=this,l=s.chart,h=l.renderer.style,c=l.renderer,d=l.options.rangeSelector,u=X.lang,f=s.div,g="min"===t,m=this.inputGroup;this[t+"Label"]=o=c.label(u[g?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:2}).css(n(h,d.labelStyle)).add(m);m.offset+=o.width+5;this[t+"DateBox"]=r=c.label("",m.offset).attr({padding:2,width:d.inputBoxWidth||90,height:d.inputBoxHeight||17,stroke:d.inputBoxBorderColor||"silver","stroke-width":1}).css(n({textAlign:"center",color:"#444"},h,d.inputStyle)).on("click",function(){s.showInput(t);s[t+"Input"].focus()}).add(m);m.offset+=r.width+(g?10:0);this[t+"Input"]=i=p("input",{name:t,className:Ut+"range-selector",type:"text"},he({position:Wt,border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:h.fontSize,fontFamily:h.fontFamily,left:"-9em",top:l.plotTop+Yt},d.inputStyle),f);i.onfocus=function(){s.showInput(t)};i.onblur=function(){s.hideInput(t)};i.onchange=e;i.onkeypress=function(t){13===t.keyCode&&e()}},getPosition:function(){var t=this.chart,e=t.options.rangeSelector,i=ue((e.buttonPosition||{}).y,t.plotTop-t.axisOffset[0]-e.height);return{buttonTop:i,inputTop:i-10}},render:function(t,e){var i,n,a=this,o=a.chart,r=o.renderer,s=o.container,h=o.options,c=h.exporting&&!1!==h.exporting.enabled&&h.navigation&&h.navigation.buttonOptions,d=h.rangeSelector,u=a.buttons,f=X.lang,g=a.div,m=a.inputGroup,v=d.buttonTheme,y=d.buttonPosition||{},b=d.inputEnabled,x=v&&v.states,k=o.plotLeft,w=this.getPosition(),S=a.group,C=a.rendered;if(!C){a.group=S=r.g("range-selector-buttons").add();a.zoomText=r.text(f.rangeSelectorZoom,ue(y.x,k),15).css(d.labelStyle).add(S);i=ue(y.x,k)+a.zoomText.getBBox().width+5;Jt(a.buttonOptions,function(t,e){u[e]=r.button(t.text,i,0,function(){a.clickButton(e);a.isActive=!0},v,x&&x.hover,x&&x.select,x&&x.disabled).css({textAlign:"center"}).add(S);i+=u[e].width+ue(d.buttonSpacing,5);a.selected===e&&u[e].setState(2)});a.updateButtonStates();if(!1!==b){a.div=g=p("div",null,{position:"relative",height:0,zIndex:1});s.parentNode.insertBefore(g,s);a.inputGroup=m=r.g("input-group").add();m.offset=0;a.drawInput("min");a.drawInput("max")}}S[C?"animate":"attr"]({translateY:w.buttonTop});if(!1!==b){m.align(he({y:w.inputTop,width:m.offset,x:c&&w.inputTop<(c.y||0)+c.height-o.spacing[0]?-40:0},d.inputPosition),!0,o.spacingBox);if(!l(b)){n=S.getBBox();m[m.translateX<n.x+n.width+10?"hide":"show"]()}a.setInputValue("min",t);a.setInputValue("max",e)}a.rendered=!0},destroy:function(){var t,e=this.minInput,i=this.maxInput,n=this.chart,a=this.blurInputs;ae(n.container,"mousedown",a);ae(n,"resize",a);D(this.buttons);e&&(e.onfocus=e.onblur=e.onchange=null);i&&(i.onfocus=i.onblur=i.onchange=null);for(t in this){this[t]&&"chart"!==t&&(this[t].destroy?this[t].destroy():this[t].nodeType&&T(this[t]));this[t]=null}}};we.prototype.toFixedRange=function(t,e,i,n){var a=this.chart&&this.chart.fixedRange,o=ue(i,this.translate(t,!0)),r=ue(n,this.translate(e,!0)),s=a&&(r-o)/a;s>.7&&s<1.3&&(n?o=r-a:r=o+a);de(o)||(o=r=void 0);return{min:o,max:r}};we.prototype.minFromRange=function(){var t,e,i,n=this.range,a=n.type,o={month:"Month",year:"FullYear"}[a],r=this.max,s=function(t,e){var i=new j(t);i["set"+o](i["get"+o]()+e);return i.getTime()-t};if(de(n)){t=this.max-n;i=n}else t=r+s(r,-n.count);e=ue(this.dataMin,Number.MIN_VALUE);de(t)||(t=e);if(t<=e){t=e;void 0===i&&(i=s(t,n.count));this.newMax=bt(t+i,this.dataMax)}de(r)||(t=void 0);return t};pe(Oe.prototype,"init",function(t,e,i){ne(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new H(this))});t.call(this,e,i)});ut.RangeSelector=H;Oe.prototype.callbacks.push(function(t){function e(){a=t.xAxis[0].getExtremes();de(a.min)&&r.render(a.min,a.max)}function i(t){r.render(t.min,t.max)}function n(){if(r){ae(t,"resize",e);ae(t.xAxis[0],"afterSetExtremes",i)}}var a,o=t.scroller,r=t.rangeSelector;if(o){a=t.xAxis[0].getExtremes();o.render(a.min,a.max)}if(r){ne(t.xAxis[0],"afterSetExtremes",i);ne(t,"resize",e);e()}ne(t,"destroy",n)});ut.StockChart=ut.stockChart=function(t,e,i){var a,r=o(t)||t.nodeName,s=arguments[r?1:0],l=s.series,h=ue(s.navigator&&s.navigator.enabled,!0),d=h?{startOnTick:!1,endOnTick:!1}:null,u={marker:{enabled:!1,radius:2}},p={shadow:!1,borderWidth:0};s.xAxis=ie(c(s.xAxis||{}),function(t){return n({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},t,{type:"datetime",categories:null},d)});s.yAxis=ie(c(s.yAxis||{}),function(t){a=ue(t.opposite,!0);return n({labels:{y:-2},opposite:a,showLastLabel:!1,title:{text:null}},t)});s.series=null;s=n({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null,style:{fontSize:"16px"}},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:u,spline:u,area:u,areaspline:u,arearange:u,areasplinerange:u,column:p,columnrange:p,candlestick:p,ohlc:p}},s,{_stock:!0,chart:{inverted:!1}});s.series=l;return r?new Oe(t,s,i):new Oe(s,e)};pe(De.prototype,"init",function(t,e,i){var n=i.chart.pinchType||"";t.call(this,e,i);this.pinchX=this.pinchHor=-1!==n.indexOf("x");this.pinchY=this.pinchVert=-1!==n.indexOf("y");this.hasZoom=this.hasZoom||this.pinchHor||this.pinchVert});pe(we.prototype,"autoLabelAlign",function(t){var e,i=this.chart,n=this.options,a=i._labelPanes=i._labelPanes||{},o=this.options.labels;if(this.chart.options._stock&&"yAxis"===this.coll){e=n.top+","+n.height;if(!a[e]&&o.enabled){15===o.x&&(o.x=0);void 0===o.align&&(o.align="right");a[e]=1;return"right"}}return t.call(this,[].slice.call(arguments,1))});pe(we.prototype,"getPlotLinePath",function(t,e,i,n,a,o){var r,s,h,c,d,u,p,f=this,g=this.isLinked&&!this.series?this.linkedParent.series:this.series,m=f.chart,v=m.renderer,y=f.left,b=f.top,x=[],k=[];if("colorAxis"===f.coll)return t.apply(this,[].slice.call(arguments,1));k=f.isXAxis?l(f.options.yAxis)?[m.yAxis[f.options.yAxis]]:ie(g,function(t){return t.yAxis}):l(f.options.xAxis)?[m.xAxis[f.options.xAxis]]:ie(g,function(t){return t.xAxis});d=f.isXAxis?m.yAxis:m.xAxis;Jt(d,function(t){if(!l(t.options.id)||-1===t.options.id.indexOf("navigator")){var e=t.isXAxis?"yAxis":"xAxis",i=l(t.options[e])?m[e][t.options[e]]:m[e][0];f===i&&k.push(t)}});u=k.length?[]:[f.isXAxis?m.yAxis[0]:m.xAxis[0]];Jt(k,function(t){-1===Zt(t,u)&&u.push(t)});p=ue(o,f.translate(e,null,null,n));de(p)&&(f.horiz?Jt(u,function(t){var e;s=t.pos;c=s+t.len;r=h=gt(p+f.transB);(r<y||r>y+f.width)&&(a?r=h=bt(yt(y,r),y+f.width):e=!0);e||x.push("M",r,s,"L",h,c)}):Jt(u,function(t){var e;r=t.pos;h=r+t.len;s=c=gt(b+f.height-p);(s<b||s>b+f.height)&&(a?s=c=bt(yt(b,s),f.top+f.height):e=!0);e||x.push("M",r,s,"L",h,c)}));return x.length>0?v.crispPolyLine(x,i||1):null});we.prototype.getPlotBandPath=function(t,e){var i,n=this.getPlotLinePath(e,null,null,!0),a=this.getPlotLinePath(t,null,null,!0),o=[];if(a&&n&&a.toString()!==n.toString())for(i=0;i<a.length;i+=6)o.push("M",a[i+1],a[i+2],"L",a[i+4],a[i+5],n[i+4],n[i+5],n[i+1],n[i+2]);else o=null;return o};me.prototype.crispPolyLine=function(t,e){var i;for(i=0;i<t.length;i+=6){t[i+1]===t[i+4]&&(t[i+1]=t[i+4]=gt(t[i+1])-e%2/2);t[i+2]===t[i+5]&&(t[i+2]=t[i+5]=gt(t[i+2])+e%2/2)}return t};W===ut.VMLRenderer&&(ve.prototype.crispPolyLine=me.prototype.crispPolyLine);pe(we.prototype,"hideCrosshair",function(t,e){t.call(this,e);this.crossLabel&&(this.crossLabel=this.crossLabel.hide())});pe(we.prototype,"drawCrosshair",function(t,e,i){t.call(this,e,i);if(l(this.crosshair.label)&&this.crosshair.label.enabled&&this.cross){var n,a,o,r,s,h,c=this.chart,d=this.options.crosshair.label,u=this.horiz,p=this.opposite,f=this.left,g=this.top,m=this.crossLabel,v=d.format,y="",x="inside"===this.options.tickPosition,k=!1!==this.crosshair.snap;e||(e=this.cross&&this.cross.e);s=u?"center":p?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center";m||(m=this.crossLabel=c.renderer.label(null,null,null,d.shape||"callout").attr({align:d.align||s,zIndex:12,fill:d.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:ue(d.padding,8),stroke:d.borderColor||"","stroke-width":d.borderWidth||0,r:ue(d.borderRadius,3)}).css(he({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},d.style)).add());if(u){n=k?i.plotX+f:e.chartX;a=g+(p?0:this.height)}else{n=p?this.width+f:0;a=k?i.plotY+g:e.chartY}if(!v&&!d.formatter){this.isDatetimeAxis&&(y="%b %d, %Y");v="{value"+(y?":"+y:"")+"}"}h=k?i[this.isXAxis?"x":"y"]:this.toValue(u?e.chartX:e.chartY);m.attr({text:v?b(v,{value:h}):d.formatter.call(this,h),anchorX:u?n:this.opposite?0:c.chartWidth,anchorY:u?this.opposite?c.chartHeight:0:a,x:n,y:a,visibility:"visible"});o=m.getBBox();u?(x&&!p||!x&&p)&&(a=m.y-o.height):a=m.y-o.height/2;r=u?{left:f-o.x,right:f+this.width-o.x}:{left:"left"===this.labelAlign?f:0,right:"right"===this.labelAlign?f+this.width:c.chartWidth};m.translateX<r.left&&(n+=r.left-m.translateX);m.translateX+o.width>=r.right&&(n-=m.translateX+o.width-r.right);m.attr({x:n,y:a,visibility:"visible"})}});var li=Ge.init,hi=Ge.processData,ci=_e.prototype.tooltipFormatter;Ge.init=function(){li.apply(this,arguments);this.setCompare(this.options.compare)};Ge.setCompare=function(t){this.modifyValue="value"===t||"percent"===t?function(e,i){var n=this.compareValue;if(e!==N){e="value"===t?e-n:e=e/n*100-100;i&&(i.change=e)}return e}:null;this.userOptions.compare=t;this.chart.hasRendered&&(this.isDirty=!0)};Ge.processData=function(){var t,e,i,n,a,o=this,r=-1;hi.apply(this,arguments);if(o.xAxis&&o.processedYData){e=o.processedXData;i=o.processedYData;n=i.length;o.pointArrayMap&&(r=Zt(o.pointValKey||"y",o.pointArrayMap));for(t=0;t<n-1;t++){a=r>-1?i[t][r]:i[t];if(de(a)&&e[t+1]>=o.xAxis.min&&0!==a){o.compareValue=a;break}}}};pe(Ge,"getExtremes",function(t){var e;t.apply(this,[].slice.call(arguments,1));if(this.modifyValue){e=[this.modifyValue(this.dataMin),this.modifyValue(this.dataMax)];this.dataMin=S(e);this.dataMax=C(e)}});we.prototype.setCompare=function(t,e){if(!this.isXAxis){Jt(this.series,function(e){e.setCompare(t)});ue(e,!0)&&this.chart.redraw()}};_e.prototype.tooltipFormatter=function(t){var e=this;t=t.replace("{point.change}",(e.change>0?"+":"")+ut.numberFormat(e.change,ue(e.series.tooltipOptions.changeDecimals,2)));return ci.apply(this,[t])};pe($e.prototype,"render",function(t){if(this.chart.options._stock&&this.xAxis)if(!this.clipBox&&this.animate){this.clipBox=n(this.chart.clipBox);this.clipBox.width=this.xAxis.len;this.clipBox.height=this.yAxis.len}else if(this.chart[this.sharedClipKey]){se(this.chart[this.sharedClipKey]);this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len})}t.call(this)});he(ut,{Color:E,Point:_e,Tick:R,Renderer:W,SVGElement:_,SVGRenderer:me,arrayMin:S,arrayMax:C,charts:zt,correctFloat:M,dateFormat:V,error:e,format:b,pathAnim:void 0,getOptions:O,hasBidiBug:_t,isTouchDevice:It,setOptions:I,addEvent:ne,removeEvent:ae,createElement:p,discardElement:T,css:u,each:Jt,map:ie,merge:n,splat:c,stableSort:w,extendClass:f,pInt:a,svg:Et,canvas:$t,vml:!Et&&!$t,product:"Highstock",version:"4.2.6"});return ut});var Xignite=function(t,e,i,n,a){t&&e&&i||console.log("xIgnite api credentials not supplied");this.UtcOffset=n;this.useProxy=a;this.lastError=null;this._token={token:t,userId:e,expire:i};this.factSetFundamentalsServiceBase="http://factsetfundamentals.xignite.com/xFactSetFundamentals.json/";this.globalIndicesServiceBase="http://globalindices.xignite.com/xglobalindices.json/";this.globalOptionsServiceBase="http://globaloptions.xignite.com/xglobaloptions.json/";this.globalQuotesServiceBase="http://globalquotes.xignite.com/v3/xGlobalQuotes.json/";this.holidaysBase="http://globalholidays.xignite.com/xGlobalHolidays.json/";this.ratesServiceBase="http://www.xignite.com/xRates.json/";this.superQuotesServiceBase="http://superquotes.xignite.com/xSuperQuotes.json/";this.globalHolidaysServiceBase="http://globalholidays.xignite.com/xGlobalHolidays.json/";this.historicalQuoteServiceBase="http://www.xignite.com/xGlobalHistorical.json/";this.historicalIndexServiceBase="http://globalindiceshistorical.xignite.com/xglobalindiceshistorical.json/";this.tokenService=TOKEN_ENDPOINT;this.marketSupportService=MARKET_SUPPORT_SERVICE_ENDPOINT;this.marketSupportServiceKey=MARKET_SUPPORT_SERVICE_KEY;this.pollRefreshTime=5e3;this.quoteService=this.superQuotesServiceBase+"GetQuotes";this.topMarketMoversService=this.globalQuotesServiceBase+"GetTopMarketMovers";this.getGlobalDelayedQuoteService=this.globalQuotesServiceBase+"GetGlobalDelayedQuote";this.optionsService=this.globalOptionsServiceBase+"GetAllEquityOptionChain";this.latestFundamentalsService=this.factSetFundamentalsServiceBase+"GetLatestFundamentals";this.fundamentalFiscalRangeService=this.factSetFundamentalsServiceBase+"GetFundamentalsFiscalRange";this.indexValueService=this.globalIndicesServiceBase+"GetDelayedIndicesValue";this.indexService=this.globalIndicesServiceBase+"GetChartBars";this.getPriorDateBase=this.holidaysBase+"GetPriorDate";this.getExchangeHoursBase=this.holidaysBase+"GetExchangeHours";this.getRateFamilyService=this.ratesServiceBase+"GetRateFamily";this.getLatestRateFamilyService=this.ratesServiceBase+"GetLatestRateFamily";this.getRateFamilyTableService=this.ratesServiceBase+"GetRateFamilyTable";this.areExchangesOpenService=this.globalHolidaysServiceBase+"AreExchangesOpen";this.getPriorDateService=this.globalHolidaysServiceBase+"GetPriorDate";this.getEndOfDayQuotesService=this.historicalQuoteServiceBase+"GetEndOfDayQuotes"};Xignite.prototype.setError=function(t){this.lastError=t};Xignite.prototype.tokenizeQuery=function(t,e){var i=e+"&_token="+t.token+"&_token_userid="+t.userId;if(this.useProxy){i=i.replace("http://",this.marketSupportService);i+="&api_key="+this.marketSupportServiceKey}return i};Xignite.prototype.isFunction=function(t){return!!(t&&t.constructor&&t.call&&t.apply)};Xignite.prototype.hasToken=function(){var t=this.getToken();return void 0!==t&&t};Xignite.prototype.setToken=function(t){this._token=t};Xignite.prototype.getToken=function(){return this._token};Xignite.prototype.isTokenValid=function(){var t=this.getToken();return!!this.hasToken()&&(!(void 0===t.expire||!parseInt(t.expire,10))&&(parseInt(t.expire,10)-(new Date).getTime())/1e3>60)};Xignite.prototype.withValidToken=function(){var t=$.Deferred(),e=this;this.isTokenValid()?t.resolve(this.getToken()):$.ajax({dataType:"json",type:"GET",url:this.tokenService}).done(function(i){if(["token","userId","expire"].reduce(function(t,e){return void 0!==i[e]&&i[e]?t:t+1},0))t.reject();else{e.setToken(i);t.resolve(e.getToken())}}).fail(function(e,i){t.reject(e,i)});return t.promise()};Xignite.prototype.makeRequest=function(t){var e=this,i=$.Deferred();t||i.reject("Bad query string provided");e.withValidToken().done(function(n){$.ajax({url:e.tokenizeQuery(n,t),dataType:"json",type:"GET"}).done(function(t){i.resolve(t)}).fail(function(t,e,n){i.fail(t,e,n)})}).fail(function(t,n,a){e.setToken(null);i.reject(t,n,a)});return i.promise()};Xignite.prototype.quote=function(t){return this.makeRequest(this.quoteService+"?IdentifierType=Symbol&Identifiers="+t.join())};Xignite.prototype.getEndOfDayQuotes=function(t){return this.makeRequest(this.getEndOfDayQuotesService+"?"+$.param(t))};Xignite.prototype.quoteChart=function(t){return new XigniteChart(this,"stock",!1).getChartData(t)};Xignite.prototype.getIndices=function(t){return new XigniteChart(this,"index",!1).getChartData(t)};Xignite.prototype.getTrumpWheelIndices=function(t){return this.makeRequest(this.indexService+"?"+$.param(t))};Xignite.prototype.getLatestFundamentals=function(t){return this.makeRequest(this.latestFundamentalsService+"?"+$.param(t))};Xignite.prototype.getFundamentalsFiscalRange=function(t){return this.makeRequest(this.fundamentalFiscalRangeService+"?"+$.param(t))};Xignite.prototype.getOptions=function(t){return this.makeRequest(this.optionsService+"?"+$.param(t))};Xignite.prototype.getTopMarketMovers=function(t){return this.makeRequest(this.topMarketMoversService+"?"+$.param(t))};Xignite.prototype.getDelayedFutures=function(t){return new XigniteChannels(this).getDelayedFuturesCommodities(t)};Xignite.prototype.getAllDelayedFutures=function(t){return new XigniteChannels(this).getAllDelayedFuturesCommodity(t)};Xignite.prototype.getRateFamily=function(t){return this.makeRequest(this.getRateFamilyService+"?"+$.param(t))};Xignite.prototype.getLatestRateFamily=function(t){return this.makeRequest(this.getLatestRateFamilyService+"?"+$.param(t))};Xignite.prototype.getRateFamilyTable=function(t){return this.makeRequest(this.getRateFamilyTableService+"?"+$.param(t))};Xignite.prototype.getIndicesValue=function(t){return this.makeRequest(this.indexValueService+"?"+$.param(t))};Xignite.prototype.getPriorDate=function(t){return this.makeRequest(this.getPriorDateBase+"?"+$.param(t))};Xignite.prototype.getExchangeHours=function(t,e,i){params={Exchange:t,Date:e,TimeZone:i};return this.makeRequest(this.getExchangeHoursBase+"?"+$.param(params))};Xignite.prototype.getGlobalDelayedQuote=function(t){return this.makeRequest(this.getGlobalDelayedQuoteService+"?"+$.param(t))};"undefined"!=typeof module&&module.exports&&(module.exports={Xignite:Xignite});Xignite.prototype.getLatestMarketOpenDate=function(t){var e=$.Deferred(),i=new Date;xignite.getExchangeHours(t,xignite.getToday(),"UTC").done(function(n){var a=new Date(n.Date+" "+n.OpenTime+" UTC"),o=(new Date(n.Date+" "+n.CloseTime+" UTC"),new Date(n.Date+" 12:00:00 AM"));o.setDate(o.getDate()+1);var r=new Date(a.getTime()+9e5);n.IsOpen&&i>=r&&i<=o?e.resolve(new Date(n.Date).getTime()):xignite.getPriorDate({Location:t,LocationType:"Exchange",Date:xignite.getToday()}).done(function(t){e.resolve(new Date(t.Value).getTime())}).fail(function(t){e.reject({getPriorDate:t})})}).fail(function(t){e.reject({getExchangeHours:t})});return e.promise()};Xignite.prototype.getExchangeNameForSymbol=function(t){var e=$.Deferred();xignite.getGlobalDelayedQuote({IdentifierType:"Symbol",Identifier:t}).done(function(t){e.resolve(t.Security.MarketIdentificationCode)}).fail(function(t){e.reject({getGlobalDelayedQuote:t})});return e.promise()};Xignite.prototype.getLatestMarketOpenDateForSymbol=function(t){var e=$.Deferred();xignite.getExchangeNameForSymbol(t).done(function(t){xignite.getLatestMarketOpenDate(t).done(function(t){e.resolve(t)}).fail(function(t){e.reject({getLatestMarketOpenDate:t})})}).fail(function(t){e.reject({getExchangeNameForSymbol:t})});return e.promise()};Xignite.prototype.getToday=function(){var t=new Date,e=t.getDate(),i=t.getMonth()+1,n=t.getFullYear(),a=null;e<10&&(e="0"+e);i<10&&(i="0"+i);a=i+"/"+e+"/"+n;return a};var XigniteChart=function(t,e){this.type=e;this.xignite=t;this.stockGranular=t.globalQuotesServiceBase+"GetChartBars";this.indexGranular=t.globalIndicesServiceBase+"GetChartBars";this.stockHistorical=t.historicalQuoteServiceBase+"GetGlobalHistoricalQuotesRange";this.indexHistorical=t.historicalIndexServiceBase+"GetHistoricalIndexValues";this.marketOpen="9:30";this.marketClose="16:00";switch(this.type){case"stock":this.granular=this.stockGranular;this.historical=this.stockHistorical;break;case"index":this.granular=this.indexGranular;this.historical=this.indexHistorical;break;default:console.log("Unable to create XigniteChart object, Invalid type specified: "+e)}};XigniteChart.prototype.getChartData=function(t){var e=this,i=$.Deferred(),n=new Date,a=new Date;n.setFullYear(a.getFullYear()-2);var o=new Date(t.StartTime).getTime()
;if("hours"===t.Precision.toLowerCase()&&"24"===t.Period||o<n.getTime()){var r={};r.IdentifierType=t.IdentifierType;r.Identifier=t.Identifier;r.StartDate=$.format.date(new Date(t.StartTime).getTime(),"M/d/yyyy");r.EndDate=$.format.date(new Date(t.EndTime).getTime(),"M/d/yyyy");r.AdjustmentMethod="SplitAndProportionalCashDividend";this.xignite.makeRequest(this.historical+"?"+$.param(r)).done(function(t){if("Success"===t.Outcome){var n=e.parseHistorical(t);i.resolve(n)}else i.reject(t.Message)}).fail(function(t){i.reject(t)})}else this.xignite.makeRequest(this.granular+"?"+$.param(t)).done(function(t){if("Success"===t.Outcome){var n=e.parseResponse(t);i.resolve(n)}else i.reject(t.Message)}).fail(function(t){i.reject(t)});return i};XigniteChart.prototype.parseHistorical=function(t){var e=null;switch(this.type){case"stock":e=this.parseHistoricalStockResponse(t);break;case"index":e=this.parseHistoricalIndexResponse(t)}e.points[0].StartDate>e.points[e.points.length-1].StartDate&&e.points.reverse();return e};XigniteChart.prototype.parseResponse=function(t){for(var e={},i=[],n=0;n<t.ChartBars.length;n++){var a=t.ChartBars[n],o=this.parseTime(a.StartTime,a.UTCOffset,this.xignite.UtcOffset),r=this.parseTime(a.EndTime,a.UTCOffset,this.xignite.UtcOffset);if(o>=this.marketOpen||r<=this.marketClose){var s={};s.StartDate=new Date(a.StartDate+" "+a.StartTime+" UTC"+a.UTCOffset).getTime();s.EndDate=new Date(a.EndDate+" "+a.EndTime+" UTC"+a.UTCOffset).getTime();s.Open=a.Open;s.High=a.High;s.Low=a.Low;s.Close=a.Close;s.Volume=a.Volume;s.Trades=a.Trades;s.TWAP=a.TWAP;s.VWAP=a.VWAP;s.Currency=a.Currency;s.Session=a.Session;s.AdjustmentRatio=a.AdjustmentRatio;i.push(s)}}e.points=i;e.Outcome=t.Outcome;e.UtcOffset=t.ChartBars[t.ChartBars.length-1].UTCOffset;e.points.length>0&&e.points[0].StartDate>e.points[e.points.length-1].StartDate&&e.points.reverse();return e};XigniteChart.prototype.parseHistoricalStockResponse=function(t){for(var e={},i=[],n=0;n<t.GlobalQuotes.length;n++){var a={};a.StartDate=new Date(t.GlobalQuotes[n].Date+" UTC"+this.xignite.UtcOffset).getTime();a.EndDate=new Date(t.GlobalQuotes[n].Date+" UTC"+this.xignite.UtcOffset).getTime();a.Open=t.GlobalQuotes[n].Open;a.High=t.GlobalQuotes[n].High;a.Low=t.GlobalQuotes[n].Low;a.Close=t.GlobalQuotes[n].Last;a.Volume=t.GlobalQuotes[n].Volume;a.Trades=null;a.TWAP=null;a.VWAP=null;a.Currency=t.GlobalQuotes[n].Currency;a.Session=null;a.AdjustmentRatio=null;i.push(a)}e.points=i;e.Outcome=t.Security.Outcome;e.UtcOffset=t.GlobalQuotes[t.GlobalQuotes.length-1].UTCOffset;return e};XigniteChart.prototype.parseHistoricalIndexResponse=function(t){for(var e={},i=[],n=0;n<t.Values.length;n++){var a={};a.StartDate=new Date(t.Values[n].Date+" UTC"+this.xignite.UtcOffset).getTime();a.EndDate=new Date(t.Values[n].Date+" UTC"+this.xignite.UtcOffset).getTime();a.Open=t.Values[n].Open;a.High=t.Values[n].High;a.Low=t.Values[n].Low;a.Close=t.Values[n].Close;a.Volume=t.Values[n].Volume;a.Trades=null;a.TWAP=null;a.VWAP=null;a.Currency=null;a.Session=null;a.AdjustmentRatio=null;i.push(a)}e.points=i;e.Outcome=t.Outcome;e.UtcOffset=t.Values[t.Values.length-1].UTCOffset;return e};XigniteChart.prototype.parseTime=function(t,e,i){var n=-1*(e-i),a=parseInt(t.substring(0,t.indexOf(":")));a=parseInt(a)+parseInt(-1===t.indexOf("PM")||12===a?0:12);a=parseInt(a)+parseInt(n);return a+":"+t.substring(t.indexOf(":")+1,t.indexOf(":")+3)};"undefined"!=typeof module&&module.exports&&(module.exports={loadQuoteData:loadQuoteData,updateQuoteData:updateQuoteData,setUpDownColorClasses:setUpDownColorClasses});var baseMarketsURL="markets",HAS_SPONSORSHIP_BUTTONS=!1;$(function(){HAS_SPONSORSHIP_BUTTONS&&$("section.markets span.trades").show()});$(function(){$("input.symbol-autocomplete").symbolAutoComplete();$("input.symbol-autocomplete-fixed").symbolAutoComplete({menuClass:"fixed"});$("input.symbol-search-entergoto").keyup(function(t){if(13==t.keyCode){var e=$(this).val(),i=e.toUpperCase();$.ajax({url:"/"+baseMarketsURL+"/api/suggest/"+i+"/",success:function(t){var n=!1;if(1===t.length){invMarketsGoToSymbol(encodeURI(t[0].symbol.toLowerCase()));n=!0}else for(var a=0;a<t.length;a++){var o=t[a];if(o.symbol===i){invMarketsGoToSymbol(encodeURI(i));n=!0;break}}n||runSiteSearch(e)},error:function(){runSiteSearch(e)}})}});$("body").on("click",".go-to-watchlist",function(){window.location.href="/"+baseMarketsURL+"/watchlist/"})});!function(t){t.fn.scrollingMenu=function(e){var i={};t.extend(i,e);return this.each(function(){var e=t(this),i=t('<div class="indicator"></div>'),n=e.find("ul > li > a");e.append(i);var a=function(t){if(t){e.find(".selected").removeClass("selected");t.addClass("selected");i.css({top:t.position().top+"px"})}};n.on("click",function(e){var i=this;e.preventDefault();var n=t(this).data("section");quotePage.hasSection(n)&&quotePage.goToSection(n).done(function(){a(t(i));quotePage.firePageView(n)}).fail(function(t){})});quotePage.events.on("section-enter",function(e){var i=t('a[data-section="'+e.section+'"]');i.length&&a(t(i))})})};t.fn.displayRecentStocks=function(e,i,n){function a(e,a){"mini"==i&&r.show();var l=0;void 0===n&&(n=null);for(var c in e)if(c>=a&&l<h){var u=e[c];if("Success"==u.Outcome&&u.Identifier!=n){var p=u.Change>=0?"value-plus":"value-minus",f=u.Change>0?"+":"",g=u.Volume>999999?numberSmartFormat(u.Volume,2):u.Volume.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),m='<tr identifier="'+u.Identifier+'">';"full"!=i&&"mid"!=i||(m+='  <td class="action"><div class="modal-container"><div class="stroke inv-icon-star" data-symbol="'+u.Identifier+'"></div></div></td>');m+='  <td><a href="/'+baseMarketsURL+"/stocks/"+modifySymbol(u.Identifier,"/","-").toLowerCase()+'/">'+u.Identifier+"</a></td>";"full"==i&&(m+=' <td class="name"><a href="/'+baseMarketsURL+"/stocks/"+modifySymbol(u.Identifier,"/","-").toLowerCase()+'/">'+u.Name+"</a></td>");m+='  <td class="num">'+numberSmartFormat(u.Last,2)+"</td>";"full"==i&&(m+='  <td class="num change"><span class="'+p+'">'+f+numberSmartFormat(u.Change,2)+"</span></td>");m+='  <td class="num"><span class="'+p+'">'+f+u.PercentChange.toFixed(2)+"%</span></td>";"full"==i&&(m+='  <td class="num volume">'+g+"</td>");m+="</tr>";s.append(m);l++}else"Success"!==u.Outcome&&o.remove(u.Identifier)}if("mid"==i)if(l>0)t(".recently-viewed-footer").text("Displaying "+l+" of "+Object.keys(d).length);else{s.hide();t(".recently-viewed-footer").parent().hide();t(".no-recently-viewed-message").show();t(".recently-viewed-manage-button").hide();t(".recently-viewed-search").css("display","");t(".recently-viewed-search").show();t(".recently-viewed-search .symbol-search-entergoto").keyup(function(e){if(13==e.keyCode){var i=t(this).val();invMarketsGoToSymbol(encodeURI(i))}})}t("body").trigger("data-table-loaded","RecentlyViewed");0==l&&"mid"!=i&&r.hide()}var o=new recentlyViewedStocks,r=this,s=r.find("table.data"),l=o.get(),h=idc_device.desktop&&"mid"==i?10:5,c=0,d=null;t(".recent-load-more").hide();if(null!=l||"mid"==i){var u=l;u&&u.length>5&&t(".recent-load-more").show();if(u&&u.length>0){e.quote(u).done(function(t){invtimer.log("Recently viewed loaded");d=t;a(t,c);c+=h}).fail(function(){var t="4";"full"==i?t="7":"mini"==i&&(t="3");s.append('<tr><td align="center" colspan="'+t+'">Stock data not available</td></tr>')});"full"==i&&t(".recent-load-more").on("click",function(){a(d,c);c+=5;c>=Object.keys(d).length&&t(".recent-load-more").hide()})}else"mid"==i&&a({},0)}else r.hide()}}(jQuery);PortfolioManagerService=function(t){this.config=this.extend({endpoint:"/portfolio-manager/api",timeout:5e3},t)};PortfolioManagerService.prototype.request=function(t){var e=this.extend({method:"GET",url:"",data:null,success:null,error:null,before:null,after:null},t),i=new XMLHttpRequest,n=void 0!==XMLHttpRequest.DONE?XMLHttpRequest.DONE:4;i.open(e.method,this.joinURLPath(this.config.endpoint,e.url),!0);i.onreadystatechange=function(){var t;if(i.readyState===n){try{t=JSON.parse(i.responseText)}catch(e){t=null}i.status>=200&&i.status<300&&"function"==typeof e.success?t&&void 0!==t.data?e.success(t,i.status,i):e.success(null,i.status,i):"function"==typeof e.error&&(t&&void 0!==t.error?e.error(t.error,i.status,i):e.error("An error has occurred",i.status,i));"function"==typeof e.after&&e.after(xhr)}};i.setRequestHeader("Content-Type","application/vnd.api+json;charset=UTF-8");"function"==typeof e.before&&e.before(i);i.send(e.data?JSON.stringify({data:e.data}):null)};PortfolioManagerService.prototype.getPortfolios=function(t){this.request(this.extend({method:"GET",url:"/portfolios/"},t))};PortfolioManagerService.prototype.searchPortfoliosBySymbol=function(t,e){this.request(this.extend({method:"GET",url:"/portfolios/search/?filter[symbols]="+e},t))};PortfolioManagerService.prototype.addPortfolio=function(t){this.request(this.extend({method:"POST",url:"/portfolios/"},t))};PortfolioManagerService.prototype.deletePortfolio=function(t,e){this.request(this.extend({method:"DELETE",url:"/portfolios/"+t+"/"},e))};PortfolioManagerService.prototype.editPortfolio=function(t,e){this.request(this.extend({method:"PATCH",url:"/portfolios/"+t+"/"},e))};PortfolioManagerService.prototype.deleteSymbol=function(t,e){this.request(this.extend({method:"DELETE",url:"/portfolios/"+t+"/symbols/"},e))};PortfolioManagerService.prototype.addSymbol=function(t,e){this.request(this.extend({method:"POST",url:"/portfolios/"+t+"/symbols/"},e))};PortfolioManagerService.prototype.getUserInfo=function(t,e){this.request(this.extend({method:"GET",url:"/user/"+t+"/"},e))};PortfolioManagerService.prototype.editUserInfo=function(t,e){this.request(this.extend({method:"PATCH",url:"/user/"+t+"/"},e))};PortfolioManagerService.prototype.extend=function(){for(var t=1;t<arguments.length;t++)for(var e in arguments[t])({}).hasOwnProperty.call(arguments[t],e)&&(arguments[0][e]=arguments[t][e]);return arguments[0]};PortfolioManagerService.prototype.joinURLPath=function(t,e){return t.replace(/\/+$/g,"")+"/"+e.replace(/^\/+/g,"")};"undefined"!=typeof module&&module.exports&&(module.exports=PortfolioManagerService);PortfolioManager=function(t){void 0===investopedia.helper&&(investopedia.helper={});if(void 0!==investopedia.helper.PortfolioManager)return investopedia.helper.PortfolioManager;investopedia.helper.PortfolioManager=void 0!==t?this.init(t):this.init(new PortfolioManagerService);return investopedia.helper.PortfolioManager};PortfolioManager.prototype.init=function(t){this.portfolios={};this.activePortfolioId=null;this.portfolioManagerService=t;this.handlerElement=$("body");return this};PortfolioManager.prototype.initPortfolios=function(){var t=this;this.getPortfoliosWrapper().done(function(e){t.initPortfoliosSuccess(e)}).fail(function(e){t.initPortfoliosFail(e)})};PortfolioManager.prototype.setActivePortfolio=function(t){if(t&&t!==this.activePortfolioId){this.activePortfolioId=t;this.handlerElement.trigger("select-portfolio.pm")}};PortfolioManager.prototype.getPortfoliosWrapper=function(){var t=$.Deferred();this.portfolioManagerService.getPortfolios({success:t.resolve,error:t.reject});return t.promise()};PortfolioManager.prototype.serializePortfolioID=function(t){return"_"===String(t).substr(0,1)?String(t):"_"+String(t)};PortfolioManager.prototype.unserializePortfolioID=function(t){return t.substring(1)};PortfolioManager.prototype.initPortfoliosSuccess=function(t){for(var e in t.data)if(!(t.data[e].readonly&&Object.keys(t.data[e].symbols).length<1)){this.portfolios[this.serializePortfolioID(t.data[e].id)]=t.data[e];var i={};for(var n in t.data[e].symbols)i[t.data[e].symbols[n].name.toUpperCase()]=t.data[e].symbols[n];this.portfolios[this.serializePortfolioID(t.data[e].id)].symbols=i}this.activePortfolioId=this.getActivePortfolioId();this.handlerElement.trigger("init.pm")};PortfolioManager.prototype.initPortfoliosFail=function(t){"Unauthenticated"===t?this.logError("Login required."):this.logError("Unable to fetch portfolios for watchlist.")};PortfolioManager.prototype.getActivePortfolioId=function(){var t=null,e=null;for(var i in this.portfolios){var n=this.portfolios[i];if(1!==n.readonly)if(null==e){t=i;e=n}else if(Date.parse(n.updated_at)>Date.parse(e.updated_at)){t=i;e=n}}return t};PortfolioManager.prototype.addSymbol=function(t,e){var i=this,n=this.unserializePortfolioID(e),a=this.modifySymbol(t,"/","-"),o="/"+baseMarketsURL+"/api/verify/"+a+"/";i.handlerElement.trigger("start-add-symbol.pm",[e,t]);$.getJSON(o,function(a){a?i.portfolioManagerService.addSymbol(n,{data:[{type:"symbol",name:t}],success:function(n,a,o){i.setActivePortfolio(i.serializePortfolioID(e));i.portfolios[e].symbols[t]=i.prepareSymbol(t);i.handlerElement.trigger("add-symbol.pm",[e,t])},error:function(n,a,o){"DuplicateSymbol"===n?i.handlerElement.trigger("add-symbol-error.pm",[e,t,n]):i.logError("Unable to add symbol to portfolio.")}}):i.handlerElement.trigger("add-symbol-error.pm",[e,t,!1])})};PortfolioManager.prototype.prepareSymbol=function(t){var e;if(t){t=this.modifySymbol(t,"-","/");e={};e.created_at=new Date;e.id=null;e.name=t;e.type="symbol"}return e};PortfolioManager.prototype.modifySymbol=function(t,e,i){var n=t;e||(e="-");i||(i="/");-1!==t.indexOf(e)&&(n=t.replace(e,i));return n};PortfolioManager.prototype.deleteSymbol=function(t,e){var i=this,n=this.unserializePortfolioID(e);i.handlerElement.trigger("start-delete-symbol.pm",[e,t]);this.portfolioManagerService.deleteSymbol(n,{data:[{type:"symbol",name:t}],success:function(n,a,o){delete i.portfolios[e].symbols[t];i.activePortfolioId=i.getActivePortfolioId();i.handlerElement.trigger("delete-symbol.pm",[e,t])},error:function(n,a,o){i.logError("Unable to delete stock symbol.");i.handlerElement.trigger("delete-symbol-error.pm",[e,t])}})};PortfolioManager.prototype.addPortfolio=function(t){var e=this,i=$.Deferred();this.portfolioManagerService.addPortfolio({data:{name:t,notify:1},success:function(t,n,a){var o=e.serializePortfolioID(t.data.id);e.portfolios[o]=t.data;e.setActivePortfolio(o);e.handlerElement.trigger("add-portfolio.pm",[o]);e.decideAndSendFirstWatchlistEmail();i.resolve(o)},error:function(n,a,o){e.logError("Unable to add portfolio.");e.handlerElement.trigger("add-portfolio-error.pm",[t,n]);i.reject(n)}});return i.promise()};PortfolioManager.prototype.editPortfolio=function(t,e){var i=this,n=this.unserializePortfolioID(t);this.portfolioManagerService.editPortfolio(n,{data:{name:e},success:function(n,a,o){i.portfolios[t].name=e;i.handlerElement.trigger("edit-portfolio.pm",[t])},error:function(t,e,n){i.logError("Unable to edit portfolio.")}})};PortfolioManager.prototype.deletePortfolio=function(t){var e=this,i=this.unserializePortfolioID(t);e.handlerElement.trigger("start-delete-portfolio.pm");this.portfolioManagerService.deletePortfolio(i,{success:function(i,n,a){delete e.portfolios[t];e.handlerElement.trigger("delete-portfolio.pm");e.handlerElement.trigger("end-delete-portfolio.pm")},error:function(t,i,n){e.logError("Unable to delete portfolio");e.handlerElement.trigger("end-delete-portfolio.pm")}})};PortfolioManager.prototype.decideAndSendFirstWatchlistEmail=function(){var t=this,e=investopedia.helper.authentication.getUserID();void 0===e||isNaN(parseInt(e,10))||this.portfolioManagerService.getUserInfo(e,{success:function(i,n,a){0===i.data.first_email_sent&&t.sendFirstWatchlistEmail(e)}})};PortfolioManager.prototype.sendFirstWatchlistEmail=function(t){var e=this,i="/"+baseMarketsURL+"/api/sendfirstwatchlistemail";$.ajax({url:i,type:"GET",data:{sitewideUserId:t},dataType:"json",success:function(i,n,a){"Success"===i.Status&&e.setFirstEmailSentFlag(t,!0);invtimer.log("Trying to send First-Watchlist Email done")}})};PortfolioManager.prototype.setFirstEmailSentFlag=function(t,e){this.portfolioManagerService.editUserInfo(t,{data:{first_email_sent:e}})};PortfolioManager.prototype.setNotify=function(t){var e=this,i=this.elements.parent.find(".watchlist-notify")[0];this.portfolioManagerService.editPortfolio(t,{data:{type:"portfolio",notify:i.checked,name:this.portfolios[this.activePortfolioId].name},success:function(t,n,a){e.portfolios[e.activePortfolioId].notify=i.checked},error:function(t,i,n){e.logError("Unable to set notify for portfolio "+e.portfolios[e.activePortfolioId].name)}})};PortfolioManager.prototype.logError=function(t){console.log(t)};var Chart=function(){this.series_colors=["#67a2f7","#b78521","#f79331","#6769f7"];this.noDataTimer};Chart.prototype.styleSeries=function(){var t={};t.color=this.series_colors[0];t.enableMouseTracking=!0;t.states={hover:{enabled:!0}};t.animation=!0;return t};Chart.prototype.updateSeries=function(t){var e;for(e in t)null!=t[e]&&this.chart.series[e].update(t[e],!1);this.hideLoader();this.chart.redraw()};Chart.prototype.showLoader=function(t){var e="",i=this;(null==t||isNaN(t))&&(t=12e3);e+='<div class="loader">';e+='  <div class="progress">';e+='    <span class="point"></span>';e+='    <span class="point"></span>';e+='    <span class="point"></span>';e+="  </div>";e+='  <div class="message"></div>';e+="  </div>";e+="</div>";this.elements.chart.find(".highcharts-container").prepend(e);clearTimeout(this.noDataTimer);this.noDataTimer=setTimeout(function(){i.showDataNotAvailable()},t)};Chart.prototype.showDataNotAvailable=function(){this.elements.chart.find(".loader").addClass("timeout")};Chart.prototype.hideLoader=function(){clearTimeout(this.noDataTimer);this.elements.chart.find(".loader").remove()};Chart.prototype.configure=function(){output={};return output};Chart.prototype.loadData=function(){};var FinancialChart=function(t,e,i){Chart.apply(this);var n=this.configure();this.symbol=e;this.setDefaultXigniteParameters(e);this.element=t;this.elements={};this.elements.chartContainer=this.element.find(".chart");this.elements.tabset=this.element.find(".tabset > li");this.elements.chartContainer.highcharts(n);this.selectedTab=$(this.elements.tabset[0]);this.initialType=this.selectedTab.find("a").attr("data-type");this.params.FundamentalTypes=this.initialType;this.industryClassification=i;this.loadData(e);this.chart=this.elements.chartContainer.highcharts();this.initElements()};FinancialChart.prototype=Object.create(Chart.prototype);FinancialChart.prototype.constructor=FinancialChart;FinancialChart.prototype.setDefaultXigniteParameters=function(t){var e=new Date,i=new Date;i.setMonth(i.getMonth()-24);this.quarterlyStartDate=i.toLocaleDateString("en-US").replace(/[^ -~]/g,"");i.setFullYear(i.getFullYear()-5);this.annualStartDate=i.toLocaleDateString("en-US").replace(/[^ -~]/g,"");this.params={};this.params.IdentifierType="Symbol";this.params.Identifiers=t;this.params.StartDate=this.quarterlyStartDate;this.params.EndDate=e.toLocaleDateString("en-US").replace(/[^ -~]/g,"");this.params.ReportType="Quarterly";this.params.ExcludeRestated="false";this.params.UpdatedSince=null};FinancialChart.prototype.loadData=function(t){var e=this;e.params.FundamentalTypes=this.selectedTab.find("a").attr("data-type");"Quarterly"==e.params.ReportType?e.params.StartDate=e.quarterlyStartDate:"Annual"==e.params.ReportType&&(e.params.StartDate=e.annualStartDate);"TotalCash"==e.params.FundamentalTypes&&"Bank"==e.industryClassification&&(e.params.FundamentalTypes="TotalCashDueFromBanks");var i=[],n=[],a=getInlineErrorMarkup("Looks like there's no data to show.","We're working to fix the problem. Check back later for market data and company info."),o=getInlineErrorMarkup("Looks like there's no data to show.");xignite.getFundamentalsFiscalRange(this.params).done(function(t){if(void 0!==t[0]&&"Success"==t[0].Outcome){var r=t[0].FundamentalsSets;"Quarterly"==e.params.ReportType&&r.reverse();var s=e.formatXigniteData(r),l=!0;for(point in s){0!=s[point]&&(l=!1);n.push(point);i.push(s[point])}if(l){!1===$(e.element).children().hasClass("data-error")?$(e.elements.chartContainer).before(o):e.element.find(".data-error").css("display","block");$(e.elements.chartContainer).css("visibility","hidden")}else{$(e.elements.chartContainer).css("visibility","visible");e.element.find(".data-error").css("display","none");e.element.trigger("data",[n,i])}}else{!1===$(e.element).children().hasClass("data-error")?$(e.elements.chartContainer).before(a):e.element.find(".data-error").css("display","block");$(e.elements.chartContainer).css("visibility","hidden")}}).fail(function(t){!1===$(e.element).children().hasClass("data-error")?$(e.elements.chartContainer).before(a):e.element.find(".data-error").css("display","normal");$(e.elements.chartContainer).css("visibility","hidden")})};FinancialChart.prototype.formatXigniteData=function(t){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],n={};for(i in t){pointData=t[i].Fundamentals[0];if("Success"==pointData.Outcome){var a=Number(pointData.Value);switch(pointData.Unit.toLowerCase()){case"trillions":a*=1e12;break;case"billions":a*=1e9;break;case"millions":a*=1e6;break;case"thousands":a*=1e3}var o,r=new Date(t[i].AsOfDate);o="Annual"==this.params.ReportType?r.getFullYear().toString():e[r.getMonth()]+" "+r.getFullYear();n[o]=isNaN(a)?0:a}}return n};FinancialChart.prototype.updateSeries=function(t){var e;for(e in t)null!=t[e]&&this.chart.series[e].update(t[e],!1);this.chart.redraw()};FinancialChart.prototype.updateCategories=function(t){this.chart.xAxis[0].update({categories:t},!1)};FinancialChart.prototype.configure=function(){var t=this,e={};Highcharts.setOptions({lang:{numericSymbols:["k","M","B","T"],thousandsSep:","}});e.title=null;e.legend=!1;e.credits=!1;e.chart={type:"column",height:250,animation:!1};e.plotOptions={column:{groupPadding:.1,pointPadding:.2,borderWidth:0}};e.tooltip={pointFormatter:t.formatTooltip,valueDecimals:2,backgroundColor:"#ffffff",headerFormat:"",borderColor:"#bbbbbb",shared:!0};e.xAxis={lineColor:"#dddddd",tickColor:"#dddddd",tickmarkPlacement:"on",labels:{y:25}};e.yAxis={title:{text:null},labels:{formatter:function(){return"$"+this.axis.defaultLabelFormatter.call(this)}},gridLineColor:"#dddddd"};e.series=[{color:"#7da0f5",animation:!0}];return e};FinancialChart.prototype.initElements=function(){var t=this;this.element.on("data",function(e,i,n){var a={};a.name="financial-chart";a.data=n.slice(0,5);t.updateCategories(i);t.updateSeries([a])});this.elements.tabset.on("click",function(e,i){t.selectedTab=$(this);t.loadData(t.symbol)});this.element.find(".sort-list-item").click(function(e){t.params.ReportType=$(e.target).data("report");t.element.find(".dropmenu .title").text($(e.target).text());t.loadData(t.symbol);$(this).closest("ul").find(".sort-list-item > a").removeClass("selected");$(this).find("> a").addClass("selected")})};FinancialChart.prototype.formatTooltip=function(){return"<b>"+Highcharts.numberFormat(this.y,0,".",",")+"</b><br />"};var StockSeries=function(t){var e=(new Date).getTime(),i=$.format.date(e,"M/d/yyyy"),n=$.format.date(e,"h:mm a");this.request={};this.response={};this.name=t;this.enableMouseTracking=!0;this.states={hover:{enabled:!0}};this.animation=!1;this.connectNulls=!1;this.startOnTick=!0;this.endOnTick=!0;this.color=null;this.gapSize=0;this.view=null;this.request.IdentifierType="Symbol";this.request.Identifier=t;this.request.StartTime="1/1/1994 12:00 AM";this.request.EndTime=i+" "+n;this.request.AdjustmentMethod="All";this.request.IncludeExtended="false";this.request.Precision="Hours";this.request.Period="24";this.firstRun=!1;this.UtcOffset=0},MarkerSeries=function(t){this.type="flags";this.onSeries="dataseries";this.linkedTo=":previous";this.shape="circlepin";this.width=16;this.request={};this.response={};this.name=t;this.enableMouseTracking=!0;this.states={hover:{enabled:!0}};this.animation=!1;this.connectNulls=!1;this.startOnTick=!0;this.endOnTick=!0;this.color=null;this.firstRun=!1},StockChart=function(t,e){Chart.apply(this);this.elements={};this.utcOffset=t;this.marketDate=e;this.defaultSeriesColor="#67a2f7";this.disabledSeriesColor="#dddddd";this.notAStockSeries=["Navigator","Series 1"];this.firstLoad=!0;this.showLoadingIndicator=!0;this.clickedButton=null;this.dataRequests=[];this.rangeSelectorButtonConfig=[{type:"day",count:1,text:"1D"},{type:"day",count:5,text:"5D"},{type:"month",count:1,text:"1M"},{type:"month",count:6,text:"6M"},{type:"year",count:1,text:"1Y"},{type:"year",count:5,text:"5Y"},{type:"all",text:"MAX"}]};StockChart.prototype=Object.create(Chart.prototype);StockChart.prototype.constructor=StockChart;StockChart.prototype.configure=function(){var t=this,e={};Highcharts.setOptions({lang:{rangeSelectorZoom:""},global:{timezoneOffset:60*t.utcOffset*-1}});e.colors=["#67a2f7","#f7941d","#f9cb08","#6769f7"];e.chart={type:"line",spacingTop:120,height:550};e.title={};e.legend={enabled:!1};e.tooltip={pointFormatter:t.formatTooltip,valueDecimals:2,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,shadow:!1,shared:!0,useHTML:!0,dateTimeLabelFormats:{minute:"%A, %b %e, %l:%M %p",hour:"%A, %b %e, %l:%M %p",day:"%A, %b %e, %Y"}};e.scrollbar={liveRedraw:!1};e.plotOptions={series:{dataGrouping:{enabled:!1},states:{hover:{lineWidthPlus:0}}}};e.yAxis=[{labels:{align:"center",y:4,formatter:function(){var t;t=this.chart.series.length>2?this.value+"%":this.value;return t}},opposite:!1,showLastLabel:!0}];e.xAxis=[{type:"datetime",minRange:t.millisecondsIn("day"),dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%l:%M:%S %p",minute:"%l:%M %p",hour:"%l:%M %p",day:"%b %e",week:"%b %e",month:"%b %Y",year:"%Y"},events:{setExtremes:function(e){var i,n,a,o,r,s;r=!1;if("rangeSelectorButton"===e.trigger){r=!0;o=t.getRange(e.rangeSelectorButton,t.marketDate);n=o.minimum;i=o.maximum}if("navigator"===e.trigger){n=parseInt(e.min,10);i=parseInt(e.max,10);a=i-n;a<5*t.millisecondsIn("day")&&(n=i-5*t.millisecondsIn("day"));s=t.getCurrentTimeToChartTimeOffset();if(!isNaN(s)){n+=s;i+=s}}if(void 0!==e.trigger&&("rangeSelectorButton"===e.trigger||"navigator"===e.trigger)){t.onSetExtremes(n,i,r);if(e.rangeSelectorButton)switch(e.rangeSelectorButton.text){case"1D":t.clickedButton=0;break;case"5D":t.clickedButton=1;break;case"1M":t.clickedButton=2;break;case"6M":t.clickedButton=3;break;case"1Y":t.clickedButton=4;break;case"5Y":t.clickedButton=5;break;case"MAX":t.clickedButton=6;break;default:t.clickedButton=null}else t.clickedButton=null}}}}];e.credits={enabled:!1};e.navigator={adaptToUpdatedData:!1,series:{color:this.defaultSeriesColor}};e.rangeSelector={allButtonsEnabled:!0,buttonSpacing:7,buttonPosition:{x:45,y:10},inputEnabled:!1,height:10,buttonTheme:{fill:"none",style:{fontSize:"13px",fontFamily:"Source Sans Pro",padding:"2px 6px",borderRadius:"2px"},states:{select:{fill:"#f0f0f0",style:{fontFamily:"Source Sans Pro",fontWeight:"600",color:"#000"}}}},selected:t.defaultRangeIndex,buttons:t.rangeSelectorButtonConfig};return e};StockChart.prototype.getRange=function(t,e){var i=new Date(e);i.setHours(23,59);max=i.getTime();i.setHours(0,0);min=0;this.marketDate.getTime()<i.getTime()&&(i=new Date(e.getTime()));switch(t.count){case 1:if("day"===t.type){i.setHours(0,0);min=i.getTime()}else if("month"===t.type){i.setMonth(i.getMonth()-1);min=i.getTime()}else if("year"===t.type){i.setFullYear(i.getFullYear()-1);min=i.getTime()}break;case 5:if("day"===t.type)min=max-5*this.millisecondsIn("day");else if("year"===t.type){i.setFullYear(i.getFullYear()-5);min=i.getTime()}break;case 6:i.setMonth(i.getMonth()-6);min=i.getTime();break;default:if("all"===t.type){i.setFullYear(1994);i.setMonth(0);i.setDate(1);min=i.getTime()}}return{minimum:min,maximum:max}};StockChart.prototype.millisecondsIn=function(t){var e;switch(t){case"hour":e=36e5;break;case"day":e=864e5;break;case"week":e=6048e5;break;case"month":e=27648e5;break;case"year":e=331776e5;break;default:e=0;console.log("millisecondsIn: Invalid timeframe.")}return e};StockChart.prototype.configureSeriesForRange=function(t,e,i){var n,a=i-e;if(a<=this.millisecondsIn("day")){t.request.Precision="Minutes";t.request.Period="1";t.view="Day"}else if(a<=this.millisecondsIn("week")){t.request.Precision="minutes";t.request.Period="5";t.view="Week"}else if(a<=this.millisecondsIn("month")){t.request.Precision="Hours";t.request.Period="1";t.view="Month"}else if(a<=this.millisecondsIn("year")){t.request.Precision="Hours";t.request.Period="24";t.view="Year"}else{t.request.Precision="Hours";t.request.Period="24";t.view="Year"}if(a===5*this.millisecondsIn("day")){n=e-10*this.millisecondsIn("day");t.request.StartTime=$.format.date(n,"M/d/yyyy")}else t.request.StartTime=$.format.date(e,"M/d/yyyy");t.request.EndTime=$.format.date(i,"M/d/yyyy h:mm a")};StockChart.prototype.onSetExtremes=function(t,e,i){this.showLoader();var n=this;if(this.dataRequests.length>0)for(var a in this.dataRequests)this.dataRequests[a].reject("Cancelled");this.dataRequests=[];for(var o in this.chart.series)if(this.has_StockSeries(this.chart.series[o])){var r=this.chart.series[o].name,s=this.stockSeriesContainer[r];n.configureSeriesForRange(s,t,e);this.dataRequests.push(this.loadData(s))}$.when.apply($,this.dataRequests).done(function(){!0===i&&n.chart.xAxis[0].setExtremes(t,e,!1);n.postDataLoadChartConfig(n,e-t);n.hideLoader();n.chart.redraw();"function"==typeof n.renderLegend&&n.renderLegend();for(var a in n.chart.rangeSelector.buttons)n.chart.rangeSelector.buttons[a].setState(0);null!=n.clickedButton&&n.chart.rangeSelector.buttons[n.clickedButton].setState(2);"function"==typeof n.fixOverhangingLabel&&n.fixOverhangingLabel()}).fail(function(t){if("Cancelled"!==t){n.showDataNotAvailable();console.log(t)}})};StockChart.prototype.postDataLoadChartConfig=function(t,e){for(var i=Number.MAX_VALUE,n=0,a=0;a<t.chart.series.length;a++)if(this.has_StockSeries(t.chart.series[a])){var o=t.chart.series[a].name,r=t.stockSeriesContainer[o];if(r.values.length>0){var s=r.values[r.values.length-1],l=r.values[0];if(e===5*t.millisecondsIn("day")){for(var h=s[0],c=$.format.date(h,"M/d/yyyy"),d=1,u=r.values.length-1,p=0,f=u;f>0;f--)if($.format.date(r.values[f][0],"M/d/yyyy")!==c){if(!(d<5)){l=r.values[f+1];p=f+1;break}d++;c=$.format.date(r.values[f][0],"M/d/yyyy")}r.values=r.values.slice(p);r.request.StartTime=$.format.date(l[0],"M/d/yyyy")}s[0]<i&&(i=s);l[0]>n&&(n=l);t.updateSeries(r)}}t.chart.xAxis[0].setExtremes(n[0],i[0],!1);if(void 0!==n&&void 0!==i&&t.elements.daterange){first=$.format.date(n[0]+60*new Date(n[0]).getTimezoneOffset()*1e3,"M/d/yyyy");last=$.format.date(i[0]+60*new Date(i[0]).getTimezoneOffset()*1e3,"M/d/yyyy");t.elements.daterange.find("[name=date_from]").datepicker("setDateNoEvent",first);t.elements.daterange.find("[name=date_to]").datepicker("setDateNoEvent",last)}};StockChart.prototype.refreshData=function(){var t=this,e=[];this.showLoadingIndicator=!1;if(void 0!==this.chart&&null!==this.chart){for(var i in this.chart.series)if(this.has_StockSeries(this.chart.series[i])){var n=this.chart.series[i].data.length;if(n>0){var a=this.chart.series[i].data[n-1],o=a.x,r=$.format.date(o,"M/d/yyyy"),s=Date.now(),l=this.getCurrentTimeToChartTimeOffset();s+=l;var h=$.format.date(s,"M/d/yyyy"),c=new Date(s);c.setHours(16,20,0,0);if(r===h&&s<c.getTime()){var d=this.chart.series[i].name,u=this.stockSeriesContainer[d],p=(new Date).getTime(),f=$.format.date(p,"M/d/yyyy");if(void 0===u)continue;if("hours"===u.request.Precision.toLowerCase()&&"24"===u.request.Period)continue;var g=u.UtcOffset-this.utcOffset,m=o+l+60*g*60*1e3;u.animation=!1;u.request.StartTime=f+" "+$.format.date(m,"h:mm a");u.request.EndTime=f+" 11:59 PM";e.push(this.loadNewData(u));this.elements.chart.find(".highcharts-tooltip:eq(0)").length&&this.elements.chart.find(".highcharts-tooltip:eq(0)").position().top<0&&this.setLegendPageValues()}}}$.when.apply($,e).done(function(){var e=!1;for(var i in arguments)arguments[i]&&(e=!0);if(e&&t.chart.series.length>0){for(var n in t.chart.series)if(t.has_StockSeries(t.chart.series[n])){var a=t.chart.series[n].name,o=t.stockSeriesContainer[a];t.updateSeries(o)}t.chart.redraw();"function"==typeof t.renderLegend&&t.renderLegend()}}).fail(function(t){})}};StockChart.prototype.getSeriesByName=function(t,e){var i=null;for(var n in this.chart.series){var a=this.chart.series[n];if(a.name===t){i=a;break}}
null==i&&null!=e&&(i=this.chart.series[e]);return i};StockChart.prototype.formatTooltip=function(){var t,e="";e+='<span style="color:'+this.series.color+'">'+this.series.name+"</span>:";e+="<b>"+Highcharts.numberFormat(this.y,2)+"</b>";if(this.change){t=Highcharts.numberFormat(this.change,2);e+="("+formatValuePlusMinus(t,"%")+")"}e+="<br />";return e};StockChart.prototype.setLegendPageValues=function(){var t=this;this.elements.legend.find(".item").each(function(e){var i=$(this).attr("data-name"),n=t.stockSeriesContainer[i],a=n.values.length>0?n.values[0]:null,o=n.values.length>0?n.values[n.values.length-1]:null;if(null!==a&&null!==o){var r=o[1]-a[1],s=r/a[1],l=numberSmartFormat(r,2)+" ("+numberSmartFormat(100*s,2)+"%)",h=t.elements.legend.find('.item[data-name="'+i+'"] > .change');h.html(" "+l);setUpDownColorClasses(h,r)}})};StockChart.prototype.has_StockSeries=function(t){for(var e in this.notAStockSeries)if(t.name===this.notAStockSeries[e])return!1;return!0};StockChart.prototype.getCurrentTimeToChartTimeOffset=function(){var t=-1*(new Date).getTimezoneOffset(),e=60*this.utcOffset,i=(t-e)/-60;i=60*i*60*1e3;return i};var IndexChart=function(t,e,i,n,a,o,r,s){var l,h,c=this;this.stockSeriesContainer={};StockChart.apply(this,[r,s]);h=this.initConfig(n,a,e);this.dataProvider=o;this.utcOffset=r;this.marketDate=s;this.element=t;this.elements.chart=t.find(".chart");this.elements.legend=t.find(".legend");this.elements.daterange=t.find(".date-field");this.firstRun=!0;this.defaultRangeIndex=i;this.legendValueTimer;this.elements.chart.highcharts("StockChart",h);this.chart=this.elements.chart.highcharts();this.chart.redraw();this.renderLegend();if(void 0!==this.chart.rangeSelector.buttons[this.defaultRangeIndex]&&null!==this.chart.rangeSelector.buttons[this.defaultRangeIndex]){this.chart.rangeSelector.buttons[this.defaultRangeIndex].setState(2);l=new Date(this.marketDate);this.elements.daterange.find("[name=date_from]").datepicker("setDate",l);this.elements.daterange.find("[name=date_to]").datepicker("setDate",l)}$("body").one("quote-load-complete",function(t){c.setLegendPageValues()});this.firstRun=!1;invtimer.log("Index chart data loaded");this.fixOverhangingLabel();this.initElements()};IndexChart.prototype=Object.create(StockChart.prototype);IndexChart.prototype.constructor=IndexChart;IndexChart.prototype.initConfig=function(t,e,i){var n=this,a=this.configure();a.chart.animation=!1;a.series=[];a.tooltip.pointFormatter=function(){return n.formatTooltip(this)};a.navigator.outlineColor="transparent";a.navigator.height=0;a.navigator.handles={backgroundColor:"transparent",borderColor:"transparent"};a.navigator.xAxis={labels:{enabled:!1}};a.scrollbar={enabled:!1};if(void 0!==t&&null!==t&&t.hasOwnProperty.call("points")&&t.points.length>0){var o=[];for(var r in t.points){var s=t.points[r],l=new Date(1e3*s.d).getTime(),h=s.v;o.push([l,h])}a.navigator.series.data=o}if(void 0!==e&&null!==e)for(var c in i)if(void 0!==e[c]&&e[c].hasOwnProperty("points")&&e[c].points.length>0){var d=new StockSeries(i[c].symbol);d.request.StartTime="1/1/1900 9:30 AM";d.compare="percent";d.name=c;d.displayName=i[c].displayName;d.showInNavigator=!1;d.UtcOffset=e[c].utcOffset;d.request.Precision="Minutes";d.request.Period="1";d.values=[];var u=e[c];for(var p in u.points){var f=new Date(1e3*u.points[p].d).getTime(),g=u.points[p].v;isNaN(f)||0===f||isNaN(g)||0===g||d.values.push([f,g])}this.stockSeriesContainer[c]=d;d.data=d.values;a.series.push(d)}return a};IndexChart.prototype.loadData=function(t){return this.dataProvider.getIndices(t.request).done(function(e){(new Date).getTime();t.values=[];t.response=e;t.UtcOffset=e.UtcOffset;for(var i in e.points){var n=e.points[i],a=new Date(n.EndDate).getTime(),o=n.Close;isNaN(a)||0===a||isNaN(o)||0===o||t.values.push([a,o])}})};IndexChart.prototype.loadNewData=function(t){var e=$.Deferred();this.dataProvider.getIndices(t.request).done(function(i){if("Success"===i.Outcome&&i.points.length>0){for(var n in i.points){var a=i.points[n],o=new Date(a.EndDate).getTime(),r=a.Close;isNaN(o)||0===o||isNaN(r)||0===r||t.values.push([o,r])}e.resolve(!0)}}).fail(function(){e.resolve(!1)});return e.promise()};IndexChart.prototype.updateSeries=function(t){this.getSeriesByName(t.name,0).setData(t.values,!1)};IndexChart.prototype.fixOverhangingLabel=function(){var t=this,e=this.elements.chart.find(".highcharts-xaxis-labels:eq(0) text"),i=this.elements.chart.find(".highcharts-yaxis-labels:eq(0)");e.each(function(e){var n=$(this).position().left-i.position().left+i.width(),a=t.elements.chart.find(".highcharts-axis:eq(0) path:eq("+e+")");if(n<-30){$(this).attr("opacity",0);a.attr("stroke-width",0)}})};IndexChart.prototype.renderLegend=function(){for(var t="",e="",i=null,n=0;n<=this.chart.series.length;n++){var a=this.chart.series[n];if(a&&this.has_StockSeries(a)){e="background-color:"+a.color;t+='<div class="item" data-name="'+a.name+'">';t+='<span class="swatch" style="'+e+'"></span>';t+=this.stockSeriesContainer[a.name].displayName;t+='<span class="change"></span>';t+="</div>";i=this.elements.chart.closest(".content").find("#IndexValues .symbols ."+a.name);$(i).attr("style",e)}}this.elements.legend.html(t);!0!==this.firstRun&&this.setLegendPageValues()};IndexChart.prototype.formatTooltip=function(t){var e,i="",n=this.stockSeriesContainer[t.series.name],a="",o=" (0.00%)",r=" 0.00%";i+='<span style="color:'+t.series.color+'">'+n.displayName+"</span>: ";i+="<b>"+Highcharts.numberFormat(t.y,2,".",",")+"</b>";if(t.change){e=Highcharts.numberFormat(t.change,2);if(t.change>0){a="value-plus";e="+"+String(e)}t.change<0&&(a="value-minus");o=' <span class="'+a+'">('+e+"%)</span>";r=' <span class="'+a+'">'+e+"%</span>"}i+=o;i+="<br />";this.elements.legend.find('.item[data-name="'+t.series.name+'"] .change').html(r);this.startLegendValueUpdater();return i};IndexChart.prototype.startLegendValueUpdater=function(){var t=this;this.stopLegendValueUpdater();this.legendValueTimer=setInterval(function(){if(t.elements.chart.find(".highcharts-tooltip:eq(0)").position().top<0){t.stopLegendValueUpdater();t.setLegendPageValues()}},100)};IndexChart.prototype.stopLegendValueUpdater=function(){clearTimeout(this.legendValueTimer)};IndexChart.prototype.initElements=function(){var t=this;(new Date).getTime();this.elements.chart.find(".highcharts-container").append(this.elements.legend);this.elements.chart.prepend(this.elements.daterange);this.elements.chart.find(".input-daterange").datepicker({orientation:"bottom auto",autoclose:!0});this.elements.chart.find(".date-field input").on("changeDate",function(e){var i=new Date(t.elements.chart.find('.date-field [name="date_from"]').val()).getTime(),n=new Date(t.elements.chart.find('.date-field [name="date_to"]').val()).getTime()+(t.millisecondsIn("day")-1);t.onSetExtremes(Math.min(i,n),Math.max(i,n),!0)});this.elements.chart.on("mousedown",function(){t.elements.chart.find(".date-field input").datepicker("hide");t.elements.chart.find(".date-field input").blur()});this.element.bind("mouseleave",function(t){Highcharts.each(Highcharts.charts,function(e){e&&e.scroller&&e.scroller.mouseUpHandler(t)})})};var QuoteChart=function(t,e,i,n,a,o,r){var s,l,h,c,d,u,p=this,f=[],g=[],m=(new Date).getTime();StockChart.apply(this,[o,r]);this.dataProvider=a;this.element=t;this.primaryStockSeries=new StockSeries(e);this.primaryStockSeries.color="#67a2f7";this.primaryStockSeries.type="area";this.primaryStockSeries.threshold=null;this.primaryStockSeries.fillOpacity=.1;this.stockSeriesContainer={};this.stockSeriesContainer[e]=this.primaryStockSeries;this.volumeSeries={};this.volumeSeries.enableMouseTracking=!0;this.volumeSeries.states={hover:{enabled:!0}};this.volumeSeries.animation=!1;this.volumeSeries.startOnTick=!0;this.volumeSeries.endOnTick=!0;this.volumeSeries.color=this.defaultSeriesColor;this.notAStockSeries.push("Volume");this.maxSeries=5;this.defaultRangeIndex=n;this.colors=["#f7941d","#f9cb08"];this.plotLines=[];this.volumeTitle="Volume";this.showLoader(3e4);c=new StockSeries(e);c.name="navigator";c.request.Identifier=e;c.request.StartTime=this.primaryStockSeries.request.StartTime;c.request.EndTime=this.primaryStockSeries.request.EndTime;c.request.Period=this.primaryStockSeries.request.Period;c.request.Precision=this.primaryStockSeries.request.Precision;l=this.loadData(c);d=this.getRange(this.rangeSelectorButtonConfig[n],this.marketDate);this.configureSeriesForRange(this.primaryStockSeries,d.minimum,d.maximum);h=this.loadData(this.primaryStockSeries).fail(function(){p.showDataNotAvailable()});if(i.length>0)for(var v in i){var y,b;if(this.canAddComparison(i[v],!1)){y=this.createSeries(i[v]);b=this.loadNewSeriesData(y);if(null!==b){this.stockSeriesContainer[i[v]]=y;f.push(y);g.push(b)}}}u=$.when.apply($,g);$.when(l,h,u).done(function(){var e;s=p.initConfig(c,p.primaryStockSeries,f);p.elements.chart=t.find(".chart");p.elements.legend=t.find(".legend");p.elements.compare=t.find(".compare-field");p.elements.daterange=t.find(".date-field");p.elements.techButton=t.find(".button.technical");p.elements.chart.highcharts("StockChart",s,function(t){p.chart=t;p.chart.series.length>3&&p.setComparisonConfig();for(var i in p.plotLines)p.chart.xAxis[0].addPlotLine({color:"#cccccc",width:"1",value:p.plotLines[i],id:p.plotLines[i]});p.postDataLoadChartConfig(p,d.maximum-d.minimum);p.chart.redraw();p.renderLegend();p.hideLoader();p.showLoadingIndicator=!0;e=new Date(p.marketDate);p.elements.daterange.find("[name=date_from]").datepicker("setDate",e);p.elements.daterange.find("[name=date_to]").datepicker("setDate",e);void 0!==p.chart.rangeSelector.buttons[p.defaultRangeIndex]&&null!==p.chart.rangeSelector.buttons[p.defaultRangeIndex]&&p.chart.rangeSelector.buttons[p.defaultRangeIndex].setState(2);p.fixOverhangingLabel();p.elements.compare.find("input").symbolAutoComplete({onSelect:function(t,e,i){p.ValidateSymbol(e)}});p.elements.chart.find(".input-daterange").datepicker({minDate:0,maxDate:m,autoclose:!0})});p.initElements()})};QuoteChart.prototype=Object.create(StockChart.prototype);QuoteChart.prototype.constructor=QuoteChart;QuoteChart.prototype.initConfig=function(t,e,i){var n=this,a=this.configure(),o=e.volumes,r={color:this.defaultSeriesColor,data:o,type:"column",name:"Volume",yAxis:1,states:{hover:{enabled:!1}},enableMouseTracking:!1,animation:!1,valueDecimals:2},s=[{labels:{align:"center",y:4,formatter:function(){return n.formatYValues(this)}},height:"75%",opposite:!1,showLastLabel:!0},{labels:{align:"center",y:4,x:0},title:{text:"Volume",rotation:0,offset:0,x:26,y:-30,style:{color:"#555555",fontWeight:"600",fontSize:"14px",fontFamily:"Source Sans Pro"}},offset:10,height:"10%",top:"90%",opposite:!1,showLastLabel:!0}],l=[{from:Date.UTC(2011,9,6,16),to:Date.UTC(2011,9,7,8),repeat:864e5},{from:Date.UTC(2011,9,7,16),to:Date.UTC(2011,9,10,8),repeat:6048e5}];a.navigator.series.data=t.values;a.series=[];e.data=e.values;a.series.push(e);a.chart.spacingLeft=0;a.chart.animation=!1;a.series.push(r);a.xAxis.breaks=l;a.yAxis=s;a.tooltip.pointFormatter=function(){return n.formatTooltip(this)};if(i.length>0)for(var h in i){var c=i[h];c.data=c.values;a.series.push(c)}return a};QuoteChart.prototype.loadData=function(t){var e=this;this.showLoadingIndicator&&this.showLoader();return this.dataProvider.quoteChart(t.request).done(function(i){var n,a;invtimer.log("Charts Loaded");n=i.points[0].Close;t.values=[];t.volumes=[];t.percentages={};t.response=i;t.UtcOffset=i.UtcOffset;"Week"===t.view&&i.points.length>40?t.gapSize=79:t.gapSize=0;if(t.name===e.primaryStockSeries.name){for(var o in e.plotLines)void 0!==e.chart&&null!==e.chart&&e.chart.xAxis[0].removePlotLine(e.plotLines[o]);e.plotLines=[]}for(var r in i.points){var s=i.points[r],l=s.EndDate,h=s.Close,c=s.Volume,d=h-n,u=Highcharts.numberFormat(d/n*100,2);if(!isNaN(l)&&0!==l&&!isNaN(h)&&0!==h){t.values.push([l,h]);t.percentages[l]=u;var p=$.format.date(s.EndDate,"M/d/yyyy");if("Week"===t.view&&i.points.length>40&&a!==p&&null!=a){void 0!==e.chart&&null!==e.chart&&e.chart.xAxis[0].addPlotLine({color:"#cccccc",width:"1",value:l,id:l});e.plotLines.push(l)}c>=0&&t.volumes.push([l,c]);a=p}}})};QuoteChart.prototype.loadNewData=function(t){var e=$.Deferred();this.dataProvider.quoteChart(t.request).done(function(i){invtimer.log("Charts Loaded");if("Success"===i.Outcome&&i.points.length>0){var n=t.values[0][1];for(var a in i.points){var o=i.points[a],r=o.EndDate,s=o.Close,l=o.Volume,h=s-n,c=Highcharts.numberFormat(h/n*100,2);if(!isNaN(r)&&0!==r&&!isNaN(s)&&0!==s){t.values.push([r,s]);t.percentages[r]=c;l>=0&&t.volumes.push([r,l])}}e.resolve(!0)}}).fail(function(){e.resolve(!1)});return e.promise()};QuoteChart.prototype.updateSeries=function(t){var e=this.getSeriesByName(t.name,0),i=this.getSeriesByName("Volume",1);t.data=t.values;e.update(t,!1);t===this.primaryStockSeries&&i.setData(t.volumes,!1)};QuoteChart.prototype.fixOverhangingLabel=function(){var t=this,e=this.elements.chart.find(".highcharts-xaxis-labels:eq(0) text"),i=this.elements.chart.find(".highcharts-highcharts-scrollbar:eq(0)");e.each(function(e){var n=$(this).position().left-i.position().left,a=t.elements.chart.find(".highcharts-axis:eq(0) path:eq("+e+")");if(n<-30){$(this).attr("opacity",0);a.attr("stroke-width",0)}})};QuoteChart.prototype.canAddComparison=function(t,e){var i=!0;if(-1!==Object.keys(this.stockSeriesContainer).indexOf(t)){i=!1;if(e){$('input[name="compare"]').blur();showMessageModal(invEscapeHtml(t)+" is already displayed on chart")}}if(Object.keys(this.stockSeriesContainer).length>=this.maxSeries-2){i=!1;if(e){$('input[name="compare"]').blur();showMessageModal("Compare limit reached.")}}return i};QuoteChart.prototype.createSeries=function(t){var e=new StockSeries(t);e.compare="percent";e.animation=!1;e.request.Identifier=t;e.request.Period=this.primaryStockSeries.request.Period;e.request.Precision=this.primaryStockSeries.request.Precision;e.color=this.setColor();e.type="line";void 0!==this.chart&&null!==this.chart?e.request.StartTime=$.format.date(this.chart.series[0].xAxis.dataMin+this.getCurrentTimeToChartTimeOffset(),"M/d/yyyy"):e.request.StartTime=this.primaryStockSeries.request.StartTime;e.request.EndTime=this.primaryStockSeries.request.EndTime;return e};QuoteChart.prototype.setComparisonConfig=function(){if("percent"!==this.primaryStockSeries.compare){this.chart.yAxis[1].axisTitle.attr({text:""});this.getSeriesByName("Volume",0).hide();this.primaryStockSeries.compare="percent";this.primaryStockSeries.type="line";this.primaryStockSeries.threshold=0;this.chart.series[0].update(this.primaryStockSeries,!1);this.chart.yAxis[0].update({height:null},!1)}};QuoteChart.prototype.loadNewSeriesData=function(t){var e=this;return this.loadData(t).done(function(){t.data=t.values;e.hideLoader()})};QuoteChart.prototype.addSymbol=function(t){var e=this,i=null;if(this.canAddComparison(t,!0)){this.setComparisonConfig();this.stockSeriesContainer[t]=this.createSeries(t);i=this.loadNewSeriesData(this.stockSeriesContainer[t]).done(function(){e.chart.addSeries(e.stockSeriesContainer[t],!0);e.chart.redraw();e.renderLegend();e.fixOverhangingLabel()})}return i};QuoteChart.prototype.setColor=function(){var t=this.colors[0];this.colors.splice(0,1);return t};QuoteChart.prototype.unsetColor=function(t){-1===this.colors.indexOf(t)&&this.colors.push(t)};QuoteChart.prototype.unsetCompareConfig=function(){this.primaryStockSeries.compare=null;this.primaryStockSeries.type="area";this.primaryStockSeries.threshold=null;this.chart.series[0].update(this.primaryStockSeries,!1);this.chart.yAxis[0].update({height:"75%"},!1);this.getSeriesByName("Volume",0).show();this.chart.yAxis[1].axisTitle.attr({text:this.volumeTitle})};QuoteChart.prototype.removeSymbol=function(t){var e=this.getSeriesByName(t,null);if(null!=e){e.remove();this.unsetColor(this.stockSeriesContainer[t].color);delete this.stockSeriesContainer[t];this.renderLegend();if(this.chart.series.length<4){this.unsetCompareConfig();this.fixOverhangingLabel()}}};QuoteChart.prototype.formatTooltip=function(t){var e,i="",n="",a="",o="";if("Volume"!==t.series.name){i+='<span style="color:'+t.series.color+'">'+t.series.name+"</span>: ";i+="<b>"+Highcharts.numberFormat(t.y,2)+"</b>";if(this.change){e=Highcharts.numberFormat(this.change,2);if(this.change>0){n="value-plus";e="+"+String(e)}this.change<0&&(n="value-minus");a=' <span class="'+n+'">('+e+"%)</span>";o=' <span class="'+n+'">'+e+"%</span>"}else{var r=this.stockSeriesContainer[t.series.name];e=r.percentages[t.x];if(e>0){n="value-plus";e="+"+String(e)}e<0&&(n="value-minus");if(null!=r){a=' <span class="'+n+'">('+e+"%)</span>";o=' <span class="'+n+'">'+e+"%</span>"}}i+=a;i+="<br />"}this.elements.legend.find('.item[data-name="'+t.series.name+'"] .change').html(o);this.startLegendValueUpdater();return i};QuoteChart.prototype.renderLegend=function(){if(this.elements.chart.find(".highcharts-tooltip:eq(0)").position().top<0){for(var t="",e=0;e<=this.chart.series.length;e++){var i=this.chart.series[e];if(i&&this.has_StockSeries(i)){button=e>0?'<span class="btn-close inv-icon-close"></span>':"";t+='<div class="item" data-name="'+i.name+'">';t+='<span class="swatch" style="background-color:'+i.color+'"></span>';t+=i.name;t+='<span class="change"></span>';t+=button;t+="</div>"}}this.elements.legend.html(t);this.setLegendPageValues()}};QuoteChart.prototype.startLegendValueUpdater=function(){var t=this;this.stopLegendValueUpdater();this.legendValueTimer=setInterval(function(){if(t.elements.chart.find(".highcharts-tooltip:eq(0)").position().top<0){t.stopLegendValueUpdater();t.setLegendPageValues()}},100)};QuoteChart.prototype.stopLegendValueUpdater=function(){clearTimeout(this.legendValueTimer)};QuoteChart.prototype.formatYValues=function(t){var e;e=this.primaryStockSeries.compare&&"percent"===this.primaryStockSeries.compare?t.value+"%":t.value;return e};QuoteChart.prototype.ValidateSymbol=function(t){var e=this,i=modifySymbol(t,"-","/"),n=i.toUpperCase();$.ajax({url:"/"+baseMarketsURL+"/api/suggest/"+n+"/",success:function(t){for(var a=!1,o=0;o<t.length;o++){if(t[o].symbol===n){e.addSymbol(n,!0);a=!0;break}}$(".autocomplete-suggestions").hide();$('input[name="compare"]').val("");a||showMessageModal(i+" is not a valid symbol.")},error:function(){$('input[name="compare"]').blur();showMessageModal(i+" is not a valid symbol.")}})};QuoteChart.prototype.showLoader=function(t){var e="",i=this;(null===t||isNaN(t))&&(t=12e3);e+='<div class="loader">';e+='  <div class="progress">';e+='    <span class="point"></span>';e+='    <span class="point"></span>';e+='    <span class="point"></span>';e+="  </div>";e+='  <div class="message"></div>';e+="  </div>";e+="</div>";void 0!==this.elements.chart&&null!==this.elements.chart?this.elements.chart.find(".highcharts-container").prepend(e):this.element.prepend(e);clearTimeout(this.noDataTimer);this.noDataTimer=setTimeout(function(){i.showDataNotAvailable()},t)};QuoteChart.prototype.showDataNotAvailable=function(){this.element.find(".loader").addClass("timeout")};QuoteChart.prototype.hideLoader=function(){clearTimeout(this.noDataTimer);this.element.find(".loader").remove()};QuoteChart.prototype.initElements=function(){var t=this;this.elements.chart.prepend(this.elements.techButton);this.elements.chart.find(".highcharts-container").append(this.elements.legend);this.elements.chart.prepend(this.elements.daterange);this.elements.chart.prepend(this.elements.compare);this.elements.compare.on("compare",function(e){var i=$(".autocomplete-suggestion.selected"),n=$(this).find("input").val();(0===i.length||i.is(":hidden"))&&t.ValidateSymbol(n)});this.elements.legend.on("click",".btn-close",function(e){e.stopPropagation();t.removeSymbol($(this).closest(".item").attr("data-name"))});this.elements.chart.find(".date-field input").on("changeDate",function(e){var i=new Date(t.elements.chart.find('.date-field [name="date_from"]').val()).getTime(),n=new Date(t.elements.chart.find('.date-field [name="date_to"]').val()).getTime()+(t.millisecondsIn("day")-1);t.onSetExtremes(Math.min(i,n),Math.max(i,n),!0)});this.elements.chart.on("mousedown",function(){t.elements.chart.find(".date-field input").datepicker("hide");t.elements.chart.find(".date-field input").blur()});this.element.bind("mouseleave",function(t){Highcharts.each(Highcharts.charts,function(e){e&&e.scroller&&e.scroller.mouseUpHandler(t)})})};var MobileQuoteChart=function(t,e,i,n,a,o){StockChart.apply(this,[a,o]);var r=this,s=new StockSeries(e),l=this.initConfig();this.dataProvider=n;this.element=t;t.find(".legend, .compare-field, .date-field, button.technical").hide();s.color="#67a2f7";s.states={hover:{enabled:!1}};s.enableMouseTracking=!1;this.elements={};this.elements.chart=t.find(".chart");this.stockSeriesContainer={};this.stockSeriesContainer[e]=s;this.firstRun=!0;this.defaultRangeIndex=i;this.elements.chart.highcharts("StockChart",l);this.chart=this.elements.chart.highcharts();this.loadData(s).done(function(){var t=r.getSeriesByName("Navigator",1),e=r.getSeriesByName(s.name,0);r.updateSeries(s);e.update(s,!1);t.update({color:this.defaultSeriesColor},!1);r.chart.redraw();r.chart.rangeSelector.buttons[r.defaultRangeIndex].setState(2);r.chart.rangeSelector.clickButton(r.defaultRangeIndex,4,!0)})};MobileQuoteChart.prototype=Object.create(StockChart.prototype);MobileQuoteChart.prototype.constructor=MobileQuoteChart;MobileQuoteChart.prototype.initConfig=function(){var t=this.configure();t.chart={type:"line",spacingTop:40,spacingLeft:0,height:300,animation:!1};t.rangeSelector.buttonPosition.x=20;t.navigator.outlineColor="transparent";t.navigator.height=0;t.navigator.handles={backgroundColor:"transparent",borderColor:"transparent"};t.navigator.xAxis={labels:{enabled:!1}};t.scrollbar={enabled:!1};t.series=[{color:this.disabledSeriesColor,data:[],states:{hover:{enabled:!1}},enableMouseTracking:!1,animation:!1,valueDecimals:2}];return t};MobileQuoteChart.prototype.loadData=function(t){!0===this.firstRun&&this.showLoader();return this.dataProvider.quoteChart(t.request).done(function(e){invtimer.log("Charts Loaded");t.values=[];t.response=e;t.UtcOffset=e.UtcOffset;for(var i in e.points){var n=e.points[i],a=n.EndDate,o=n.Close;isNaN(a)||0===a||isNaN(o)||0===o||t.values.push([a,o])}})};MobileQuoteChart.prototype.loadNewData=function(t){var e=$.Deferred();this.dataProvider.quoteChart(t.request).done(function(i){invtimer.log("Charts Loaded");if("Success"===i.Outcome&&i.points.length>0){t.values[0][1];for(var n in i.points){var a=i.points[n],o=a.EndDate,r=a.Close;isNaN(o)||0===o||isNaN(r)||0===r||t.values.push([o,r])}e.resolve(!0)}}).fail(function(){e.resolve(!1)});return e.promise()};MobileQuoteChart.prototype.updateSeries=function(t){var e=this.getSeriesByName(t.name,0),i=this.getSeriesByName("Navigator",1);e.setData(t.values,!1);!0===this.firstRun&&i.setData(t.values,!1)};MobileQuoteChart.prototype.addPointsToSeries=function(t){var e=this.getSeriesByName(t.name,0);t.data=t.values;e.update(t,!1);!0===this.firstRun&&chartNavigatorSeries.setData(t.values,!1);this.chart.redraw()};var TickerChart=function(t,e,i,n){StockChart.apply(this);var a=this,o=new StockSeries(e),r={chart:{type:"area",backgroundColor:"transparent",spacingBottom:0,reflow:!0},credits:!1,rangeSelector:!1,navigator:!1,tooltip:!1,xAxis:{visible:!1},yAxis:{gridLineWidth:0,lineWidth:0,plotLines:[{dashStyle:"ShortDash",color:"#aaaaaa",width:1,value:0}],labels:{enabled:!1}},plotOptions:{area:{fillOpacity:.05,marker:{states:{hover:{enabled:!1}}},enableMouseTracking:!1,states:{hover:{enabled:!1,lineWidthPlus:0}}}}};o.request.Period="15";o.request.Precision="Minutes";if(void 0!==n&&""!==n){o.request.EndTime=$.format.date(n,"M/d/yyyy")+" 4:00 PM";o.request.StartTime=$.format.date(n,"M/d/yyyy")+" 9:30 AM"}this.stockSeriesContainer={};this.stockSeriesContainer[e]=o;var s=t||$('<div class="chart">Hidden container</div>');this.elements.chart=s;s.highcharts("StockChart",r);this.chart=s.highcharts();this.chart.element=s;this.loadData(o).done(function(){a.updateSeries(o)});return this.chart};TickerChart.prototype=Object.create(StockChart.prototype);TickerChart.prototype.constructor=TickerChart;TickerChart.prototype.initConfig=function(){return this.configure(xignite.UtcOffset)};TickerChart.prototype.loadData=function(t){var e=this;this.showLoader();return xignite.quoteChart(t.request).done(function(i){invtimer.log("Charts Loaded");var n=i.points[0].Close;t.data=[];t.response=i;t.UtcOffset=i.UtcOffset;for(var a in i.points){var o=i.points[a],r=o.EndDate,s=o.Close,l=s-n,h=Highcharts.numberFormat(l/n*100,2);isNaN(r)||0==r||isNaN(s)||0==s||t.data.push([r,Number(h)])}e.hideLoader()}).fail(function(i){e.chart.element.trigger("removeItem",[t.name])})};TickerChart.prototype.updateSeries=function(t){this.chart.addSeries(t)};
//# sourceMappingURL=public/js/charts.min.js.map